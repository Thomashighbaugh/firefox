/* this stylesheet is used to style shadow parts with the ::part() function,
and to override built-in rules without using the "!important" tag.
the last 75% or so of this stylesheet is dedicated to restoring pre-proton content. */

:root {
    --avatar-image-url: url(chrome://userchrome/content/fxa/avatar-big.svg);
}

:root[fxastatus="not_configured"] {
    --avatar-image-url: url(chrome://userchrome/content/fxa/avatar-empty-big.svg);
}

radio[focused="true"] > .radio-label-box {
    outline: revert;
}

panel,
menupopup,
:is(menupopup, panel)[type="arrow"] {
    --panel-background: var(--arrowpanel-background);
    --panel-color: var(--arrowpanel-color);
    --panel-border-color: var(--arrowpanel-border-color);
    --panel-border-radius: var(--arrowpanel-border-radius);
    --panel-padding: var(--arrowpanel-padding);
}

panel[type="autocomplete-richlistbox"] {
    --panel-padding: var(--menupopup-inner-padding);
    --panel-background: var(--arrowpanel-background);
    --panel-color: var(--menu-color);
    --panel-border-radius: var(--menupopup-border-radius);
    border: none;
    background: none;
}

panel[type="autocomplete-richlistbox"][anchored-on-panel],
panel popupset panel[type="autocomplete-richlistbox"] {
    --panel-background: var(--autocomplete-background);
}

#editBookmarkPanel menulist menupopup::part(content) {
    border: none;
}

:is(panel, menupopup)::part(content) {
    display: -moz-box;
    -moz-box-flex: 1;
    padding: var(--panel-padding);
    color: var(--panel-color);
    background: var(--panel-background, Menu);
    border-radius: var(--panel-border-radius);
    width: var(--panel-width);
}

:is(panel, menupopup)[type="arrow"]::part(content) {
    box-shadow: var(--panel-shadow);
    overflow: hidden;
    margin-top: 4px;
}

#identity-popup::part(content) {
    --panel-padding: var(--menupopup-inner-padding);
    padding: var(--panel-padding);
}

:not(.panel-subview-body) > toolbarseparator + .panel-subview-body,
:not(.panel-subview-body) > .subview-subheader + .panel-subview-body {
    padding-bottom: var(--panel-subview-body-padding-magnitude);
}

.panel-subview-footer-button {
    margin-bottom: var(--menupopup-inner-padding-magnitude);
}

#identity-popup .panel-subview-footer-button {
    margin-bottom: revert;
}

#identity-popup-mainView-panel-header-span {
    margin-top: 2px;
}

#identity-popup-mainView-panel-header {
    padding: 0;
}

#BMB_bookmarksPopup::part(arrowscrollbox),
#BMB_bookmarksPopup menupopup::part(arrowscrollbox),
#BMB_bookmarksPopup menupopup[placespopup="true"]::part(arrowscrollbox) {
    padding: var(--menupopup-inner-padding);
}

#BMB_bookmarksPopup::part(arrowcontent) {
    padding-block: 0;
}

#BMB_bookmarksPopup menupopup[placespopup="true"]::part(innerbox) {
    margin-top: 0;
    border: none;
}

#BMB_bookmarksPopup menupopup[placespopup="true"]::part(content) {
    box-shadow: var(--panel-shadow);
    margin: var(--menupopup-inner-box-margin);
}

#BMB_bookmarksPopup .panel-subview-footer-button {
    margin-bottom: unset;
}

#PopupSearchAutoComplete::part(content) {
    border: var(--searchbar-popup-border);
    border-radius: var(--searchbar-popup-border-radius);
    box-shadow: var(--searchbar-popup-box-shadow);
    width: calc(var(--panel-width) + 6px);
}

/* panel width */
#customizationui-widget-multiview panelview:not([extension]) {
    width: unset;
    min-width: 27em;
    max-width: 42em;
}

/* focused buttons to look like hovered buttons */
panelview
    :is(.toolbarbutton-1, toolbarbutton.subviewbutton, .navigable.subviewbutton):not([disabled], [open]):focus-visible,
.widget-overflow-list .toolbarbutton-1:not([disabled], [open]):focus-visible,
.toolbaritem-combined-buttons:is(:not([cui-areatype="toolbar"]), [overflowedItem="true"])
    > toolbarbutton:not([disabled], [open]):focus-visible {
    background-color: var(--panel-item-hover-bgcolor);
}

panelview
    :is(.toolbarbutton-1, toolbarbutton.subviewbutton, .navigable.subviewbutton):not([disabled], [open]):focus-visible:active,
.widget-overflow-list .toolbarbutton-1:not([disabled], [open]):focus-visible:active,
.toolbaritem-combined-buttons:is(:not([cui-areatype="toolbar"]), [overflowedItem="true"])
    > toolbarbutton:not([disabled], [open]):focus-visible:active {
    background-color: var(--panel-item-active-bgcolor);
}

.panel-footer > button:not([disabled], :active):is(:hover, :focus-visible) {
    background-color: var(
        --button-hover-bgcolor,
        color-mix(in srgb, currentColor 17%, transparent)
    );
}

.panel-footer > button[default]:not([disabled], :active):is(:hover, :focus-visible) {
    background-color: var(--button-primary-hover-bgcolor);
}

menupopup::part(drop-indicator-bar) {
    margin-block: -14px;
    margin-inline: -5px 5px;
}

menupopup::part(drop-indicator) {
    pointer-events: none;
    background: none;
    list-style-image: url(chrome://userchrome/content/menu-drop-indicator.svg) !important;
    -moz-context-properties: fill, fill-opacity, stroke, stroke-opacity;
    fill: var(--lwt-toolbarbutton-icon-fill, currentColor);
    height: 28px;
    max-width: 28px;
    padding-block: 3px;
    padding-inline: 0 6px;
}

/* padding and margins for context menus */
menupopup::part(arrowscrollbox),
#ContentSelectDropdown > menupopup::part(arrowscrollbox),
#PlacesToolbar menupopup::part(content) {
    padding: var(--menupopup-inner-padding);
    margin: var(--menupopup-inner-box-margin);
}

#BMB_bookmarksPopup::part(arrowscrollbox),
#BMB_bookmarksPopup menupopup[placespopup="true"]::part(arrowscrollbox) {
    padding-inline: 0 !important;
}

menupopup::part(arrowscrollbox),
#ContentSelectDropdown > menupopup::part(arrowscrollbox) {
    padding: var(--menupopup-inner-padding);
    margin: var(--menupopup-inner-box-margin);
}

.tab-label {
    line-height: revert;
}

/* hide tab bar's arrow buttons and spacers */
#tabbrowser-arrowscrollbox::part(overflow-start-indicator),
#tabbrowser-arrowscrollbox::part(overflow-end-indicator),
#tabbrowser-tabs:not([movingtab]) #tabbrowser-arrowscrollbox::part(scrollbutton-up),
#tabbrowser-tabs:not([movingtab]) #tabbrowser-arrowscrollbox::part(scrollbutton-down) {
    visibility: collapse;
}

#tabbrowser-arrowscrollbox::part(scrollbutton-up),
#tabbrowser-arrowscrollbox::part(scrollbutton-down) {
    border: none;
    border-radius: 0;
    z-index: 23;
    position: absolute;
    /* visibility of scrollbuttons is tied to userChrome.tabs.rounded-outer-corners.disabled */
    display: var(--tabbrowser-arrowscrollbox-display, none);
    -moz-context-properties: fill, fill-opacity;
    padding-inline: 2px;
    width: 16px;
    background: var(--lwt-accent-color);
    list-style-image: url(chrome://userchrome/content/menu-arrow-left-big.svg);
}

#tabbrowser-arrowscrollbox::part(scrollbutton-up) {
    margin-inline: 0 -16px;
}

#tabbrowser-arrowscrollbox::part(scrollbutton-down) {
    margin-inline: -16px 0;
}

#tabbrowser-arrowscrollbox[scrolledtostart="true"]::part(scrollbutton-up),
#tabbrowser-arrowscrollbox[scrolledtoend="true"]::part(scrollbutton-down) {
    opacity: 1;
}

/* make unpinned tabs stretch to fill the whole tab bar */
.tabbrowser-tab[fadein]:not([style*="max-width"]) {
    max-width: var(--tab-max-width, 225px);
}

/* much better general tab animations.
tab starts at 0 flex but instantly gets 100 flex as fadein attribute gets applied.
by transitioning this property we can make the instantaneous change happen more slowly,
causing the tab to grow over 300ms from the time it's born.
this way we don't animate tabs that were simply moved rather than created */
:root[sessionrestored]
    #tabbrowser-tabs:not([movingtab])
    .tabbrowser-tab:not([pinned], [justmoved], [tab-grouping], [tabdrop-samewindow]) {
    -moz-box-flex: 0;
    transition: min-width 200ms ease-out, max-width 150ms ease-out,
        -moz-box-flex 300ms var(--uc-smooth-timing-function);
}

:root[sessionrestored]
    #tabbrowser-tabs:not([movingtab])
    .tabbrowser-tab[fadein]:not([pinned], [justmoved]) {
    -moz-box-flex: 100;
}

/* shrink pinned tabs */
:root[sessionrestored] .tabbrowser-tab[pinned] {
    min-width: var(--pinned-tab-width);
    max-width: var(--pinned-tab-width);
}

#tabbrowser-tabs[haspinnedtabs]:not([positionpinnedtabs])
    > #tabbrowser-arrowscrollbox
    > .tabbrowser-tab[first-visible-unpinned-tab] {
    margin-inline-start: revert !important;
}

/* devtools highlighter */
:root > iframe.devtools-highlighter-renderer {
    z-index: 2147483647;
}

/* when drag mode is enabled. this enables the tab shadows to draw onto the drag space. */
:root[sizemode="normal"] #TabsToolbar > .toolbar-items #tabbrowser-arrowscrollbox::part(scrollbox) {
    min-height: calc(var(--min-tab-height) + var(--space-above-tabbar));
    padding-block-start: var(--space-above-tabbar);
}

/* undo window inactive tab text opacity */
:root[tabsintitlebar] .tab-label:-moz-window-inactive {
    opacity: revert;
}

/* dim unloaded/discarded tabs */
.tabbrowser-tab[pending] .tab-content :is(.tab-icon-image, .tab-label, .tab-sharing-icon-overlay) {
    opacity: 0.7;
}

.tabbrowser-tab[pending]:is(:hover, .keyboard-focused-tab)
    .tab-content
    :is(.tab-icon-image, .tab-label, .tab-sharing-icon-overlay) {
    opacity: 0.8;
}

/* protections popup panel's arrow style */
#protections-popup[mainviewshowing][side="top"]::part(arrow) {
    fill: var(--arrowpanel-background);
    stroke: var(--panel-border-color);
}

/* other panel arrows */
:is(panel, menupopup)::part(arrow) {
    fill: var(--arrowpanel-background);
    stroke: var(--panel-border-color);
}

@-moz-document regexp("^chrome:(?!\/\/(devtools|mozapps|browser\/content\/(sanitize|places\/places.xhtml)|global\/content\/commonDialog)).*") {
    .panel-footer > button {
        font-weight: var(--uc-font-weight-bold, 600);
    }
}

#PanelUI-whatsNew .whatsNew-message-title,
#protections-popup-message .whatsNew-message-title,
#contextual-feature-recommendation-notification[data-notification-category="icon_and_message"]
    .popup-notification-description,
menulist:not([native])::part(label-box),
#cfr-notification-header-label,
panel[type="autocomplete-richlistbox"]
    > richlistbox
    > richlistitem[originaltype="insecureWarning"]
    > .ac-title
    .ac-emphasize-text-title {
    font-weight: var(--uc-font-weight-bold, 600);
}

#customizationui-widget-panel[viewId^="PanelUI-webext-"]::part(content),
#customizationui-widget-panel[viewId^="PanelUI-webext-"]::part(arrowcontent) {
    border-radius: var(--webextension-panel-border-radius, 5px) !important;
    border: var(--customized-webextension-panel-border, 0) !important;
}

#customizationui-widget-panel[viewId^="PanelUI-webext-"]::part(arrow) {
    stroke: var(--customized-webextension-panel-stroke, var(--arrowpanel-background));
}

#customizationui-widget-panel[viewId^="PanelUI-webext-"][side="top"]::part(arrow) {
    margin-bottom: var(--customized-webextension-panel-margin-bottom, -4px);
}

#customizationui-widget-panel[viewId^="PanelUI-webext-"][side="bottom"]::part(arrow) {
    margin-top: var(--customized-webextension-panel-margin-top, -4px);
}

#customization-panelWrapper {
    margin-top: -12px;
    min-width: 29em;
}

#customization-container,
#customization-container :is(menupopup, panel)::part(arrowscrollbox) {
    --arrowpanel-dimmed: color-mix(in srgb, var(--toolbar-color) 7%, transparent);
    --arrowpanel-dimmed-further: color-mix(in srgb, var(--toolbar-color) 12%, transparent);
    --arrowpanel-dimmed-even-further: color-mix(in srgb, var(--toolbar-color) 15%, transparent);
    --arrowpanel-background: var(--in-content-button-highlight-dark);
    --button-bgcolor: var(--arrowpanel-dimmed);
    --button-hover-bgcolor: var(--arrowpanel-dimmed-further);
    --button-active-bgcolor: var(--arrowpanel-dimmed-even-further);
    --panel-item-hover-bgcolor: var(--arrowpanel-dimmed);
    --panel-item-active-bgcolor: var(--arrowpanel-dimmed-further);
    --menu-background-color: var(--arrowpanel-background);
    --menuitem-hover-background-color: var(--button-hover-bgcolor);
    --menu-disabled-color: var(--ui-text-40);
    --panel-shortcut-color: var(--ui-text-40);
    --arrowpanel-border-color: color-mix(
        in srgb,
        currentColor 8%,
        var(--in-content-button-highlight-dark)
    ) !important;
    --panel-border-color: var(--arrowpanel-border-color) !important;
    --uc-checkbox-unchecked-bgcolor: color-mix(in srgb, var(--toolbar-color) 7%, transparent);
    --uc-checkbox-unchecked-hover-bgcolor: color-mix(
        in srgb,
        var(--toolbar-color) 12%,
        transparent
    );
    --uc-checkbox-unchecked-active-bgcolor: color-mix(
        in srgb,
        var(--toolbar-color) 15%,
        transparent
    );
    --urlbar-input-bgcolor: color-mix(
        in srgb,
        currentColor 4%,
        var(--in-content-button-highlight-dark)
    );
}

#customization-container :is(menupopup, panel)::part(content),
#customization-panelWrapper > .panel-arrowcontent {
    border-radius: var(--arrowpanel-border-radius, 0);
    box-shadow: var(--panel-shadow);
    margin-top: 12px;
    z-index: 250;
    position: absolute;
    background-color: var(--in-content-button-highlight-dark);
}

#customization-panelWrapper > .panel-arrowbox {
    z-index: 251 !important;
    position: absolute;
}

#customization-container {
    background-color: var(--in-content-bg-dark);
    background-image: none;
}

#customization-footer {
    border: none;
    background-color: var(--in-content-box-bg-dark);
}

.customizationmode-button {
    border: 1px solid var(--in-content-border-color-dim);
    border-radius: var(--in-content-button-border-radius);
    background-color: var(--button-hover-bgcolor);
    appearance: none;
}

.customizationmode-button:is(:active, :focus-visible, :hover):not([disabled]),
.customizationmode-button[open],
.customizationmode-button[checked] {
    background-color: var(--button-active-bgcolor);
}

.customizationmode-checkbox:not(:-moz-lwtheme, [disabled]),
.customizationmode-button {
    color: var(--toolbar-color);
}

#customization-done-button {
    font-weight: 500;
    border-color: transparent;
    background-color: var(--in-content-primary-button-background);
}

#customization-done-button:is(:active, :focus-visible, :hover):not([disabled]) {
    background-color: var(--in-content-primary-button-background-hover);
}

.customization-lwtheme-menu-footeritem {
    font-weight: 500;
}

@-moz-document url(chrome://browser/content/browser.xhtml)
{
    :is(panel, menupopup)::part(arrow) {
        display: -moz-inline-box;
    }

    :is(#customization-lwtheme-menu, #customization-uidensity-menu)::part(arrowbox) {
        -moz-box-ordinal-group: 2;
    }

    :is(#customization-lwtheme-menu, #customization-uidensity-menu)::part(arrow) {
        transform: scaleY(-1);
        margin-bottom: revert;
        position: relative;
        margin-inline: 10px;
        z-index: 250;
    }

    :is(#customization-lwtheme-menu, #customization-uidensity-menu)[side="top"]::part(arrow) {
        margin-top: -5px;
    }

    :is(#customization-lwtheme-menu, #customization-uidensity-menu)[side="bottom"]::part(arrow) {
        margin-bottom: -5px;
    }

    #customization-panelWrapper > .panel-arrowbox > .panel-arrow[side="top"] {
        margin-top: 3px;
    }
}

:is(panel, menupopup)[side="top"]::part(arrow) {
    margin-bottom: -5px;
}

:is(panel, menupopup)[side="bottom"]::part(arrow) {
    margin-top: -5px;
}

#identity-icon {
    list-style-image: var(--default-identity-icon);
}

/* dropmarkers and other select/menulist stuff */
@-moz-document url(chrome://browser/content/browser.xhtml),
    url(chrome://mozapps/content/handling/permissionDialog.xhtml),
    url(chrome://mozapps/content/handling/appChooser.xhtml),
    url-prefix(chrome://global/content/print.html),
    url(chrome://browser/content/places/bookmarkProperties.xhtml),
    url(chrome://browser/content/places/bookmarkProperties2.xhtml)
{
    menulist:not([native]) {
        padding-inline: 6px;
    }

    :is(panel, dialog) menulist::part(dropmarker-icon) {
        appearance: none;
        list-style-image: url(chrome://userchrome/content/select-drop-marker.svg);
        margin-block: 0 !important;
        width: 10px !important;
        fill-opacity: 0.6;
    }

    :is(panel, dialog) menulist:is(:hover)::part(dropmarker-icon) {
        fill-opacity: 0.8;
    }

    :is(panel, dialog)
        menulist:is(:focus-visible, :hover:active, [open="true"])::part(dropmarker-icon) {
        fill-opacity: 1;
    }

    :is(panel, dialog) menulist::part(dropmarker) {
        margin-inline-start: 6px;
    }

    :is(panel, dialog) menulist::part(icon),
    :is(panel, dialog) menulist::part(dropmarker),
    :is(panel, dialog) menulist::part(dropmarker-icon) {
        -moz-context-properties: fill, fill-opacity;
    }

    :is(panel, dialog) menulist::part(label) {
        font-weight: normal;
    }

    menulist::part(label) {
        appearance: none;
        margin-block: 0;
    }

    #editBMPanel_folderMenuList::part(icon) {
        margin-inline: 3px;
    }
}

.popup-notification-learnmore-link {
    margin-block: 2px;
}

/* proton stuff */
.subviewbutton > menupopup::part(innerbox) {
    border-radius: 5px;
}

.menu-text,
.menu-iconic-text {
    padding-block: 0;
}

panel button {
    border: revert;
}

#nav-bar-customization-target > :is(toolbarbutton, toolbaritem):first-child,
#nav-bar-customization-target > toolbarpaletteitem:first-child > :is(toolbarbutton, toolbaritem) {
    padding: 0 var(--toolbarbutton-outer-padding);
}

/* prevent hiding the close button when audio is playing. undoes an irritating rule in the proton update */
#navigator-toolbox:not(:hover)
    .tab-icon-overlay:not([pinned], [sharing], [crashed]):is([soundplaying], [muted], [activemedia-blocked]),
#navigator-toolbox:hover
    .tab-icon-stack:not([pinned], [sharing], [crashed]):is([soundplaying], [muted], [activemedia-blocked])
    > :not(.tab-icon-overlay) {
    opacity: revert;
}

#toolbar-menubar:not(:hover)
    + #TabsToolbar:not(:hover)
    .tab-icon-overlay:not([pinned], [sharing], [crashed]):is([soundplaying], [muted], [activemedia-blocked]),
:is(#toolbar-menubar:hover + #TabsToolbar, #TabsToolbar:hover)
    .tab-icon-stack:not([pinned], [sharing], [crashed]):is([soundplaying], [muted], [activemedia-blocked])
    > :not(.tab-icon-overlay) {
    opacity: revert;
}

/* revert proton changes */
.browserContainer > findbar {
    padding: 0;
}

.findbar-container {
    padding-block: 0;
    padding-inline: 8px;
    margin-inline: 0;
    height: 20px;
}

.findbar-find-previous,
.findbar-find-next {
    background: rgba(255, 255, 255, 0.2);
    border: 1px solid ThreeDShadow;
    border-inline-start: none;
    border-radius: 0;
}

.findbar-find-previous > .toolbarbutton-icon,
.findbar-find-next > .toolbarbutton-icon {
    padding: 0;
}

.findbar-find-previous {
    margin-inline-start: 0;
}

.findbar-find-next {
    border-start-end-radius: 0;
    border-end-end-radius: 0;
    margin-inline-end: 0;
}

#back-button,
.unified-nav-back[_moz-menuactive="true"]:-moz-locale-dir(ltr),
.unified-nav-forward[_moz-menuactive="true"]:-moz-locale-dir(rtl) {
    list-style-image: url(chrome://userchrome/content/skin/back.svg);
}

panelview .toolbarbutton-1:not([disabled]):is([open], :hover:active),
toolbarbutton.subviewbutton:not([disabled]):is([open], :hover:active),
.navigable.subviewbutton:not([disabled]):is([open], :hover:active),
menu.subviewbutton:not([disabled])[_moz-menuactive]:active,
#PlacesToolbar menuitem:not([disabled])[_moz-menuactive]:active,
#PlacesToolbar menu:not([disabled])[_moz-menuactive]:active,
menuitem.subviewbutton:not([disabled])[_moz-menuactive]:active,
.widget-overflow-list .toolbarbutton-1:not([disabled]):is([open], :hover:active),
.toolbaritem-combined-buttons:is(:not([cui-areatype="toolbar"]), [overflowedItem="true"])
    > toolbarbutton:not([disabled]):is([open], :hover:active) {
    box-shadow: revert;
}

/* the following animations require restorePreProtonDownloadsButton.uc.js, fx-autoconfig, and the resources/downloads folder */
:root[pre-proton-downloads-button]
    #downloads-button
    > .toolbarbutton-badge-stack
    > #downloads-indicator-progress-outer {
    visibility: hidden;
    top: calc(50% - 8.5px);
    left: calc(50% - 8.5px);
    width: 17px;
    height: 16.5px;
    border-radius: 100%;
    border-width: 2px;
}

:root[pre-proton-downloads-button]
    #downloads-button[progress]:not([notification], [animate])
    > .toolbarbutton-badge-stack
    > #downloads-indicator-progress-outer {
    visibility: visible;
}

:root[pre-proton-downloads-button]
    #downloads-button[progress]:not([notification], [animate])
    > .toolbarbutton-badge-stack
    > #downloads-indicator-anchor
    > #downloads-indicator-icon {
    visibility: hidden !important;
}

:root[pre-proton-downloads-button] #downloads-indicator-progress-inner {
    position: relative;
    background: conic-gradient(
        var(--toolbarbutton-icon-fill-attention) var(--download-progress-pcent),
        transparent var(--download-progress-pcent)
    );
    border-radius: 100%;
}

:root[pre-proton-downloads-button] #downloads-indicator-anchor {
    list-style-image: url(chrome://userchrome/content/downloads/download-icons.svg#arrow-with-bar);
}

@keyframes downloadsIndicatorStartDip {
    0% {
        transform: translateY(0);
        animation-timing-function: linear;
    }
    50% {
        transform: translateY(0);
        animation-timing-function: ease-out;
    }
    88% {
        transform: translateY(3px);
        animation-timing-function: ease-out;
    }
    100% {
        transform: translateY(0);
    }
}

@keyframes downloadsIndicatorFinishPulse {
    from {
        transform: scale(1);
    }
    37.5% {
        transform: scale(1.4);
        animation-timing-function: ease-out;
    }
    to {
        transform: scale(1);
        animation-timing-function: ease-in;
    }
}

:root[pre-proton-downloads-button] #downloads-indicator-icon {
    visibility: visible !important;
}

:root[pre-proton-downloads-button]
    #downloads-button[notification="start"]
    > .toolbarbutton-badge-stack
    > #downloads-indicator-anchor
    > #downloads-indicator-icon {
    animation-name: downloadsIndicatorStartDip;
    animation-duration: 360ms;
    animation-delay: 100ms;
    animation-iteration-count: 1;
}

:root[pre-proton-downloads-button]
    #downloads-button[notification="finish"]
    > .toolbarbutton-badge-stack
    > #downloads-indicator-anchor
    > #downloads-indicator-icon {
    animation-name: downloadsIndicatorFinishPulse;
    animation-delay: 250ms;
    animation-duration: 300ms;
    animation-iteration-count: 2;
}

:root[pre-proton-downloads-button] #downloads-indicator-finish-box {
    display: none !important;
}

:root[pre-proton-downloads-button]
    #downloads-button
    > .toolbarbutton-badge-stack
    > #downloads-indicator-start-box {
    pointer-events: none;
    -moz-context-properties: fill, fill-opacity, stroke;
    grid-area: initial;
    top: -4px !important;
    left: calc(50% - 10px);
    z-index: 0;
    height: 48px;
}

:root[pre-proton-downloads-button] #downloads-indicator-start-image {
    min-width: 658px;
    height: 48px;
    list-style-image: none;
}

@keyframes downloadsIndicatorNotificationStart {
    from {
        transform: translateX(0);
        fill: var(--toolbarbutton-icon-fill);
        fill-opacity: var(--toolbarbutton-icon-fill-opacity);
    }
    to {
        transform: translateX(-637.7px);
        fill: var(--toolbarbutton-icon-fill-attention);
        fill-opacity: 1;
    }
}

:root[pre-proton-downloads-button]
    #downloads-button[animate][notification="start"]
    > .toolbarbutton-badge-stack
    > #downloads-indicator-start-box
    > #downloads-indicator-start-image {
    --anim-steps: 31 !important;
    list-style-image: url(chrome://userchrome/content/downloads/notification-start-animation.svg);
    animation-name: downloadsIndicatorNotificationStart;
    animation-duration: 540ms;
    transform: translateX(0px);
    animation-delay: 64ms;
    animation-timing-function: steps(31);
}

#forward-button,
#urlbar-go-button,
.search-go-button,
.unified-nav-forward[_moz-menuactive="true"]:-moz-locale-dir(ltr),
.unified-nav-back[_moz-menuactive="true"]:-moz-locale-dir(rtl) {
    list-style-image: url(chrome://userchrome/content/skin/forward.svg);
}

.customization-target :is(#reload-button, #stop-button) > .toolbarbutton-icon {
    padding: var(--toolbarbutton-inner-padding) !important;
}

:is(#reload-button, #stop-button) > .toolbarbutton-animatable-box {
    translate: revert;
}

#stop-reload-button > :is(#reload-button, #stop-button) > .toolbarbutton-animatable-box {
    display: block;
}

#stop-reload-button[animate] > #reload-button > .toolbarbutton-icon,
#stop-reload-button[animate] > #reload-button[displaystop] + #stop-button > .toolbarbutton-icon {
    fill: transparent;
}

@keyframes reload-to-stop {
    from {
        transform: translateX(0);
    }
    to {
        transform: translateX(-450px);
    }
}

@keyframes stop-to-reload {
    from {
        transform: translateX(0);
    }
    to {
        transform: translateX(-450px);
    }
}

#stop-reload-button {
    position: relative;
}

#reload-button > .toolbarbutton-animatable-box,
#stop-button > .toolbarbutton-animatable-box {
    top: calc(50% - 10px); /* Vertically center the 20px tall animatable image */
    /* Since .toolbarbutton-icon uses a different width than the animatable-box,
    we need to set a padding relative to the difference in widths. */
    margin-inline-start: calc((16px + 2 * var(--toolbarbutton-inner-padding) - 18px) / 2);
    width: 18px; /* Width of each frame within the SVG sprite */
    height: 20px; /* Height of each frame within the SVG sprite */
}

#stop-reload-button[animate]
    > #reload-button
    > .toolbarbutton-animatable-box
    > .toolbarbutton-animatable-image {
    background-image: url(chrome://userchrome/content/skin/reload-to-stop.svg);
    width: 468px;
}

#stop-reload-button[animate]
    > #reload-button:not([displaystop])
    > .toolbarbutton-animatable-box
    > .toolbarbutton-animatable-image {
    animation-name: reload-to-stop;
}

#reload-button:not([displaystop])
    > .toolbarbutton-animatable-box
    > .toolbarbutton-animatable-image {
    animation-timing-function: steps(25);
    animation-duration: 200ms;
}

#stop-reload-button[animate]
    > #reload-button[displaystop]
    + #stop-button
    > .toolbarbutton-animatable-box
    > .toolbarbutton-animatable-image {
    background-image: url(chrome://userchrome/content/skin/stop-to-reload.svg);
    width: 468px;
}

#stop-reload-button[animate]
    > #reload-button[displaystop]
    + #stop-button
    > .toolbarbutton-animatable-box
    > .toolbarbutton-animatable-image {
    animation-name: stop-to-reload;
}

#reload-button[displaystop]
    + #stop-button
    > .toolbarbutton-animatable-box
    > .toolbarbutton-animatable-image {
    animation-timing-function: steps(25);
    animation-duration: 200ms;
}

#reload-button > .toolbarbutton-animatable-box > .toolbarbutton-animatable-image,
#reload-button[displaystop]
    + #stop-button
    > .toolbarbutton-animatable-box
    > .toolbarbutton-animatable-image {
    transform: translateX(-450px);
}

#reload-button {
    list-style-image: url(chrome://userchrome/content/skin/reload.svg);
}

#stop-button {
    list-style-image: url(chrome://userchrome/content/skin/stop.svg);
}

#home-button {
    list-style-image: url(chrome://userchrome/content/skin/home.svg);
}

#bookmarks-toolbar-button,
#bookmarks-toolbar-placeholder {
    list-style-image: url(chrome://userchrome/content/skin/bookmarks-toolbar.svg);
}

#bookmarks-menu-button {
    list-style-image: url(chrome://userchrome/content/skin/bookmark-star-on-tray.svg);
}

#history-panelmenu,
#sidebar-switcher-history > .toolbarbutton-icon,
#sidebar-box[sidebarcommand="viewHistorySidebar"]
    > #sidebar-header
    > #sidebar-switcher-target
    > #sidebar-icon {
    list-style-image: url(chrome://userchrome/content/skin/history.svg);
}

#downloads-button {
    list-style-image: url(chrome://userchrome/content/skin/downloads/download-icons.svg#arrow-with-bar);
}

#open-file-button {
    list-style-image: url(chrome://userchrome/content/skin/open.svg);
}

#screenshot-button {
    list-style-image: var(--screenshot-icon, url(chrome://browser/skin/screenshot.svg));
}

#import-button {
    list-style-image: url(chrome://userchrome/content/skin/import.svg);
}

#save-page-button {
    list-style-image: url(chrome://userchrome/content/skin/save.svg);
}

#sync-button,
#sidebar-switcher-tabs > .toolbarbutton-icon,
#sidebar-box[sidebarcommand="viewTabsSidebar"]
    > #sidebar-header
    > #sidebar-switcher-target
    > #sidebar-icon {
    list-style-image: url(chrome://userchrome/content/skin/tab.svg);
}

#characterencoding-button {
    list-style-image: url(chrome://userchrome/content/skin/characterEncoding.svg);
}

#new-window-button {
    list-style-image: url(chrome://userchrome/content/skin/new-window.svg);
}

#new-tab-button {
    list-style-image: url(chrome://userchrome/content/skin/new-tab.svg);
}

#tabs-newtab-button,
#TabsToolbar #new-tab-button {
    list-style-image: url(chrome://userchrome/content/add.svg);
}

#alltabs-button {
    list-style-image: url(chrome://userchrome/content/arrow-dropdown-16.svg);
}

#privatebrowsing-button {
    list-style-image: url(chrome://userchrome/content/skin/privateBrowsing.svg);
}

#find-button {
    list-style-image: url(chrome://userchrome/content/search-glass.svg);
}

#print-button {
    list-style-image: url(chrome://userchrome/content/print.svg);
}

#fullscreen-button {
    list-style-image: url(chrome://userchrome/content/skin/fullscreen.svg);
}

#developer-button {
    list-style-image: url(chrome://userchrome/content/skin/developer.svg);
}

#profiler-button-button > .toolbarbutton-icon {
    list-style-image: url(chrome://userchrome/content/devtools/tool-profiler.svg);
}

#profiler-button-button:not(.profiler-active) > image {
    transform: scaleX(-1);
}

#profiler-button-button.profiler-active > image {
    fill: #0060df;
    fill-opacity: 1;
    background-color: #0060df33;
}

#profiler-button-button.profiler-active:hover > image {
    background-color: #0060df22;
}

#profiler-button-button.profiler-paused > image {
    opacity: 0.4;
}

#preferences-button {
    list-style-image: url(chrome://userchrome/content/settings.svg);
}

#PanelUI-menu-button {
    list-style-image: url(chrome://userchrome/content/skin/menu.svg);
}

#PanelUI-menu-button[badge-status="update-available"],
#PanelUI-menu-button[badge-status="update-downloading"],
#PanelUI-menu-button[badge-status="update-manual"],
#PanelUI-menu-button[badge-status="update-other-instance"],
#PanelUI-menu-button[badge-status="update-restart"] {
    list-style-image: url(chrome://userchrome/content/skin/menu-badged.svg);
}

#cut-button {
    list-style-image: url(chrome://userchrome/content/skin/edit-cut.svg);
}

#copy-button {
    list-style-image: url(chrome://userchrome/content/skin/edit-copy.svg);
}

#paste-button {
    list-style-image: url(chrome://userchrome/content/skin/edit-paste.svg);
}

#zoom-out-button {
    list-style-image: url(chrome://userchrome/content/skin/zoom-out.svg);
}

#zoom-in-button {
    list-style-image: url(chrome://userchrome/content/skin/zoom-in.svg);
}

#PlacesChevron,
#nav-bar-overflow-button {
    list-style-image: url(chrome://userchrome/content/chevron.svg);
}

#nav-bar-overflow-button[animate] > .toolbarbutton-icon {
    fill: transparent;
}

@keyframes overflow-animation {
    from {
        transform: translateX(0);
    }
    50% {
        fill: var(--toolbarbutton-icon-fill-attention);
        fill-opacity: 1;
    }
    to {
        transform: translateX(-1260px);
        fill: var(--toolbarbutton-icon-fill-attention);
        fill-opacity: 1;
    }
}

/* The animation is supposed to show the blue fill color for 520ms, then the
fade to the toolbarbutton-fill color for the remaining 210ms. Thus with an
animation-duration of 730ms, 71% is the point where we start the fade out. */
@keyframes overflow-fade {
    from {
        fill: var(--toolbarbutton-icon-fill-attention);
        fill-opacity: 1;
    }
    71% {
        fill: var(--toolbarbutton-icon-fill-attention);
        fill-opacity: 1;
    }
    to {
        fill: inherit;
    }
}

#nav-bar-overflow-button > .toolbarbutton-animatable-box {
    top: calc(50% - 18px); /* Vertically center the 36px tall animatable image */
    /* Since .toolbarbutton-icon uses a different width than the animatable box,
    we need to set a padding relative to the difference in widths. */
    margin-inline-start: calc((16px + 2 * var(--toolbarbutton-inner-padding) - 18px) / 2);
    width: 18px; /* Width of each frame within the SVG sprite */
    height: 36px; /* Height of each frame within the SVG sprite */
}

#nav-bar-overflow-button > .toolbarbutton-animatable-box > .toolbarbutton-animatable-image {
    min-height: 36px; /* Minimum height must be equal to the height of the SVG sprite */
}

#nav-bar-overflow-button[animate]
    > .toolbarbutton-animatable-box
    > .toolbarbutton-animatable-image {
    animation-name: overflow-animation;
    animation-timing-function: steps(70);
    animation-duration: 1167ms;
    background-image: url(chrome://userchrome/content/skin/chevron-animation.svg);
    width: 1278px;
}

#nav-bar-overflow-button[animate][fade]
    > .toolbarbutton-animatable-box
    > .toolbarbutton-animatable-image {
    animation-name: overflow-fade;
    animation-timing-function: ease-out;
    animation-duration: 730ms;
}

#email-link-button {
    list-style-image: url(chrome://userchrome/content/skin/mail.svg);
}

#sidebar-button {
    list-style-image: url(chrome://userchrome/content/skin/sidebars-right.svg);
}

#sidebar-button:-moz-locale-dir(ltr):not([positionend]),
#sidebar-button:-moz-locale-dir(rtl)[positionend] {
    list-style-image: url(chrome://userchrome/content/skin/sidebars.svg);
}

#panic-button {
    list-style-image: url(chrome://userchrome/content/skin/forget.svg);
}

#panic-button[open] {
    fill: rgb(213, 32, 20);
}

toolbar[brighttext] #panic-button[open] {
    fill: #ff848b;
}

#navigator-toolbox {
    position: relative;
}

#library-animatable-box {
    display: none;
}

#library-animatable-box[animate] {
    display: block;
}

#library-button {
    list-style-image: url(chrome://userchrome/content/skin/library.svg);
}

#library-button[scaling] {
    list-style-image: url(chrome://userchrome/content/skin/library-scaling-fix.svg);
}

@keyframes library-bookmark-animation {
    from {
        transform: translateX(0);
        fill: inherit;
    }
    25% {
        fill: inherit;
    }
    50% {
        fill: var(--toolbarbutton-icon-fill-attention);
        fill-opacity: 1;
    }
    to {
        transform: translateX(-1056px);
        fill: var(--toolbarbutton-icon-fill-attention);
        fill-opacity: 1;
    }
}

@keyframes library-bookmark-animation-rtl {
    from {
        transform: translateX(1056px);
        fill: inherit;
    }
    25% {
        fill: inherit;
    }
    50% {
        fill: var(--toolbarbutton-icon-fill-attention);
        fill-opacity: 1;
    }
    to {
        transform: translateX(0);
        fill: var(--toolbarbutton-icon-fill-attention);
        fill-opacity: 1;
    }
}

@keyframes library-bookmark-fade {
    from {
        fill: var(--toolbarbutton-icon-fill-attention);
        fill-opacity: 1;
    }
    to {
        fill: inherit;
    }
}

#library-button[animate] > .toolbarbutton-icon {
    fill: transparent;
}

#library-animatable-box[animate] {
    /* Position the sprite at the y-position of the library-button, then adjust
    based on the size difference between half of the button height and half
    of the sprite height. */
    top: calc(var(--library-button-height) / 2 - 27px);
    /* Set a margin relative to the difference in widths of the .toolbarbutton-icon
    and the .toolbar-animatable-box. This is correct even in RTL because the item
    is positioned using `left`. */
    left: calc(var(--library-icon-x) + (16px + 2 * var(--toolbarbutton-inner-padding) - 22px) / 2);
    width: 22px; /* Width of each frame within the SVG sprite */
    height: 54px; /* Height of each frame within the SVG sprite */
}

#library-animatable-box[animate] > .toolbarbutton-animatable-image {
    min-height: 54px; /* Minimum height must be equal to the height of the SVG sprite */
    width: 1078px;
    animation-duration: 800ms;
    animation-timing-function: steps(48);
}

#library-animatable-box[animate][fade] > .toolbarbutton-animatable-image {
    animation-duration: 2s;
    animation-timing-function: ease-out;
}

#library-animatable-box[animate="bookmark"] > .toolbarbutton-animatable-image {
    background-image: url(chrome://userchrome/content/skin/library-bookmark-animation.svg);
    animation-name: library-bookmark-animation;
    -moz-context-properties: fill, fill-opacity, stroke;
    stroke: var(--toolbarbutton-icon-fill-attention);
}

#library-animatable-box[animate="bookmark"]:-moz-locale-dir(rtl) > .toolbarbutton-animatable-image {
    animation-name: library-bookmark-animation-rtl;
}

#library-animatable-box[animate="bookmark"][fade] > .toolbarbutton-animatable-image {
    animation-name: library-bookmark-fade;
}

#save-to-pocket-button {
    list-style-image: url(chrome://userchrome/content/skin/pocket-outline.svg);
    fill: var(--lwt-toolbarbutton-icon-fill, currentColor);
    fill-opacity: var(--toolbarbutton-icon-fill-opacity);
}

#save-to-pocket-button[open="true"],
#save-to-pocket-button[pocketed="true"] {
    list-style-image: url(chrome://userchrome/content/skin/pocket.svg);
    fill: #ef4056;
}

.subviewbutton-back {
    margin: 0 0 0 4px;
}

.panel-header > .subviewbutton-back {
    list-style-image: url(chrome://userchrome/content/menu-arrow-left-big.svg);
}

.notification-anchor-icon {
    list-style-image: url(chrome://userchrome/content/info-filled.svg);
    padding: 0;
}

/* webrtc notifications */
#webRTC-selectCamera-icon {
    list-style-image: url(chrome://userchrome/content/notifications/camera.svg);
}

#webRTC-selectMicrophone-icon {
    list-style-image: url(chrome://userchrome/content/notifications/microphone.svg);
}

.tab-sharing-icon-overlay[sharing="camera"] {
    list-style-image: url(chrome://userchrome/content/notifications/camera.svg);
}

.tab-sharing-icon-overlay[sharing="microphone"] {
    list-style-image: url(chrome://userchrome/content/notifications/microphone.svg);
}

.tab-sharing-icon-overlay[sharing="screen"] {
    list-style-image: url(chrome://userchrome/content/notifications/screen.svg);
}

/* INDIVIDUAL NOTIFICATIONS */

.focus-tab-by-prompt-icon {
    list-style-image: url(chrome://userchrome/content/notifications/focus-tab-by-prompt.svg);
}

.popup-notification-icon[popupid="storage-access"],
.storage-access-icon {
    list-style-image: url(chrome://userchrome/content/skin/controlcenter/3rdpartycookies.svg);
}

.popup-notification-icon[popupid="persistent-storage"],
.persistent-storage-icon {
    list-style-image: url(chrome://userchrome/content/notifications/persistent-storage.svg);
}

.persistent-storage-icon.blocked-permission-icon {
    list-style-image: url(chrome://userchrome/content/notifications/persistent-storage-blocked.svg);
}

.popup-notification-icon[popupid="web-notifications"],
.desktop-notification-icon {
    list-style-image: url(chrome://userchrome/content/notifications/desktop-notification.svg);
}

.desktop-notification-icon.blocked-permission-icon {
    list-style-image: url(chrome://userchrome/content/notifications/desktop-notification-blocked.svg);
}

.geo-icon {
    list-style-image: url(chrome://userchrome/content/notifications/geo.svg);
}

.geo-icon.blocked-permission-icon {
    list-style-image: url(chrome://userchrome/content/notifications/geo-blocked.svg);
}

.popup-notification-icon[popupid="geolocation"] {
    list-style-image: url(chrome://userchrome/content/notifications/geo-detailed.svg);
}

.open-protocol-handler-icon {
    list-style-image: url(chrome://userchrome/content/open-in-new.svg);
}

.open-protocol-handler-icon:-moz-locale-dir(rtl) {
    transform: scaleX(-1);
}

.xr-icon {
    list-style-image: url(chrome://userchrome/content/notifications/xr.svg);
}

.xr-icon.blocked-permission-icon {
    list-style-image: url(chrome://userchrome/content/notifications/xr-blocked.svg);
}

.popup-notification-icon[popupid="xr"] {
    list-style-image: url(chrome://userchrome/content/notifications/xr.svg);
}

.autoplay-media-icon {
    list-style-image: url(chrome://userchrome/content/notifications/autoplay-media.svg);
}

.popup-notification-icon[popupid="autoplay-media"] {
    list-style-image: url(chrome://userchrome/content/notifications/autoplay-media-detailed.svg);
}

.autoplay-media-icon.blocked-permission-icon {
    list-style-image: url(chrome://userchrome/content/notifications/autoplay-media-blocked.svg);
}

.storage-access-notification-content {
    color: var(--panel-disabled-color);
    font-style: italic;
    margin-top: 15px;
}

.storage-access-notification-content .text-link {
    color: -moz-nativehyperlinktext;
}

.storage-access-notification-content .text-link:hover {
    text-decoration: underline;
}

#storage-access-notification .popup-notification-body-container {
    padding: 20px;
}

.popup-notification-icon[popupid="indexedDB-permissions-prompt"],
.indexedDB-icon {
    list-style-image: url(chrome://userchrome/content/notifications/indexedDB.svg);
}

.popup-notification-icon[popupid="password"],
.login-icon {
    list-style-image: url(chrome://userchrome/content/skin/login.svg);
}

.login-icon[extraAttr="attention"] {
    fill: var(--toolbarbutton-icon-fill-attention);
    fill-opacity: 1;
}

.camera-icon {
    list-style-image: url(chrome://userchrome/content/notifications/camera.svg);
}

.camera-icon.in-use {
    list-style-image: url(chrome://userchrome/content/notifications/camera.svg);
}

.camera-icon.blocked-permission-icon {
    list-style-image: url(chrome://userchrome/content/notifications/camera-blocked.svg);
}

.microphone-icon {
    list-style-image: url(chrome://userchrome/content/notifications/microphone.svg);
}

.microphone-icon.in-use {
    list-style-image: url(chrome://userchrome/content/notifications/microphone.svg);
}

.microphone-icon.blocked-permission-icon {
    list-style-image: url(chrome://userchrome/content/notifications/microphone-blocked.svg);
}

.popup-notification-icon.microphone-icon {
    list-style-image: url(chrome://userchrome/content/notifications/microphone-detailed.svg);
}

.screen-icon {
    list-style-image: url(chrome://userchrome/content/notifications/screen.svg);
}

.screen-icon.in-use {
    list-style-image: url(chrome://userchrome/content/notifications/screen.svg);
}

.screen-icon.blocked-permission-icon {
    list-style-image: url(chrome://userchrome/content/notifications/screen-blocked.svg);
}

.midi-icon,
.midi-sysex-icon,
.popup-notification-icon[popupid="midi"],
.popup-notification-icon[popupid="midi-sysex"] {
    list-style-image: url(chrome://userchrome/content/notifications/midi.svg);
}

#canvas-notification-icon,
.popup-notification-icon[popupid="canvas-permissions-prompt"],
.canvas-icon {
    list-style-image: url(chrome://userchrome/content/notifications/canvas.svg);
}

.canvas-icon.blocked-permission-icon {
    list-style-image: url(chrome://userchrome/content/notifications/canvas-blocked.svg);
}

#webauthn-notification-icon,
.popup-notification-icon[popupid^="webauthn-prompt-"] {
    list-style-image: url(chrome://userchrome/content/notifications/webauthn.svg);
}

.popup-icon {
    list-style-image: url(chrome://userchrome/content/notifications/popup.svg);
}

.popup-subitem {
    list-style-image: url(chrome://userchrome/content/notifications/popup-subitem.svg);
    margin-inline-start: 42px;
    width: 16px;
    height: 16px;
    -moz-context-properties: fill, fill-opacity;
    fill: currentColor;
    fill-opacity: 0.6;
}

.popup-subitem:-moz-locale-dir(rtl) {
    transform: scaleX(-1);
}

#permission-popup-menulist,
#permission-popup-menulist > menupopup {
    min-width: 6.5em;
}

/* EME */

.popup-notification-icon[popupid="drmContentPlaying"],
.drm-icon {
    list-style-image: url(chrome://userchrome/content/skin/drm-icon.svg);
}

.notification-anchor-icon[animate="true"],
#eme-notification-icon[firstplay="true"] {
    animation: emeTeachingMoment 0.2s linear 0s 5 normal;
}

@keyframes emeTeachingMoment {
    0% {
        transform: translateX(0);
    }
    25% {
        transform: translateX(3px);
    }
    75% {
        transform: translateX(-3px);
    }
    100% {
        transform: translateX(0);
    }
}

/* INSTALL ADDONS */

.install-icon {
    list-style-image: url(chrome://userchrome/content/material/extension.svg);
}

.install-icon.blocked-permission-icon,
.popup-notification-icon[popupid="xpinstall-disabled"],
.popup-notification-icon[popupid="addon-install-blocked"],
.popup-notification-icon[popupid="addon-install-origin-blocked"] {
    list-style-image: url(chrome://userchrome/content/skin/addons/addon-install-blocked.svg);
}

.popup-notification-icon[popupid="addon-progress"] {
    list-style-image: url(chrome://userchrome/content/skin/addons/addon-install-downloading.svg);
}

.popup-notification-icon[popupid="addon-install-failed"] {
    list-style-image: url(chrome://userchrome/content/skin/addons/addon-install-error.svg);
}

.popup-notification-icon[popupid="addon-install-confirmation"] {
    list-style-image: url(chrome://userchrome/content/material/extension.svg);
}

#addon-install-confirmation-notification[warning]
    .popup-notification-icon[popupid="addon-install-confirmation"] {
    list-style-image: url(chrome://userchrome/content/skin/addons/addon-install-warning.svg);
}

.popup-notification-icon[popupid="addon-install-complete"] {
    list-style-image: url(chrome://userchrome/content/skin/addons/addon-install-installed.svg);
}

/* OFFLINE APPS */

.popup-notification-icon[popupid="offline-app-usage"] {
    list-style-image: url(chrome://userchrome/content/help.svg);
}

/* PLUGINS */

.plugin-icon {
    list-style-image: url(chrome://userchrome/content/plugin.svg);
    transition: fill 1.5s;
}

#plugin-icon-badge {
    list-style-image: url(chrome://userchrome/content/notifications/plugin-badge.svg);
    width: 16px;
    height: 16px;
    opacity: 0;
    transition: opacity 1.5s;
}

#plugins-notification-icon:not(.plugin-blocked)[extraAttr="inactive"] > .plugin-icon {
    fill-opacity: 0.25;
}

#plugins-notification-icon[extraAttr="inactive"] > #plugin-icon-badge {
    opacity: 1;
}

#plugins-notification-icon[extraAttr="inactive"] > #plugin-icon-badge[animate] {
    animation: blink-badge 1000ms ease 0s 5 alternate both;
}

@keyframes blink-badge {
    from {
        opacity: 0;
    }
    to {
        opacity: 1;
    }
}

.plugin-blocked > .plugin-icon {
    list-style-image: url(chrome://userchrome/content/plugin-blocked.svg);
    fill: #d92215 !important;
}

.plugin-blocked > #plugin-icon-badge {
    visibility: collapse;
}

#plugins-notification-icon.plugin-blocked[showing] {
    animation: pluginBlockedNotification 500ms ease 0s 5 alternate both;
}

@keyframes pluginBlockedNotification {
    from {
        opacity: 0;
    }
    to {
        opacity: 1;
    }
}

/* TRANSLATION */

.translation-icon {
    list-style-image: url(chrome://userchrome/content/material/translate.svg);
    -moz-image-region: auto;
}

.translation-icon.in-use {
    -moz-image-region: auto;
}

.translation-icon.in-use:not(:hover, :focus-visible, :active, [open]) {
    fill-opacity: 1;
    fill: var(--toolbarbutton-icon-fill-attention);
}

/* UPDATE */
.popup-notification-icon[popupid="update-available"],
.popup-notification-icon[popupid="update-downloading"],
.popup-notification-icon[popupid="update-manual"],
.popup-notification-icon[popupid="update-other-instance"],
.popup-notification-icon[popupid="update-restart"] {
    background: #74bf43 url(chrome://userchrome/content/notifications/update.svg) no-repeat center;
    border-radius: 50%;
}

.popup-notification-icon[popupid="update-unsupported"] {
    background: #ffe900 url(chrome://userchrome/content/notifications/update.svg) no-repeat center;
    border-radius: 50%;
}

#pageActionButton,
.share-more-button {
    list-style-image: url(chrome://userchrome/content/more.svg);
}

#reader-mode-button > .urlbar-icon {
    list-style-image: url(chrome://userchrome/content/skin/reader-mode.svg);
}

#pageAction-panel-bookmark,
#star-button {
    list-style-image: url(chrome://userchrome/content/skin/bookmark-hollow.svg);
}

#sidebar-switcher-bookmarks,
#pageAction-panel-bookmark[starred],
#star-button[starred] {
    list-style-image: url(chrome://userchrome/content/skin/bookmark.svg);
}

@keyframes bookmark-animation {
    from {
        transform: translateX(0);
    }
    to {
        transform: translateX(-627px);
    }
}

#star-button-box {
    position: relative;
    padding: 0;
}

#star-button {
    width: calc(var(--urlbar-min-height) - 2px - 2 * var(--urlbar-container-padding));
    height: calc(var(--urlbar-min-height) - 2px - 2 * var(--urlbar-container-padding));
    padding: var(--urlbar-icon-padding);
}

/* Preload the bookmark animations to prevent a flicker during the first playing
of the animations. */
#star-button[preloadanimations] + #star-button-animatable-box > #star-button-animatable-image {
    background-image: url(chrome://userchrome/content/skin/bookmark-animation.svg),
        url(chrome://userchrome/content/skin/library-bookmark-animation.svg);
    background-size: 0, 0;
}

#star-button[starred][animate] {
    fill: transparent;
    position: relative;
}

#star-button[starred][animate] + #star-button-animatable-box {
    display: block;
    position: absolute;
    overflow: hidden;
    top: calc(50% - 16.5px); /* 16.5px is half the height of the sprite */
    /* .urlbar-icon has width 28px. Each frame is 33px wide. Set margin-inline-start
    to be half the difference, -2.5px. */
    margin-inline-start: -2.5px;
    width: 33px; /* Width of each frame within the SVG sprite */
    height: 33px; /* Height of each frame within the SVG sprite */
}

:root[uidensity="compact"] #star-button[starred][animate] + #star-button-animatable-box {
    /* .urlbar-icon has width 24px in this case */
    margin-inline-start: -4.5px;
}

:root[uidensity="touch"] #star-button[starred][animate] + #star-button-animatable-box {
    /* .urlbar-icon has width 30px in this case */
    margin-inline-start: -1.5px;
}

#star-button[starred][animate] + #star-button-animatable-box > #star-button-animatable-image {
    background-image: url(chrome://userchrome/content/skin/bookmark-animation.svg);
    background-size: auto;
    list-style-image: none;
    height: var(--toolbarbutton-height);
    min-height: 33px; /* Minimum height must be equal to the height of the SVG sprite */
    animation-name: bookmark-animation;
    animation-fill-mode: forwards;
    animation-iteration-count: 1;
    animation-timing-function: steps(19);
    animation-duration: 317ms;
    width: 660px;
    -moz-context-properties: fill, stroke;
    stroke: var(--toolbarbutton-icon-fill-attention);
}

#star-button[starred][animate]:-moz-locale-dir(rtl)
    + #star-button-animatable-box
    > #star-button-animatable-image {
    scale: -1 1;
}

.protections-popup-category-icon.trackers-icon {
    list-style-image: url(chrome://userchrome/content/skin/controlcenter/tracker-image.svg);
}

.protections-popup-category-icon.socialblock-icon {
    list-style-image: url(chrome://userchrome/content/skin/controlcenter/socialblock.svg);
}

.protections-popup-category-icon.thirdpartycookies-icon {
    list-style-image: url(chrome://userchrome/content/skin/controlcenter/3rdpartycookies.svg);
}

.protections-popup-category-icon.cryptominers-icon {
    list-style-image: url(chrome://userchrome/content/skin/controlcenter/cryptominers.svg);
}

.protections-popup-category-icon.fingerprinters-icon {
    list-style-image: url(chrome://userchrome/content/skin/controlcenter/fingerprinters.svg);
}

.protections-popup-trackersView-icon {
    list-style-image: url(chrome://userchrome/content/skin/controlcenter/tracker-image-disabled.svg);
    width: 16px;
    height: 16px;
}

.protections-popup-trackersView-icon.allowed {
    list-style-image: url(chrome://userchrome/content/skin/controlcenter/tracker-image.svg);
}

.protections-popup-socialblockView-icon {
    list-style-image: url(chrome://userchrome/content/skin/controlcenter/socialblock-disabled.svg);
}

.protections-popup-socialblockView-icon.allowed {
    list-style-image: url(chrome://userchrome/content/skin/controlcenter/socialblock.svg);
}

.protections-popup-cookiesView-icon {
    list-style-image: url(chrome://userchrome/content/skin/controlcenter/3rdpartycookies-disabled.svg);
}

.protections-popup-cookiesView-icon.allowed {
    list-style-image: url(chrome://userchrome/content/skin/controlcenter/3rdpartycookies.svg);
}

.protections-popup-fingerprintersView-icon {
    list-style-image: url(chrome://userchrome/content/skin/controlcenter/fingerprinters-disabled.svg);
}

.protections-popup-fingerprintersView-icon.allowed {
    list-style-image: url(chrome://userchrome/content/skin/controlcenter/fingerprinters.svg);
}

.protections-popup-cryptominersView-icon {
    list-style-image: url(chrome://userchrome/content/skin/controlcenter/cryptominers-disabled.svg);
}

.protections-popup-cryptominersView-icon.allowed {
    list-style-image: url(chrome://userchrome/content/skin/controlcenter/cryptominers.svg);
}

/* ctrl tab */
#ctrlTab-panel::part(content) {
    -moz-box-orient: vertical;
    -moz-box-pack: center;
    color: inherit;
    padding: 30px 30px 20px 30px;
}

/* confirmation hint */
@keyframes confirmation-hint-checkmark-animation {
    from {
        transform: translateX(0);
    }
    to {
        transform: translateX(-252px);
    }
}

@keyframes confirmation-hint-checkmark-animation-rtl {
    from {
        transform: translateX(252px);
    }
    to {
        transform: translateX(0);
    }
}

#confirmation-hint-checkmark-animation-container[animate] > #confirmation-hint-checkmark-image {
    -moz-context-properties: fill;
    background-image: url(chrome://userchrome/content/skin/success-animation.svg);
    display: block;
    position: absolute;
    background-repeat: no-repeat;
    min-width: 266px;
    max-width: 266px;
    min-height: 14px;
    max-height: 14px;
    animation-name: confirmation-hint-checkmark-animation;
    animation-fill-mode: forwards;
    animation-timing-function: steps(18);
}

#confirmation-hint-checkmark-animation-container[animate] > #confirmation-hint-checkmark-image:-moz-locale-dir(rtl) {
    animation-name: confirmation-hint-checkmark-animation-rtl;
    transform: translateX(252px);
}

#confirmation-hint-message {
    margin-inline: 7px 0;
}

#confirmation-hint.with-description #confirmation-hint-message {
    font-size: 1.2em;
    font-weight: 600;
}

@media (prefers-reduced-motion: no-preference) {
    #confirmation-hint-checkmark-animation-container[animate] > #confirmation-hint-checkmark-image {
        animation-duration: 300ms;
        animation-delay: 0ms;
    }

    #confirmation-hint-message-container {
        transform: scale(.8);
        opacity: 0;
        transition: transform 120ms cubic-bezier(.25,1.27,.35,1.18),
            opacity 60ms linear;
    }

    #confirmation-hint-checkmark-animation-container[animate] + #confirmation-hint-message-container {
        transform: scale(1);
        opacity: 1;
    }
}
