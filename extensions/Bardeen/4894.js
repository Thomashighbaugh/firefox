/*! For license information please see 4894.js.LICENSE.txt */
"use strict";(self.webpackChunkbardeen_browser_extension=self.webpackChunkbardeen_browser_extension||[]).push([[4894,8796,1814,7618],{10161:e=>{var t=Object.prototype.hasOwnProperty,n="~";function r(){}function o(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function s(e,t,r,s,a){if("function"!=typeof r)throw new TypeError("The listener must be a function");var i=new o(r,s||e,a),c=n?n+t:t;return e._events[c]?e._events[c].fn?e._events[c]=[e._events[c],i]:e._events[c].push(i):(e._events[c]=i,e._eventsCount++),e}function a(e,t){0==--e._eventsCount?e._events=new r:delete e._events[t]}function i(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),i.prototype.eventNames=function(){var e,r,o=[];if(0===this._eventsCount)return o;for(r in e=this._events)t.call(e,r)&&o.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?o.concat(Object.getOwnPropertySymbols(e)):o},i.prototype.listeners=function(e){var t=n?n+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var o=0,s=r.length,a=new Array(s);o<s;o++)a[o]=r[o].fn;return a},i.prototype.listenerCount=function(e){var t=n?n+e:e,r=this._events[t];return r?r.fn?1:r.length:0},i.prototype.emit=function(e,t,r,o,s,a){var i=n?n+e:e;if(!this._events[i])return!1;var c,u,h=this._events[i],p=arguments.length;if(h.fn){switch(h.once&&this.removeListener(e,h.fn,void 0,!0),p){case 1:return h.fn.call(h.context),!0;case 2:return h.fn.call(h.context,t),!0;case 3:return h.fn.call(h.context,t,r),!0;case 4:return h.fn.call(h.context,t,r,o),!0;case 5:return h.fn.call(h.context,t,r,o,s),!0;case 6:return h.fn.call(h.context,t,r,o,s,a),!0}for(u=1,c=new Array(p-1);u<p;u++)c[u-1]=arguments[u];h.fn.apply(h.context,c)}else{var l,d=h.length;for(u=0;u<d;u++)switch(h[u].once&&this.removeListener(e,h[u].fn,void 0,!0),p){case 1:h[u].fn.call(h[u].context);break;case 2:h[u].fn.call(h[u].context,t);break;case 3:h[u].fn.call(h[u].context,t,r);break;case 4:h[u].fn.call(h[u].context,t,r,o);break;default:if(!c)for(l=1,c=new Array(p-1);l<p;l++)c[l-1]=arguments[l];h[u].fn.apply(h[u].context,c)}}return!0},i.prototype.on=function(e,t,n){return s(this,e,t,n,!1)},i.prototype.once=function(e,t,n){return s(this,e,t,n,!0)},i.prototype.removeListener=function(e,t,r,o){var s=n?n+e:e;if(!this._events[s])return this;if(!t)return a(this,s),this;var i=this._events[s];if(i.fn)i.fn!==t||o&&!i.once||r&&i.context!==r||a(this,s);else{for(var c=0,u=[],h=i.length;c<h;c++)(i[c].fn!==t||o&&!i[c].once||r&&i[c].context!==r)&&u.push(i[c]);u.length?this._events[s]=1===u.length?u[0]:u:a(this,s)}return this},i.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&a(this,t)):(this._events=new r,this._eventsCount=0),this},i.prototype.off=i.prototype.removeListener,i.prototype.addListener=i.prototype.on,i.prefixed=n,i.EventEmitter=i,e.exports=i},2784:(e,t,n)=>{e.exports=n(83426)},74410:(e,t,n)=>{n.d(t,{RRule:()=>r.ZP,default:()=>o});var r=n(11996);n(85554),n(39990),n(8868),n(8622);const o=r.ZP},78990:(e,t,n)=>{n.d(t,{p:()=>r});const r=(0,n(63659).n)({clientErrorCode:"AssertionError",message:"Assertion failed.",userHint:void 0,trackError:"default",arguments:[]})},81072:(e,t,n)=>{n.d(t,{O:()=>r});const r=(0,n(63659).n)({clientErrorCode:"BackendDisconnectedError",message:"The API endpoint is disconnected from the backend.",userHint:"API endpoint is disconnected from the back-end, please reload and try again.",trackError:!1,arguments:[]})},1975:(e,t,n)=>{n.d(t,{s:()=>s});var r=n(63659),o=n(31429);const s=(0,r.n)({clientErrorCode:"RetryableError",message:"Let's try that again.",userHint:"{{{message}}} This should work eventually, please try again.",trackError:!1,arguments:[{name:"message",type:String,struct:o.f.Scalar}]})},50881:(e,t,n)=>{n.d(t,{ps:()=>r.p,Ow:()=>o.O,lI:()=>s.l,N0:()=>a.N,ao:()=>i.a,GF:()=>c.G,zk:()=>u.z,dR:()=>h.d,nj:()=>p.n,sj:()=>l.s,SJ:()=>d.S,s0:()=>f.s,s1:()=>m.s});var r=n(78990),o=(n(69771),n(99363),n(96503),n(2249),n(79268),n(5432),n(88189),n(62577),n(81072)),s=(n(89097),n(58306),n(93616)),a=n(24321),i=(n(59818),n(53762),n(90935),n(68849),n(96876)),c=(n(29395),n(5215)),u=n(84031),h=(n(96572),n(29475),n(73612)),p=n(27462),l=(n(29100),n(25667)),d=(n(40150),n(16405)),f=(n(64548),n(39901),n(38407)),m=n(1975);n(42736),n(42510),n(94502),n(54348),n(21586)},68796:(e,t,n)=>{n.d(t,{DataStructType:()=>r.iH,IDObject:()=>r.bZ,DefineError:()=>o.n0,GenericError:()=>o.pY,isBardeenError:()=>o.Je,serializeBardeenError:()=>o.QJ,AssertionError:()=>s.ps,BackendDisconnectedError:()=>s.Ow,MarketingConsentUpdateError:()=>s.ao,NotFoundError:()=>s.dR,PluginMissingError:()=>s.sj,RetryableError:()=>s.s1,PlaybookCategoryInfo:()=>a.AY,AuthFlowAbortedError:()=>i.GL,AuthResumeError:()=>i.g5,CommandActionVerbsList:()=>i.Xp,CommandInput:()=>i.sZ,SystemPromptFieldType:()=>i.a1,getCommandTokenMetaType:()=>i.ne,ScraperOperationTypes:()=>c.ko,ColorNames:()=>u.tb,SuggestionGroup:()=>u.Wm,UIGlobals:()=>u.QV,getPlaybookColorPair:()=>u.kj,assertUnreachable:()=>h.UT,dateFormatter:()=>h.vh,isArrayOf:()=>h.bf,makeChildStyles:()=>h.ve,timeSavedFormatted:()=>h.Sb,unknownToString:()=>h.wp,webpackEvalImportFn:()=>h.KZ});var r=n(4614),o=(n(29882),n(83963)),s=n(50881),a=(n(17412),n(85562)),i=(n(37656),n(16744),n(58686)),c=(n(15047),n(2872),n(8680)),u=(n(6871),n(26068)),h=n(10313)},17618:(e,t,n)=>{n.r(t),n.d(t,{createAPIClient:()=>p});var r=n(72565),o=n.n(r),s=n(10161),a=n(68796),i=n(88767);function c(e,t={}){return o().runtime.sendMessage({call:e,data:t}).then((t=>t.error?(a.RetryableError.is(t.error)||console.error("RPC invoke of",e,"returned error:",t.value),Promise.reject(t.value)):t.value)).catch((t=>(a.RetryableError.is(t)||console.error("RPC invoke of",e,"failed:",t),Promise.reject(t))))}class u extends s.EventEmitter{constructor(){super(),this.connected=!1,this.handleDisconnect=()=>{const e=Promise.reject(a.BackendDisconnectedError.from({}));this.connected=!1,this.pendingRpc.forEach(((t,n)=>{t(e)})),this.pendingRpc.clear()},this.handleMessage=(e,t)=>{switch(e.type){case"event":this.emit(e.name,...e.args||[]);break;case"response":{const t=this.pendingRpc.get(e.id);t&&(this.pendingRpc.delete(e.id),t(e.result));break}case"error":{const t=this.pendingRpc.get(e.id);t&&(this.pendingRpc.delete(e.id),t(Promise.reject(e.result)));break}}},this.rpc=(e,t)=>{if(!this.connected)return Promise.reject(new TypeError("The runtime is disconnected"));const n=(0,i.Z)();return new Promise(((r,o)=>{const s={id:n,name:e,type:"call",args:t};try{this.port.postMessage(s),this.pendingRpc.set(n,r)}catch(e){o(e)}}))},this.pendingRpc=new Map}connect(){return e=this,t=void 0,r=function*(){const e=yield o().runtime.connect(void 0,{name:"bardeen.api"});e.onDisconnect.addListener(this.handleDisconnect),e.onMessage.addListener(this.handleMessage),this.port=e,this.connected=!0},new((n=void 0)||(n=Promise))((function(o,s){function a(e){try{c(r.next(e))}catch(e){s(e)}}function i(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,i)}c((r=r.apply(e,t||[])).next())}));var e,t,n,r}}class h{constructor(e){this.base=e}openSettings(e){const t=o().runtime.getURL("settings.html");window.open(e?t+`#/${e}`:t)}openErrors(){const e=o().runtime.getURL("settings.html");window.open(e+"#/errors")}openPlaybooks(e){const t=o().runtime.getURL("settings.html");window.open(t+"#/playbooks-catalog/?playbook="+e)}dedangle(e,t){("then"in e?e:e()).then((()=>{})).catch((e=>{console.error(e);const n=(0,a.isBardeenError)(e)?e:a.AssertionError.from({originalError:e});this.base.rpc("exceptionRegister",[{message:n.message,details:n,recoverable:!1,source:Object.assign({},t),date:Date.now()}])}))}authGetStatus(){return c("auth.rpc",{method:"authGetStatus",args:[]})}authFocusActive(){return c("auth.rpc",{method:"authFocusActive",args:[]})}promptSubmit(e){return c("auth.prompt.response",{method:"promptSubmit",args:e})}promptCancel(){return c("auth.prompt.cancel",{method:"promptCancel",args:[]})}authCancel(){return c("auth.rpc",{method:"authCancel",args:[]})}authContinue(){return c("auth.rpc",{method:"authContinue",args:[]})}authContinueOne(e){return c("auth.rpc",{method:"authContinueOne",args:[e]})}authDismissUI(){return c("auth.rpc",{method:"authDismissUI",args:[]})}}function p(){const e=new u,t=new h(e),n=e.connect();return new Proxy(e,{get:(r,o)=>o in t?t[o]:o in e?e[o]:(...t)=>n.then((()=>e.rpc(o,t)))})}}}]);