/* handles system pages and injects some important global variables into extension pages */

@-moz-document regexp("view-source:.*") {
  @media (prefers-color-scheme: dark) {
    ::selection {
      color: var(--uc-light-color) !important; /* Closest approximation */
      background-color: var(
        --uc-accent-i
      ) !important; /* Closest approximation */
    }

    /* TODO replace these with theme variables defined in the configuration for consistency */
    .highlight :is(.start-tag, .end-tag)::selection {
      color: #801f1f !important;
    }

    .highlight .comment::selection {
      color: #235c23 !important;
    }

    .highlight .cdata::selection {
      color: #77254e !important;
    }

    .highlight :is(.doctype, .markupdeclaration)::selection {
      color: #555 !important;
    }

    .highlight .entity::selection {
      color: #884026 !important;
    }

    .highlight .attribute-value::selection {
      color: #233d6d !important;
    }

    .highlight .pi::selection {
      color: #6b228f !important;
    }

    .highlight .error::selection {
      text-decoration-color: #801f1f !important;
    }
  }
}

@-moz-document regexp("^(about:|chrome:|moz-extension:).*") {
  :root {
    --checkbox-checked-bgcolor: var(
      --uc-accent-i
    ) !important; /* Closest approximation */
    --checkbox-checked-color: var(
      --uc-text
    ) !important; /* Closest approximation */
    --checkbox-checked-hover-bgcolor: var(
      --uc-accent-i
    ) !important; /* Closest approximation - Consider a slightly darker shade */
    --checkbox-checked-active-bgcolor: var(
      --uc-accent-i
    ) !important; /* Closest approximation - Consider a darker shade */
  }

  html:not([role="dialog"]),
  html:not([role="dialog"]) *,
  html:not([role="dialog"]) body.activity-stream,
  window:not([chromehidden]),
  window:not([chromehidden]) > dialog,
  #downloadsListBox richlistitem,
  info-item,
  info-group,
  certificate-section {
    --in-content-page-background: var(
      --uc-background-main
    ) !important; /* Closest approximation */
    --in-content-page-color: var(
      --uc-text
    ) !important; /* Closest approximation */
    --in-content-text-color: var(
      --uc-text
    ) !important; /* Closest approximation */
    --in-content-accent-color: var(
      --uc-accent-v
    ) !important; /* Closest approximation */
    --in-content-border-color: var(
      --uc-panel-border
    ) !important; /* Closest approximation */
    --in-content-border-hover: var(
      --uc-panel-border
    ) !important; /* Closest approximation - Consider a darker shade */
    --in-content-border-active: var(
      --uc-panel-border
    ) !important; /* Closest approximation - Consider a darker shade */
    --in-content-box-background: var(
      --uc-background-main
    ) !important; /* Closest approximation */
    --in-content-box-background-odd: var(
      --uc-background-layered
    ) !important; /* Closest approximation */
    --in-content-box-background-dim: var(
      --uc-background-layered
    ) !important; /* Closest approximation */
    --in-content-box-border-color: var(
      --uc-panel-border
    ) !important; /* Closest approximation */
    --in-content-box-info-background: var(
      --uc-button-selected
    ) !important; /* Closest approximation */
    --in-content-table-background: var(
      --uc-background-main
    ) !important; /* Closest approximation */
    --in-content-table-header-background: var(
      --uc-accent-v
    ) !important; /* Closest approximation */
    --in-content-link-color: var(
      --uc-accent-ii
    ) !important; /* Closest approximation */
    --in-content-link-color-hover: var(
      --uc-accent-ii
    ) !important; /* Closest approximation - Consider a slightly darker shade */
    --in-content-link-color-active: var(
      --uc-accent-i
    ) !important; /* Closest approximation */
    --in-content-link-visited-color: var(
      --uc-accent-v
    ) !important; /* Closest approximation */
    --in-content-link-visited-color-hover: var(
      --uc-accent-v
    ) !important; /* Closest approximation - Consider a slightly darker shade */
    --in-content-link-visited-color-active: var(
      --uc-accent-i
    ) !important; /* Closest approximation */
    --link-color: var(--uc-accent-ii) !important; /* Closest approximation */
    --link-color-hover: var(
      --uc-accent-ii
    ) !important; /* Closest approximation - Consider a slightly darker shade */
    --link-color-active: var(
      --uc-accent-i
    ) !important; /* Closest approximation */
    --link-visited-color: var(
      --uc-accent-v
    ) !important; /* Closest approximation */
    --link-visited-color-hover: var(
      --uc-accent-v
    ) !important; /* Closest approximation - Consider a slightly darker shade */
    --link-visited-color-active: var(
      --uc-accent-i
    ) !important; /* Closest approximation */
    --button-background: var(
      --uc-background-main
    ) !important; /* Closest approximation */
    --button-background-hover: var(
      --uc-button-selected
    ) !important; /* Closest approximation */
    --button-background-active: var(
      --uc-button-selected
    ) !important; /* Closest approximation - Consider a darker shade */
    --button-background-solid: var(
      --uc-button-selected
    ) !important; /* Closest approximation */
    --in-content-button-background: var(
      --uc-background-main
    ) !important; /* Closest approximation */
    --in-content-button-background-hover: var(
      --uc-button-selected
    ) !important; /* Closest approximation */
    --in-content-button-background-active: var(
      --uc-button-selected
    ) !important; /* Closest approximation - Consider a darker shade */
    --in-content-button-background-solid: var(
      --uc-button-selected
    ) !important; /* Closest approximation */
    --in-content-button-text-color-hover: var(
      --uc-light-color
    ) !important; /* Closest approximation */
    --in-content-button-text-color-active: var(
      --uc-light-color
    ) !important; /* Closest approximation */
    --in-content-primary-button-background: var(
      --uc-accent-v
    ) !important; /* Closest approximation */
    --in-content-primary-button-background-hover: var(
      --uc-accent-v
    ) !important; /* Closest approximation - Consider a slightly darker shade */
    --in-content-primary-button-background-active: var(
      --uc-accent-i
    ) !important; /* Closest approximation */
    --in-content-primary-button-text-color: var(
      --uc-light-color
    ) !important; /* Closest approximation */
    --in-content-primary-button-text-color-hover: var(
      --uc-light-color
    ) !important; /* Closest approximation */
    --color-accent-primary: var(
      --uc-accent-v
    ) !important; /* Closest approximation */
    --color-accent-primary-hover: var(
      --uc-accent-v
    ) !important; /* Closest approximation - Consider a slightly darker shade */
    --color-accent-primary-active: var(
      --uc-accent-i
    ) !important; /* Closest approximation */
    --in-content-button-border-radius: var(
      --uc-button-border-radius
    ) !important; /* Closest approximation */
    --in-content-item-selected: var(
      --uc-accent-v
    ) !important; /* Closest approximation */
    --in-content-item-hover: color-mix(
      in srgb,
      var(--uc-accent-i) 45%,
      transparent
    ) !important; /* Closest approximation */
    --in-content-item-hover-text: var(--in-content-text-color) !important;
    --focus-outline-color: var(
      --uc-accent-ii
    ) !important; /* Closest approximation */
    --focus-outline-offset: 2px !important;
    --default-focusring: var(--global-focus-outline-width) solid
      var(--uc-accent-ii) !important; /* Closest approximation */
    --newtab-background-color: var(
      --uc-background-main
    ) !important; /* Closest approximation */
    --newtab-text-primary-color: var(
      --uc-text
    ) !important; /* Closest approximation */
    --lwt-sidebar-background-color: var(
      --uc-background-main
    ) !important; /* Closest approximation */
    --lwt-sidebar-text-color: var(
      --uc-text
    ) !important; /* Closest approximation */
    --newtab-search-header-background-color: color-mix(
      in srgb,
      var(--uc-background-main) 70%,
      transparent
    ) !important; /* Closest approximation */
    --newtab-search-header-background-intermediate: color-mix(
      in srgb,
      var(--uc-background-main) 80%,
      transparent
    ) !important; /* Closest approximation */
    --newtab-seperator-line-color: var(
      --uc-button-selected
    ) !important; /* Closest approximation */
    --newtab-modal-color: var(
      --uc-background-main
    ) !important; /* Closest approximation */
    --newtab-focus-outline: var(
      --uc-accent-v
    ) !important; /* Closest approximation */
    --newtab-focus-border: var(
      --uc-accent-v
    ) !important; /* Closest approximation */
    --newtab-focus-border-selected: var(
      --uc-accent-i
    ) !important; /* Closest approximation */
    --newtab-textbox-background-color: var(
      --uc-background-main
    ) !important; /* Closest approximation */
    --newtab-textbox-focus-color: var(
      --uc-accent-v
    ) !important; /* Closest approximation */
    --newtab-primary-action-background: var(
      --uc-accent-v
    ) !important; /* Closest approximation - Consider a slightly darker shade */
    --newtab-primary-action-background-hover: color-mix(
      in srgb,
      var(--uc-accent-i) 60%,
      var(--newtab-primary-action-background)
    ) !important; /* Closest approximation */
    --newtab-primary-action-background-active: color-mix(
      in srgb,
      var(--uc-accent-ii) 60%,
      var(--newtab-primary-action-background)
    ) !important; /* Closest approximation */
    --newtab-primary-element-text-color: var(
      --uc-text
    ) !important; /* Closest approximation */
    --newtab-element-secondary-color: var(
      --uc-button-selected
    ) !important; /* Closest approximation */
    --newtab-element-secondary-color-hover: color-mix(
      in srgb,
      var(--uc-fg3) 50%,
      var(--uc-button-selected)
    ) !important; /* Closest approximation */
    --newtab-element-secondary-color-active: color-mix(
      in srgb,
      var(--uc-fg3) 50%,
      var(--uc-button-selected)
    ) !important; /* Closest approximation */
    --newtab-button-primary-color: var(
      --uc-accent-v
    ) !important; /* Closest approximation - Consider a slightly darker shade */
    --newtab-border-primary-color: var(
      --uc-accent-i
    ) !important; /* Closest approximation */
    --newtab-background-color-secondary: var(
      --uc-button-selected
    ) !important; /* Closest approximation */
    --newtab-card-active-outline-color: var(
      --uc-background-main
    ) !important; /* Closest approximation */
    --newtab-link-primary-color: var(
      --uc-accent-i
    ) !important; /* Closest approximation */
    --newtab-link-secondary-color: var(
      --uc-accent-ii
    ) !important; /* Closest approximation */
    --newtab-topsites-background-color: var(
      --uc-background-main
    ) !important; /* Closest approximation */
    --customize-menu-background: var(
      --uc-background-main
    ) !important; /* Closest approximation */
    --customize-menu-secondary-action-background: var(
      --uc-background-main
    ) !important; /* Closest approximation */
    --customize-menu-secondary-action-background-hover: var(
      --uc-button-selected
    ) !important; /* Closest approximation */
    --customize-menu-secondary-action-background-active: var(
      --uc-button-selected
    ) !important; /* Closest approximation - Consider a darker shade */
    --customize-menu-first-shadow: hsla(250, 3%, 2%, 0.2) !important;
    --customize-menu-second-shadow: hsla(250, 3%, 2%, 0.4) !important;
    --newtab-contextmenu-background-color: var(
      --uc-background-main
    ) !important; /* Closest approximation */
    --newtab-contextmenu-button-color: var(
      --uc-background-main
    ) !important; /* Closest approximation */
    --newtab-card-background-color: var(
      --uc-background-main
    ) !important; /* Closest approximation */
    --newtab-card-placeholder-color: var(
      --uc-background-main
    ) !important; /* Closest approximation */
    --newtab-search-text-color: var(
      --uc-fg3
    ) !important; /* Closest approximation */
    --newtab-search-first-shadow: rgba(21, 20, 26, 0.5);
    --newtab-search-second-shadow: rgba(21, 20, 26, 0.75);
  }

  html:not([role="dialog"]) richlistitem[selected] * {
    --in-content-button-background: var(
      --uc-accent-v
    ) !important; /* Closest approximation */
    --in-content-button-background-hover: var(
      --uc-accent-v
    ) !important; /* Closest approximation - Consider a slightly darker shade */
    --in-content-button-background-active: var(
      --uc-accent-i
    ) !important; /* Closest approximation */
    --in-content-button-text-color: var(
      --uc-light-color
    ) !important; /* Closest approximation */
    --in-content-button-text-color-hover: var(
      --uc-light-color
    ) !important; /* Closest approximation */
    --in-content-button-text-color-active: var(
      --uc-light-color
    ) !important; /* Closest approximation */
    --in-content-focus-outline-color: var(
      --uc-light-color
    ) !important; /* Closest approximation */
  }

  html:not([role="dialog"]) richlistitem menulist {
    border-radius: 0 !important;
    outline-offset: var(--focus-outline-offset, 2px) !important;
    outline: none !important;
  }

  window:not([chromehidden])
    > dialog
    richlistbox[seltype="multiple"]:focus
    > richlistitem[current="true"],
  window:not([chromehidden])
    > dialog
    richlistbox.theme-listbox:focus
    > richlistitem[current="true"] {
    outline: none !important;
  }

  body:not(.inline-onboarding) .fixed-search .search-wrapper {
    /* temporarily disabled due to backdrop-filter being disabled. see https://bugzilla.mozilla.org/show_bug.cgi?id=1741779 */

    /* background-image: linear-gradient(
      180deg,
      var(--in-content-page-background) 0%,
      var(--newtab-search-header-background-intermediate) 50%,
      var(--newtab-search-header-background-color) 100%
    ) !important;
    background-color: transparent !important;
    backdrop-filter: blur(12px); */

    background-image: linear-gradient(
      180deg,
      var(--in-content-page-background) 0%,
      color-mix(
          in srgb,
          var(--uc-background-main) 80%,
          var(--in-content-page-background)
        )
        50%,
      color-mix(
          in srgb,
          var(--uc-background-main) 70%,
          var(--in-content-page-background)
        )
        100%
    ) !important; /* Closest approximation */
    background-color: transparent !important;
  }

  body:not(.inline-onboarding)
    .fixed-search.newtab-experience
    .search-handoff-button {
    background-color: var(
      --uc-button-selected
    ) !important; /* Closest approximation */
  }

  .top-site-outer .top-site-icon {
    background-color: transparent !important;
  }

  .topsite-form .form-wrapper input[type="text"]:focus-visible {
    outline: none !important;
    border-color: var(--newtab-focus-border) !important;
  }

  [lwt-newtab-brighttext]
    .ds-card-grid.ds-card-grid-border
    .ds-card:not(.placeholder) {
    background: var(
      --uc-background-main
    ) !important; /* Closest approximation */
  }

  [lwt-newtab-brighttext] .ds-card .ds-card-link:hover header {
    color: var(--uc-accent-i) !important; /* Closest approximation */
  }

  radio[focused="true"] > .radio-label-box {
    outline: none !important;
  }

  #category-experimental > .category-icon {
    list-style-image: url("icons/test-tube-45-large.svg") !important;
  }

  .top-site-outer {
    border-radius: 6px !important;
  }

  .search-handoff-button,
  .top-site-outer .tile {
    border-radius: 4px !important;
  }

  .showPrivate .search-handoff-button {
    background-color: var(--newtab-textbox-background-color) !important;
    box-shadow:
      0 3px 8px var(--newtab-search-first-shadow),
      0 0 2px var(--newtab-search-second-shadow) !important;
    border: 1px solid transparent !important;
    color: var(--newtab-search-text-color) !important;
  }

  .showPrivate .search-handoff-button.focused {
    outline: 0;
    border: 1px solid var(--newtab-focus-border) !important;
    box-shadow: 0 0 0 2px var(--newtab-focus-outline) !important;
  }

  .showPrivate .fake-textbox {
    color: inherit !important;
  }

  .showPrivate .fake-caret {
    width: 0.6px !important;
    background: var(--newtab-search-text-color) !important;
  }

  .showPrivate .info {
    background-image: url("icons/privateBrowsing.svg") !important;
    -moz-context-properties: fill, fill-opacity;
    fill: hsl(235, 100%, 71%);
  }

  .search-tooltip {
    color: var(--uc-light-color) !important; /* Closest approximation */
    background-color: var(--uc-accent-i) !important; /* Closest approximation */
    border-color: color-mix(
      in srgb,
      black 18%,
      var(--uc-accent-i)
    ) !important; /* Closest approximation */
  }

  .search-tooltip::before {
    border-top-color: color-mix(
      in srgb,
      black 18%,
      var(--uc-accent-i)
    ) !important; /* Closest approximation */
  }

  .search-tooltip::after {
    border-top-color: var(--uc-accent-i) !important; /* Closest approximation */
  }

  #errorPageContainer .button-container button {
    border-color: var(--uc-panel-border) !important; /* Closest approximation */
  }

  #errorPageContainer .button-container button.primary {
    border-color: var(--uc-accent-i) !important; /* Closest approximation */
  }

  .certerror #badCertAdvancedPanel {
    border-radius: var(
      --uc-button-border-radius,
      5px
    ) !important; /* Closest approximation */
  }

  .long-hex {
    border-block: 1px solid transparent;
    padding-block: 0 !important;
  }

  link[rel="stylesheet"] {
    &[href="chrome://global/content/elements/message-bar.css"],
    &[href="chrome://global/content/elements/moz-message-bar.css"]
    {
      ~ .container {
        padding: 8px !important;
        border-radius: 0 !important;
        flex-grow: 1;

        .content {
          display: flex !important;
          margin-inline: 8px 0 !important;
          gap: 4px 12px !important;
          justify-content: space-between !important;

          + .spacer:last-child {
            display: none;
          }

          .icon-container {
            margin-inline-start: 0 !important;
          }
        }
      }
    }
  }

  message-bar,
  moz-message-bar {
    &:not([hidden]) {
      display: flex !important;
      flex-flow: row nowrap !important;
      margin-top: 15px !important;
      overflow: hidden;
      margin-inline: -15.5px !important;
      border: 0 !important;
    }

    > span {
      white-space: break-spaces !important;
      flex-shrink: 1;
      flex-grow: 1;
      overflow: hidden;
      overflow-wrap: break-word !important;
      text-overflow: ellipsis !important;
    }

    > button {
      display: inline-block !important;
      flex-shrink: 0;
      margin: 0 !important;
      cursor: pointer;
    }

    &[type="warning"]:not([message-bar-type="infobar"]) {
      --message-bar-background-color: var(
        --uc-accent-vi
      ) !important; /* Closest approximation */
      --message-bar-text-color: var(
        --uc-text
      ) !important; /* Closest approximation */
    }

    &:is([type="system"], [type="info"], [type="generic"]) {
      --message-bar-background-color: var(
        --uc-bg3
      ) !important; /* Closest approximation */
      --message-bar-text-color: var(
        --uc-text
      ) !important; /* Closest approximation */
    }

    &[type="error"]:not([message-bar-type="infobar"]) {
      --message-bar-background-color: color-mix(
        in srgb,
        transparent 15%,
        var(--uc-accent-vi)
      ) !important; /* Closest approximation */
      --message-bar-text-color: var(
        --uc-text
      ) !important; /* Closest approximation */
    }

    &[type="critical"]:not([message-bar-type="infobar"]) {
      --message-bar-background-color: color-mix(
        in srgb,
        hsla(-2, 100%, 60%, 0.5) 45%,
        var(--uc-accent-vi)
      ) !important; /* Closest approximation */
      --message-bar-text-color: var(
        --uc-text
      ) !important; /* Closest approximation */
    }

    &[type="success"]:not([message-bar-type="infobar"]) {
      --message-bar-background-color: color-mix(
        in srgb,
        transparent 75%,
        var(--uc-accent-i)
      ) !important; /* Closest approximation */
      --message-bar-text-color: var(
        --uc-text
      ) !important; /* Closest approximation */
    }
  }

  @-moz-document regexp("^(about:|chrome:|moz-extension:).*") {
    mark {
      background-color: var(
        --uc-accent-v
      ) !important; /* Closest approximation */
      color: var(--uc-light-color) !important; /* Closest approximation */
    }
  }

  @-moz-document url-prefix("about:addons") {
    .addon-badge {
      border: 1px solid transparent !important;
      width: 22px !important;
      height: 22px !important;
      border-radius: 11px !important;
    }

    .addon-badge-private-browsing-allowed {
      background-color: var(
        --uc-accent-v
      ) !important; /* Closest approximation */
      border-color: var(--uc-accent-i) !important; /* Closest approximation */
      background-position: center !important;
      background-size: 15px !important;
    }

    .addon-badge-recommended {
      background-color: hsl(40, 100%, 43%) !important;
      border-color: hsl(40, 70%, 70%) !important;
    }

    .addon-badge-line {
      background-size: 17px !important;
    }
  }

  .home-section .section .selector {
    background-color: var(--newtab-element-secondary-color) !important;
    border-color: transparent !important;
    background-size: 12px !important;
    padding-inline: 10px 12px !important;
  }

  .home-section
    .section
    :is(.sponsored-checkbox, .slider, .selector):is(:hover, :focus-visible) {
    background-color: var(--newtab-element-secondary-color-hover) !important;
  }

  .home-section .section :is(.sponsored-checkbox, .slider, .selector):active {
    background-color: var(--newtab-element-secondary-color-active) !important;
  }

  .home-section .section .sponsored-checkbox:checked:is(:hover, :focus-visible),
  .home-section .section input:checked + .slider:is(:hover, :focus-visible) {
    background-color: var(--newtab-primary-action-background-hover) !important;
  }

  .home-section .section .sponsored-checkbox:checked:active,
  .home-section .section input:checked + .slider:active {
    background-color: var(--newtab-primary-action-background-active) !important;
  }

  .info-box-container > :is(.sync-engines-list, label) {
    padding-inline: 4px;
  }

  listheader {
    padding-bottom: revert !important;
  }

  treechildren::-moz-tree-row(current, focus) {
    outline: revert !important;
    outline-offset: revert !important;
  }

  :is(listheader, treecols) > treecol {
    box-shadow: none !important;
  }

  #engineList treechildren::-moz-tree-image {
    fill: currentColor !important;
  }

  #handlersView {
    word-wrap: anywhere;
  }

  .onboardingContainer.featureCallout
    .screen[pos="callout"]
    .section-main
    .main-content,
  .onboardingContainer.featureCallout.callout-arrow::before {
    background-color: var(
      --uc-button-selected
    ) !important; /* Closest approximation */
    border-color: var(--fxview-contrast-border) !important;
  }

  .toggle-button:not([aria-pressed="true"])::before {
    background-color: currentColor !important;
  }

  .toggle-button[aria-pressed="true"]::before {
    background-color: var(
      --uc-light-color
    ) !important; /* Closest approximation */
    outline-color: var(--uc-light-color) !important; /* Closest approximation */
  }

  @-moz-document regexp("^about:blocked.*") {
    html:root,
    html:root * {
      --in-content-button-background: transparent !important;
      --in-content-button-background-hover: #5a0002 !important;
      --in-content-button-background-active: #3e0200 !important;
      --in-content-button-border-color: var(
        --uc-light-color
      ) !important; /* Closest approximation */
      --in-content-primary-button-background: var(
        --uc-light-color
      ) !important; /* Closest approximation */
      --in-content-primary-button-background-hover: var(
        --uc-light-color
      ) !important; /* Closest approximation */
      --in-content-primary-button-background-active: var(
        --uc-light-color
      ) !important; /* Closest approximation */
      --in-content-primary-button-text-color: #000 !important;
      --in-content-link-color: var(
        --in-content-primary-button-background
      ) !important;
      --in-content-link-color-hover: var(
        --in-content-primary-button-background-hover
      ) !important;
      --in-content-link-color-active: var(
        --in-content-primary-button-background-active
      ) !important;
      --in-content-link-visited-color: var(
        --uc-fg3
      ) !important; /* Closest approximation */
      --in-content-link-visited-color-hover: var(
        --uc-fg2
      ) !important; /* Closest approximation */
      --in-content-link-visited-color-active: var(
        --uc-fg2
      ) !important; /* Closest approximation */
      --link-color: var(--in-content-primary-button-background) !important;
      --link-color-hover: var(
        --in-content-primary-button-background-hover
      ) !important;
      --link-color-active: var(
        --in-content-primary-button-background-active
      ) !important;
      --link-visited-color: var(
        --uc-fg3
      ) !important; /* Closest approximation */
      --link-visited-color-hover: var(
        --uc-fg2
      ) !important; /* Closest approximation */
      --link-visited-color-active: var(
        --uc-fg2
      ) !important; /* Closest approximation */
    }

    body {
      background: var(--uc-accent-vi) !important; /* Closest approximation */
    }

    #errorPageContainer .title {
      min-height: 1.6em !important;
    }

    #errorPageContainer .title-text {
      padding-block: 0.2em !important;
    }

    #errorPageContainer .button-container button {
      border-color: var(--uc-fg3) !important; /* Closest approximation */
    }

    #errorPageContainer .button-container button:hover {
      border-color: transparent !important;
    }

    #errorPageContainer .button-container button.primary {
      border-color: transparent !important;
    }
  }

  @-moz-document url-prefix("about:pocket") {
    html,
    body {
      background-color: var(
        --uc-panel-background
      ) !important; /* Closest approximation */
      font-size: 12px !important;
      color: var(--uc-text) !important; /* Closest approximation */
      user-select: none !important;
    }

    hr {
      background: none !important;
      height: 0 !important;
      border-top: 1px solid var(--uc-accent-iv) !important; /* Closest approximation */
    }

    .stp_header .stp_header_logo {
      filter: hue-rotate(-103deg) saturate(150%);
    }

    .stp_button {
      text-decoration: none !important;
      border-radius: var(
        --uc-button-border-radius
      ) !important; /* Closest approximation */
    }

    .stp_button_wide .stp_button {
      margin-block: -2px 0px !important;
      margin-inline: -6px !important;
      border-radius: 4px !important;
    }

    .stp_button.stp_button_primary {
      background-color: var(
        --uc-accent-i
      ) !important; /* Closest approximation */
      color: var(--uc-light-color) !important; /* Closest approximation */
      cursor: default !important;
    }

    .stp_button.stp_button_primary:hover {
      background-color: var(
        --uc-accent-i
      ) !important; /* Closest approximation - Consider a slightly darker shade */
    }

    .stp_button.stp_button_primary:hover:active {
      background-color: var(
        --uc-accent-i
      ) !important; /* Closest approximation - Consider a darker shade */
    }

    .stp_button.stp_button_secondary {
      background-color: var(
        --uc-background-layered
      ) !important; /* Closest approximation */
      color: var(--uc-text) !important; /* Closest approximation */
      cursor: default !important;
    }

    .stp_button.stp_button_secondary:hover {
      background-color: var(
        --uc-button-selected
      ) !important; /* Closest approximation */
    }

    .stp_button.stp_button_secondary:hover:active {
      background-color: var(
        --uc-button-selected
      ) !important; /* Closest approximation - Consider a darker shade */
    }

    .stp_ button:focus-visible {
      outline: none !important;
      box-shadow: 0 0 0 2px var(--uc-accent-ii) !important; /* Closest approximation */
    }

    a {
      color: var(--uc-accent-ii) !important; /* Closest approximation */
      text-decoration: none !important;
    }

    .stp_button.stp_button_text:hover {
      color: var(
        --uc-accent-ii
      ) !important; /* Closest approximation - Consider a slightly darker shade */
    }

    .stp_button.stp_button_text:hover:active {
      color: var(--uc-accent-i) !important; /* Closest approximation */
    }

    .stp_button.stp_button_text:focus {
      text-decoration: underline !important;
    }

    .stp_popular_topics .stp_popular_topic .stp_popular_topic_link {
      background-color: var(
        --uc-background-layered
      ) !important; /* Closest approximation */
      color: var(--uc-text) !important; /* Closest approximation */
      border-radius: var(
        --uc-button-border-radius
      ) !important; /* Closest approximation */
      text-decoration: none !important;
    }

    .stp_popular_topics .stp_popular_topic .stp_popular_topic_link:hover {
      background-color: var(
        --uc-button-selected
      ) !important; /* Closest approximation */
    }

    .stp_popular_topics
      .stp_popular_topic
      .stp_popular_topic_link:hover:active {
      background-color: var(
        --uc-button-selected
      ) !important; /* Closest approximation - Consider a darker shade */
    }

    .stp_article_list .stp_article_list_link {
      border-radius: 4px !important;
    }

    .stp_article_list .stp_article_list_link:is(:hover, :focus) {
      background-color: var(
        --uc-button-selected
      ) !important; /* Closest approximation */
    }

    .stp_article_list
      .stp_article_list_thumb:not(.stp_article_list_thumb_placeholder) {
      background-color: transparent !important;
      border-radius: 3px !important;
    }

    .stp_article_list .stp_article_list_thumb_placeholder {
      background-color: var(
        --uc-button-selected
      ) !important; /* Closest approximation */
    }

    .stp_article_list .stp_article_list_publisher {
      color: var(--uc-accent-iv) !important; /* Closest approximation */
    }

    .stp_article_list_meta {
      display: flex;
      flex-flow: column nowrap;
      justify-content: center;
      row-gap: 5px;
    }

    .stp_article_list
      :is(.stp_article_list_saved_article, .stp_article_list_link) {
      flex-flow: row nowrap;
      align-items: center;
    }

    .stp_article_list_meta > * {
      margin-block: 0 !important;
    }

    .stp_tag_picker {
      margin-bottom: 16px !important;
    }

    .stp_tag_picker .stp_tag_picker_tags {
      border: none !important;
      background-color: transparent !important;
      padding: 0 !important;
      color: inherit !important;
    }

    .stp_tag_picker .stp_tag_picker_input_wrapper,
    .stp_tag_picker .stp_tag_picker_input {
      min-width: 0 !important;
    }

    .stp_tag_picker .stp_tag_picker_input_wrapper {
      border: 1px solid var(--uc-accent-iv) !important; /* Closest approximation */
      border-radius: var(
        --uc-button-border-radius
      ) !important; /* Closest approximation */
      background-color: var(
        --uc-background-layered
      ) !important; /* Closest approximation */
      overflow: clip !important;
    }

    .stp_tag_picker .stp_tag_picker_input_wrapper:focus-within {
      box-shadow: 0 0 0 2px var(--uc-accent-ii) !important; /* Closest approximation */
      outline: 1px solid var(--uc-accent-ii) !important; /* Closest approximation */
      border-color: var(--uc-accent-ii) !important; /* Closest approximation */
    }

    .stp_tag_picker .stp_tag_picker_input,
    .stp_tag_picker .stp_tag_picker_button {
      border: none !important;
      outline: none !important;
      border-radius: 0 !important;
      color: inherit !important;
    }

    .stp_tag_picker .stp_tag_picker_button {
      border-left: 1px solid var(--uc-accent-iv) !important; /* Closest approximation */
      background-color: var(
        --uc-background-layered
      ) !important; /* Closest approximation */
      cursor: default !important;
    }

    .stp_tag_picker .stp_tag_picker_button:disabled {
      color: var(--uc-accent-iv) !important; /* Closest approximation */
    }

    .stp_tag_picker .stp_tag_picker_button:hover:enabled {
      background-color: var(
        --uc-button-selected
      ) !important; /* Closest approximation */
    }

    .stp_tag_picker .stp_tag_picker_button:focus:enabled {
      border-color: var(--uc-accent-ii) !important; /* Closest approximation */
      outline: 1px solid var(--uc-accent-ii) !important; /* Closest approximation */
      background-color: var(
        --uc-button-selected
      ) !important; /* Closest approximation - Consider a darker shade */
      color: var(--uc-light-color) !important; /* Closest approximation */
    }

    .stp_tag_picker .stp_tag_picker_tag {
      padding-block: 4px !important;
      padding-inline: 6px 4px !important;
      background-color: var(
        --uc-background-layered
      ) !important; /* Closest approximation */
      border-radius: var(
        --uc-button-border-radius
      ) !important; /* Closest approximation */
    }

    .stp_tag_picker .stp_tag_picker_tag_remove {
      width: 14px !important;
      height: 14px !important;
      box-sizing: content-box !important;
      padding: 0 !important;
      margin-inline-start: 4px !important;
      background: url("icons/close.svg") center/11px no-repeat !important;
      -moz-context-properties: fill, fill-opacity;
      fill: var(--uc-accent-iv); /* Closest approximation */
      color: transparent !important;
      cursor: default !important;
      border-radius: 2px !important;
    }

    .stp_tag_picker .stp_tag_picker_tag_remove:hover {
      fill: var(--uc-text) !important; /* Closest approximation */
      background-color: var(
        --uc-button-selected
      ) !important; /* Closest approximation */
    }

    .stp_tag_picker .stp_tag_picker_tag_remove:focus {
      outline-offset: 0 !important;
      box-shadow: 0 0 0 2px var(--uc-accent-ii) !important; /* Closest approximation */
      outline: 1px solid var(--uc-accent-ii) !important; /* Closest approximation */
    }

    body {
      font-family:
        SF Pro Display,
        SF Arabic,
        Segoe UI,
        sans-serif !important;
      font-kerning: normal !important;
    }

    h3,
    :is(article, aside, nav, section) :is(article, aside, nav, section) h1 {
      font-weight: var(--uc-font-weight-bold, 500);
    }

    .stp_button {
      font-weight: var(--uc-font-weight-bold, 500) !important;
      font-family:
        SF Pro Display,
        SF Arabic,
        Segoe UI,
        sans-serif !important;
    }

    .stp_article_list .stp_article_list_header {
      font-weight: var(--uc-font-weight-bold, 500) !important;
    }

    .stp_popular_topics .stp_popular_topic .stp_popular_topic_link {
      font-weight: var(--uc-font-weight-thin, 400) !important;
    }

    .stp_tag_picker .stp_tag_picker_tag {
      font-weight: var(--uc-font-weight-thin, 400) !important;
    }
  }
}

@-moz-document url("about:processes") {
  td:nth-child(7) {
    width: 3% !important;
  }
}

@-moz-document url-prefix("about:debugging") {
  @media (prefers-color-scheme: dark) {
    :root {
      --bg-color: var(
        --uc-background-main
      ) !important; /* Closest approximation */
      --bg-color-float: var(--uc-background-main); /* Closest approximation */
      --text-color: var(
        --uc-light-color
      ) !important; /* Closest approximation */
      --secondary-text-color: var(
        --uc-fg2
      ) !important; /* Closest approximation */
      --text-color-2nd: var(--uc-fg2) !important; /* Closest approximation */
      --text-color-3rd: var(--uc-fg3) !important; /* Closest approximation */
      --border-color: var(--uc-accent-i) !important; /* Closest approximation */
      --box-background: var(
        --uc-background-main
      ) !important; /* Closest approximation */
      --box-border-color: var(
        --uc-accent-i
      ) !important; /* Closest approximation */
      --shadow-var: 0 0 5px hsla(0, 0%, 0%, 0.08), 0 0 8px hsla(0, 0%, 0%, 0.05);
      --button-color: var(
        --uc-light-color
      ) !important; /* Closest approximation */
      --button-bg: var(
        --uc-background-main
      ) !important; /* Closest approximation */
      --button-bg-hover: var(
        --uc-button-selected
      ) !important; /* Closest approximation */
      --button-bg-active: var(
        --uc-button-selected
      ) !important; /* Closest approximation - Consider a darker shade */
      --card-separator-color: var(
        --uc-accent-i
      ) !important; /* Closest approximation */
      --category-background-hover: rgba(12, 12, 13, 0.1);
      --category-text: var(
        --uc-light-color
      ) !important; /* Closest approximation */
      --category-text-selected: var(
        --uc-accent-i
      ) !important; /* Closest approximation */
      --link-color: var(--uc-accent-ii) !important; /* Closest approximation */
      --link-color-hover: var(
        --uc-accent-ii
      ) !important; /* Closest approximation - Consider a slightly darker shade */
      --link-color-active: var(
        --uc-accent-i
      ) !important; /* Closest approximation */
      --green-70: var(--uc-accent-i) !important; /* Closest approximation */
      --grey-50: var(--text-color-3rd) !important;
      --grey-20: var(--card-separator-color) !important;
      --button-background-color: var(--button-bg) !important;
      --button-color: var(
        --uc-light-color
      ) !important; /* Closest approximation */
      --button-hover-background-color: var(--button-bg-hover) !important;
      --primary-button-color: var(
        --uc-light-color
      ) !important; /* Closest approximation */
      --primary-button-background-color: var(
        --uc-accent-v
      ) !important; /* Closest approximation */
      --primary-button-hover-background-color: var(
        --uc-accent-v
      ) !important; /* Closest approximation - Consider a slightly darker shade */
      --primary-button-active-background-color: var(
        --uc-accent-i
      ) !important; /* Closest approximation */
    }

    .card {
      background-color: var(--bg-color-float) !important;
      box-shadow: var(--shadow-var) !important;
      -moz-context-properties: fill, fill-opacity !important;
      fill: currentColor !important;
    }

    .connect-section__header__icon {
      opacity: 0.932 !important;
    }

    .default-button {
      color: var(--button-color) !important;
      background-color: var(--button-bg) !important;
    }

    .default-button:enabled:hover,
    .sidebar-item--selectable:hover {
      background: var(--button-bg-hover) !important;
    }

    .default-button:enabled:hover:active,
    .sidebar-item--selectable:hover:active {
      background: var(--button-bg-active) !important;
    }

    .sidebar__footer {
      -moz-context-properties: fill, fill-opacity !important;
      fill: currentColor !important;
      fill-opacity: 0.932 !important;
    }

    .fieldpair__description {
      color: var(--secondary-text-color) !important;
    }

    .sidebar__footer__support-help {
      column-gap: calc(var(--base-unit) * 1.5) !important;
    }

    .icon-label--info {
      --icon-color: currentColor !important;
    }

    .message__button {
      fill: var(--message-color) !important;
    }

    .message--level-info {
      --message-background-color: var(--grey-20) !important;
      --message-border-color: transparent !important;
      --message-color: var(--text-color) !important;
      --message-icon-color: var(--text-color) !important;
    }

    .message--level-warning {
      --message-background-color: var(
        --uc-accent-vi
      ) !important; /* Closest approximation */
      --message-border-color: var(
        --uc-accent-vi
      ) !important; /* Closest approximation */
      --message-color: var(--text-color) !important;
      --message-icon-color: var(
        --uc-accent-vi
      ) !important; /* Closest approximation */
    }

    .message--level-error {
      --message-background-color: color-mix(
        in srgb,
        transparent 15%,
        var(--uc-accent-vi)
      ) !important; /* Closest approximation */
      --message-border-color: color-mix(
        in srgb,
        transparent 30%,
        var(--uc-accent-vi)
      ) !important; /* Closest approximation */
      --message-color: var(--text-color) !important;
      --message-icon-color: var(
        --uc-accent-vi
      ) !important; /* Closest approximation */
    }
  }
}

@-moz-document url-prefix("about:reader") {
  body.dark {
    --main-background: var(
      --uc-background-main
    ) !important; /* Closest approximation */
    --tooltip-background: color-mix(
      in srgb,
      black 40%,
      var(--uc-background-main)
    ) !important; /* Closest approximation */
    --active-color: var(--uc-accent-v) !important; /* Closest approximation */
    --selected-background: var(
      --uc-accent-i
    ) !important; /* Closest approximation */
    --link-foreground: var(
      --uc-accent-ii
    ) !important; /* Closest approximation */
    --visited-link-foreground: #823afc !important;
    --proportional-width: calc(
      100% - (122.5em - (var(--content-width, 60em) * 2))
    );
    --final-content-width: max(
      var(--content-width, 60em),
      var(--proportional-width, var(--content-width, 60em))
    );
  }

  .container {
    /* below: left align the text in about:reader */
    /* margin-inline-start: calc(3% + 65px) !important; */
    max-width: var(--final-content-width) !important;
  }

  .toolbar-container {
    top: var(--body-padding) !important;
    margin-inline-start: -15px !important;
  }

  .toolbar {
    margin-inline-start: 0 !important;
    transition-property: border-color, box-shadow, background-color !important;
    transition-timing-function: linear !important;
    transition-duration: 0.2s !important;
  }

  .toolbar {
    box-shadow: 0 0 12px hsla(0, 0%, 0%, 0.4) !important;
  }

  body.dark .toolbar {
    border-color: var(--uc-panel-border) !important; /* Closest approximation */
    background-color: var(
      --uc-background-layered
    ) !important; /* Closest approximation */
  }

  body > .container > .header > .domain {
    border: none !important;
  }

  body.dark hr,
  body.dark > .container > .header > .domain {
    border-color: var(--uc-accent-i) !important; /* Closest approximation */
    border-block-width: 0 1px !important;
  }

  .toolbar-container.scrolled .toolbar:not(:hover, :focus-within) {
    background-color: transparent !important;
    border-color: transparent !important;
    box-shadow: 0 2px 8px transparent !important;
  }

  .toolbar-container.scrolled .toolbar:not(:hover, :focus-within) .button {
    opacity: 0.4 !important;
  }

  input:not([type="file"], [type="image"]):focus-visible,
  select:focus-visible,
  button:focus-visible,
  textarea:focus-visible {
    outline-color: var(--uc-accent-ii) !important; /* Closest approximation */
    outline-style: solid !important;
    outline-width: 2px !important;
  }

  .moz-reader-content a:link {
    color: var(--uc-accent-ii) !important; /* Closest approximation */
  }

  .moz-reader-content a:link:hover {
    color: var(
      --uc-accent-ii
    ) !important; /* Closest approximation - Consider a slightly darker shade */
  }

  .moz-reader-content a:link:hover:active {
    color: var(--uc-accent-i) !important; /* Closest approximation */
  }

  .moz-reader-content a:visited {
    color: var(--uc-accent-v) !important; /* Closest approximation */
  }

  .moz-reader-content a:visited:hover {
    color: var(
      --uc-accent-v
    ) !important; /* Closest approximation - Consider a slightly darker shade */
  }

  .moz-reader-content a:visited:hover:active {
    color: var(--uc-accent-i) !important; /* Closest approximation */
  }
}

@-moz-document url("about:sync") {
  :root {
    --horizon-red: var(--uc-accent-vi) !important; /* Closest approximation */
    --horizon-orange: var(
      --uc-accent-ii
    ) !important; /* Closest approximation */
    --horizon-yellow: var(--uc-accent-i) !important; /* Closest approximation */
    --horizon-green: var(--uc-accent-v) !important; /* Closest approximation */
    --horizon-cyan: var(--uc-accent-v) !important; /* Closest approximation */
    --horizon-purple: var(--uc-accent-v) !important; /* Closest approximation */
  }

  .collections,
  .topHeader {
    background: var(
      --uc-background-layered
    ) !important; /* Closest approximation */
    color: var(--uc-text) !important; /* Closest approximation */
  }

  .topHeader > * {
    flex-shrink: 0 !important;
  }

  .topHeader > :first-child {
    flex-grow: 1 !important;
    flex-basis: min-content !important;
  }

  .panelhead {
    background-color: var(
      --uc-background-main
    ) !important; /* Closest approximation */
  }

  .panel > button::before,
  .panel > button::after {
    background: var(--uc-text) !important; /* Closest approximation */
  }

  .collection {
    border-color: var(--uc-panel-border) !important; /* Closest approximation */
  }

  fieldset {
    position: relative !important;
    margin: 10px !important;
    padding-inline: 10px !important;
    padding-top: 2em !important;
    border-radius: 10px !important;
    border: none !important;
    background: var(
      --uc-background-layered
    ) !important; /* Closest approximation */
  }

  fieldset > legend {
    position: absolute !important;
    top: 0.7em !important;
    font-size: 1.3em !important;
    font-weight: 600 !important;
  }

  .tabs-navigation {
    border-color: var(--uc-panel-border) !important; /* Closest approximation */
  }

  .tabs-menu-item a {
    border: 1px solid transparent !important;
    border-bottom: 0 !important;
  }

  .tabs-menu-item.is-active a {
    background: var(
      --uc-button-selected
    ) !important; /* Closest approximation */
    border-color: var(--uc-panel-border) !important; /* Closest approximation */
    color: inherit !important;
  }

  .tabs-menu-item:not(.is-active) a:hover {
    background: var(
      --uc-background-main
    ) !important; /* Closest approximation */
    border-color: var(--uc-panel-border) !important; /* Closest approximation */
    color: var(--uc-text) !important; /* Closest approximation */
  }

  .table-inspector,
  .table-inspector th,
  .table-inspector td {
    border-color: var(--uc-panel-border) !important; /* Closest approximation */
  }

  .table-inspector tr:nth-of-type(2n + 1) {
    background-color: var(
      --uc-background-layered
    ) !important; /* Closest approximation */
  }

  .table-inspector th .resizer {
    background-color: var(--uc-accent-v) !important; /* Closest approximation */
  }

  .table-inspector th .resizer:not(:hover) {
    opacity: 0.25 !important;
  }

  .table-inspector-string-cell {
    color: var(--uc-accent-vi) !important; /* Closest approximation */
  }

  .table-inspector-number-cell {
    color: var(--uc-accent-v) !important; /* Closest approximation */
  }

  /*
  | theme properties defined here:
  | https://github.com/storybookjs/react-inspector/blob/master/src/styles/themes/chromeLight.tsx
  */
  [style*="monospace"i] {
    font-family:
      Fira Code UC,
      Fira Code,
      SF Mono,
      -moz-fixed,
      monospace !important;
    font-weight: 400 !important;
    font-size: revert !important;
  }

  /* base */
  [style*="color: black"i] {
    color: var(--uc-text) !important; /* Closest approximation */
  }

  /* object/property name */
  span[style*="color: rgb(136, 19, 145)"] {
    color: var(--uc-accent-vi) !important; /* Closest approximation */
  }

  /* regexp/string/symbol */
  span[style*="color: rgb(196, 26, 22)"] {
    color: var(--uc-accent-i) !important; /* Closest approximation */
  }

  /* primitives like boolean, number, null */
  span[style*="color: rgb(128, 128, 128)"],
  span[style*="color: rgb(28, 0, 207)"] {
    color: var(--uc-accent-ii) !important; /* Closest approximation */
  }

  /* function names */
  span[style*="color: rgb(85, 106, 242)"] {
    color: var(--uc-accent-v) !important; /* Closest approximation */
  }
}

/* firefox screenshots addon overlay */
@-moz-document regexp("^moz-extension://.*/blank.html.*")
{
  :root[uc-extension-id="screenshots@mozilla.org"] .all-buttons-container {
    background-color: var(
      --uc-background-main
    ) !important; /* Closest approximation */
    height: 88px !important;
    box-shadow:
      0 0 0 1px rgba(12, 12, 13, 0.1),
      0 0 8px rgba(12, 12, 13, 0.1) !important;
  }

  :root[uc-extension-id="screenshots@mozilla.org"]
    .all-buttons-container
    button {
    color: var(--uc-text) !important; /* Closest approximation */
    background-color: transparent !important;
    border-radius: var(
      --uc-button-border-radius
    ) !important; /* Closest approximation */
    padding: 54px 5px 5px !important;
    stroke: hsl(236, 40%, 56%) !important;
    fill: hsl(0, 0%, 93%) !important;
    appearance: none !important;
    -moz-context-properties: fill, stroke !important;
  }

  :root[uc-extension-id="screenshots@mozilla.org"]
    .all-buttons-container
    button:hover {
    background-color: var(
      --uc-background-main
    ) !important; /* Closest approximation */
    border: 1px solid var(--uc-background-main) !important; /* Closest approximation */
  }

  :root[uc-extension-id="screenshots@mozilla.org"] .pixel-dimensions {
    margin-block-start: -5px;
    margin-inline-start: -5px;
    color: var(--uc-light-color) !important; /* Closest approximation */
    text-shadow:
      0.5px 0.5px 0.5px #000,
      0 0 1px #000,
      0 0 1px #000 !important;
  }
}
