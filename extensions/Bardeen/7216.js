"use strict";(self.webpackChunkbardeen_browser_extension=self.webpackChunkbardeen_browser_extension||[]).push([[7216],{7216:(e,t,n)=>{n.r(t),n.d(t,{default:()=>l});var o=n(78975),s=n(68796),r=n(2784),i=n(28316);const d=(0,n(79692).Z)((e=>({windowStyle:{position:"fixed",zIndex:2147483e3,left:0,top:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.45)"}})));var a=function(e,t,n,o){return new(n||(n=Promise))((function(s,r){function i(e){try{a(o.next(e))}catch(e){r(e)}}function d(e){try{a(o.throw(e))}catch(e){r(e)}}function a(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,d)}a((o=o.apply(e,t||[])).next())}))};const l=class extends s.UIModulePage{constructor(){super(...arguments),this.eventsCaptured=!1,this.setLifecycleVisible=e=>{},this.captureHandler=e=>{e.target instanceof HTMLElement&&e.target===s.UIGlobals.documentHost||(e.stopPropagation(),e.stopImmediatePropagation(),e.preventDefault())},this.bubbleHandler=e=>{e.stopPropagation()}}captureUserEvents(){this.eventsCaptured||(this.eventsCaptured=!0,window.addEventListener("keydown",this.captureHandler,!0),window.addEventListener("keypress",this.captureHandler,!0),window.addEventListener("keyup",this.captureHandler,!0),window.addEventListener("mousedown",this.captureHandler,!0),window.addEventListener("mousemove",this.captureHandler,!0),window.addEventListener("mouseup",this.captureHandler,!0),window.addEventListener("paste",this.captureHandler,!0),s.UIGlobals.documentRoot.addEventListener("keydown",this.bubbleHandler),s.UIGlobals.documentRoot.addEventListener("keypress",this.bubbleHandler),s.UIGlobals.documentRoot.addEventListener("keyup",this.bubbleHandler),s.UIGlobals.documentRoot.addEventListener("mousedown",this.bubbleHandler),s.UIGlobals.documentRoot.addEventListener("mousemove",this.bubbleHandler),s.UIGlobals.documentRoot.addEventListener("mouseup",this.bubbleHandler),s.UIGlobals.documentRoot.addEventListener("paste",this.bubbleHandler))}restoreUserEvents(){this.eventsCaptured&&(this.eventsCaptured=!1,window.removeEventListener("keydown",this.captureHandler,!0),window.removeEventListener("keypress",this.captureHandler,!0),window.removeEventListener("keyup",this.captureHandler,!0),window.removeEventListener("mousedown",this.captureHandler,!0),window.removeEventListener("mousemove",this.captureHandler,!0),window.removeEventListener("mouseup",this.captureHandler,!0),window.removeEventListener("paste",this.captureHandler,!0),s.UIGlobals.documentRoot.removeEventListener("keydown",this.bubbleHandler),s.UIGlobals.documentRoot.removeEventListener("keypress",this.bubbleHandler),s.UIGlobals.documentRoot.removeEventListener("keyup",this.bubbleHandler),s.UIGlobals.documentRoot.removeEventListener("mousedown",this.bubbleHandler),s.UIGlobals.documentRoot.removeEventListener("mousemove",this.bubbleHandler),s.UIGlobals.documentRoot.removeEventListener("mouseup",this.bubbleHandler),s.UIGlobals.documentRoot.removeEventListener("paste",this.bubbleHandler))}mount(e){return a(this,void 0,void 0,(function*(){i.render(r.createElement(o.BardeenStyleProvider,null,r.createElement((()=>{const e=d(),[t,o]=r.useState(null),[s,i]=r.useState(!0),[l,u]=r.useState(!0);this.setLifecycleVisible=u;const c=s&&l;r.useEffect((()=>{this.controller.on("show",(()=>a(this,void 0,void 0,(function*(){return i(!0)})))),this.controller.on("hide",(()=>a(this,void 0,void 0,(function*(){return i(!1)})))),Promise.all([n.e(5156),n.e(7328),n.e(2304)]).then(n.bind(n,51485)).then((e=>{const{setAPI:t,PopupWindow:n}=e;t(this.api),o({component:n})})).catch((e=>{console.error("Could not load bardeen UI:",e)}))}),[]),r.useEffect((()=>(this.captureUserEvents(),()=>this.restoreUserEvents())),[]);const b=r.useCallback((e=>{e.target.dataset.bardeenDismiss&&this.controller.hideByUserRequest()}),[]);return r.createElement("div",{className:e.windowStyle,onMouseDown:b,"data-bardeen-dismiss":!0,id:"bardeen-popup"},t?(()=>{const e=t.component;return c?r.createElement(e,{appVisible:c}):null})():null)}),null)),e)}))}unmount(e){return a(this,void 0,void 0,(function*(){i.unmountComponentAtNode(e)}))}show(){return a(this,void 0,void 0,(function*(){this.setLifecycleVisible(!0),this.captureUserEvents()}))}hide(){return a(this,void 0,void 0,(function*(){this.setLifecycleVisible(!1),this.restoreUserEvents()}))}}}}]);