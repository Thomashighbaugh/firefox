"use strict";(self.webpackChunkbardeen_browser_extension=self.webpackChunkbardeen_browser_extension||[]).push([[3609],{33609:(e,n,t)=>{t.r(n),t.d(n,{useStyles:()=>u,default:()=>c});var o=t(2784),i=t(68796),a=t(78975),r=t(6277),s=t(28316),l=function(e,n,t,o){return new(t||(t=Promise))((function(i,a){function r(e){try{l(o.next(e))}catch(e){a(e)}}function s(e){try{l(o.throw(e))}catch(e){a(e)}}function l(e){var n;e.done?i(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(r,s)}l((o=o.apply(e,n||[])).next())}))};const d=({api:e,pbs:n,openBuilderOnRun:t})=>{const[i,s]=o.useState(!1),[d,c]=o.useState([]),v=u();if(o.useEffect((()=>{let e=!1;return function(){l(this,void 0,void 0,(function*(){e||c(n)}))}(),()=>{e=!0}}),[n]),!d.length||i)return null;const p=()=>{s(!0)},f=n=>l(void 0,void 0,void 0,(function*(){yield e.playbookSetFavorite(n.id,!n.favorite,!0),c(d.map((e=>e.id===n.id?Object.assign(Object.assign({},e),{favorite:!e.favorite}):e)))})),y=n=>l(void 0,void 0,void 0,(function*(){yield e.trackEvent("nag.control",{action:n})})),h=({id:n})=>l(void 0,void 0,void 0,(function*(){t?(p(),yield e.playbookEditorSynthesize()):(p(),yield e.trackEvent("nag.playbook.run",{id:n}),yield e.playLinkEvaluate(`https://play.bardeen.ai/playbook/${n}`))})),b=n=>l(void 0,void 0,void 0,(function*(){t?(p(),e.playbookNagPatternExclude(n)):(yield e.playbookDislike(n.id),c(d.filter((e=>e!==n))))}));return o.createElement("div",{className:(0,r.Z)(v.nag)},t?o.createElement(a.BuilderNag,{hideAfterMs:15e3,onClose:p,onDislike:b,onPin:f,onRun:h,onControl:y,playbook:d[0]}):o.createElement(a.Nag,{hideAfterMs:15e3,onClose:p,onDislike:b,onPin:f,onRun:h,onControl:y,playbooks:d}))},u=(0,a.makeStyles)({nag:{position:"fixed",top:"1rem",right:"1rem",zIndex:2147483e3}}),c=class extends i.UIModulePage{setup(){return l(this,void 0,void 0,(function*(){}))}mount(e){var n;return l(this,void 0,void 0,(function*(){const{wantsPlaybookSuggestions:t}=yield this.api.systemSettingsGet();if(!t)return;const i=yield this.api.playbookNagSuggestions();if(0===i.length)return;const r=1===i.length&&"PatternMatcher"===(null===(n=i[0])||void 0===n?void 0:n.origin);r&&this.api.playbookNagReset(),s.render(o.createElement(a.BardeenStyleProvider,null,o.createElement(d,{api:this.api,pbs:i,openBuilderOnRun:r})),e)}))}unmount(e){return l(this,void 0,void 0,(function*(){s.unmountComponentAtNode(e)}))}}}}]);