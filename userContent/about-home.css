@namespace html url("http://www.w3.org/1999/xhtml");

@-moz-document url("about:home"), url("about:newtab") {
  /** Activity Stream - Search Focus Border: like URL *************************/
  /* At DarkMode, Color */
  body[style*="--newtab-background-color:rgba(28, 27, 34, 1);"],
  body[style*="--newtab-background-color:rgba(42, 42, 46, 1);"],
  body[style*="--newtab-background-color: rgba(42, 42, 46, 1);"],
  body[style*="--newtab-background-color: rgba(43, 42, 51, 1);"] {
    /* inner */
    --newtab-focus-border: rgba(0, 221, 255, 0.5) !important;
    --newtab-focus-border-selected: #b2bfd9aa !important; /* Original: #B5D3FF */

    /* For Nightly */
    --newtab-primary-action-background: var(--newtab-focus-border) !important;
  }

  /** Activity Stream - Web Site Icon: full size ******************************/
  .top-site-outer .tile {
    overflow: hidden;
  }

  .top-site-outer .tile .icon-wrapper {
    width: 100% !important; /* Original: 48px */
    height: 100% !important; /* Original: 48px */
  }

  /** Activity Stream - Animate ***********************************************/
  @media (prefers-reduced-motion: no-preference) {
    :root {
      --animation-easing-function: cubic-bezier(0.07, 0.95, 0, 1);
    }

    /* Background */
    .top-site-outer,
    #searchSubmit,
    button.icon,
    button.close-button {
      transition: background 1.5s var(--animation-easing-function);
    }
    .top-site-outer:hover,
    #searchSubmit:hover,
    button.icon:hover,
    button.close-button:hover {
      transition: background 0.5s var(--animation-easing-function);
    }

    /* Search Bar */
    .search-inner-wrapper input {
      transition: 1s var(--animation-easing-function);
      transition-property: border-color, box-shadow;
    }
    .search-wrapper .search-inner-wrapper:active input,
    .search-wrapper input:focus {
      transition: border-color 0.5s var(--animation-easing-function), box-shadow 1s var(--animation-easing-function);
    }
    .search-wrapper .search-inner-wrapper:hover input {
      border-color: var(--newtab-primary-action-background) !important;
      transition: border-color 0.5s var(--animation-easing-function);
    }
  }

  /** Activity Stream - Home Search Bar looks like proton *********************/
  /* Dropdown Colors */
  #root {
    --newtab-search-background-color: rgba(255, 255, 255, 1); /* Same as light theme's --panel-background */

    /* Set search dropdown background */
    --newtab-search-dropdown-header-color: var(--newtab-search-background-color) !important;
    --newtab-search-dropdown-color: var(--newtab-search-background-color) !important;
    --newtab-element-hover-color: color-mix(in srgb, currentColor 9%, transparent) !important;
  }

  @media (-moz-toolbar-prefers-color-scheme: dark), (prefers-color-scheme: dark) {
    #root {
      /* Default Dark Mode */
      --newtab-search-background-color: rgba(66, 65, 77, 1); /* Same as dark theme's --panel-background */
    }
  }
  .activity-stream[lwt-sidebar]:not([style*="--newtab-background-color: rgba(43, 42, 51, 1);"]) #root {
    /* Light weight theme */
    --newtab-search-background-color: var(--lwt-sidebar-background-color);
  }

  /* Padding */
  #searchSuggestionTable {
    border-radius: 4px !important;
    -moz-window-shadow: cliprounded;
  }

  .contentSearchSuggestionTable .contentSearchOneOffItem {
    width: 32px !important;
    height: 32px !important;

    /* Margin */
    margin-block: 5px !important;
    margin-inline-start: 5px !important;
    margin-inline-end: 8px !important;

    /* Border */
    border-radius: 4px !important;
    border-image: none !important; /* Original: linear-gradient(transparent 18%, var(--newtab-border-secondary-color) 18%, var(--newtab-border-secondary-color) 82%, transparent 82%) 1; */
    border-inline-end: none !important; /* Original: 1px solid; */
  }

  #contentSearchSettingsButton::before {
    content: url("chrome://global/skin/icons/settings.svg") !important;
    display: -moz-inline-box;

    /* Color */
    -moz-context-properties: fill, fill-opacity !important;
    fill: currentColor !important;

    /* Align */
    margin-inline-end: 5px;
    vertical-align: -25%;
  }

  /* Pointer */
  .contentSearchSuggestionTable .contentSearchOneOffItem,
  #contentSearchSettingsButton {
    cursor: pointer;
  }

  /*- Fix Color For Nightly --------------------------------------------------*/
  .contentSearchSuggestionTable,
  .contentSearchHeaderRow,
  .contentSearchHeader,
  .contentSearchSuggestionsContainer {
    color: var(--newtab-text-primary-color) !important;
    background: var(--newtab-search-background-color) !important;
  }

  .contentSearchSuggestionTable .contentSearchSuggestionRow.selected,
  .contentSearchSuggestionTable .contentSearchSettingsButton:hover {
    color: var(--newtab-text-primary-color) !important;
  }

  .contentSearchSuggestionTable .contentSearchSuggestionRow.selected,
  .contentSearchSuggestionTable .contentSearchSettingsButton:hover,
  .contentSearchSuggestionTable .contentSearchOneOffItem.selected {
    background: var(--newtab-element-hover-color) !important;
  }

  .contentSearchSuggestionTable .contentSearchSuggestionRow.selected:active,
  .contentSearchSuggestionTable .contentSearchOneOffItem:active {
    background: var(--newtab-element-active-color) !important;
  }

  .contentSearchSuggestionTable .contentSearchSuggestionRow.selected .historyIcon {
    fill: var(--newtab-icon-secondary-color) !important;
  }
}

/** Error Page - Restore illustrations ****************************************/
@-moz-document url-prefix("about:neterror"),
  url("about:restartrequired"), url("chrome://browser/content/aboutRestartRequired.xhtml"),
  url("about:sessionrestore"),  url("chrome://browser/content/aboutSessionRestore.xhtml")
{
  /* Illustrations Position */
  #errorPageContainer,
  .description-wrapper {
    min-height: 300px;
    background-position: left center;
    background-repeat: no-repeat;
    background-size: 38%;
  }

  #errorPageContainer {
    display: flex;
    flex-direction: column;
  }
  .description-wrapper {
    padding-inline-start: 38%;
  }

  /* Container */
  .container {
    min-width: var(--in-content-container-min-width); /* 13em */
    max-width: var(--in-content-container-max-width); /* 52em */
  }

  /* Text Position */
  #text-container {
    margin: auto;
    padding-inline-start: 38%;
  }
}

@-moz-document url-prefix("about:neterror?e=connectionFailure"),
  url-prefix("about:neterror?e=netInterrupt"),
  url-prefix("about:neterror?e=netTimeout"),
  url-prefix("about:neterror?e=netReset"),
  url-prefix("about:neterror?e=netOffline"),
  url("about:restartrequired"), url("chrome://browser/content/aboutRestartRequired.xhtml")
{
  #errorPageContainer {
    background-image: url("chrome://global/skin/icons/error-connection-failure.svg");
  }
}
@-moz-document url-prefix("about:neterror?e=dnsNotFound") {
  #errorPageContainer {
    background-image: url("chrome://global/skin/icons/error-server-not-found.svg");
  }
}
@-moz-document url-prefix("about:neterror?e=malformedURI") {
  #errorPageContainer {
    background-image: url("chrome://global/skin/icons/illustrations/error-malformed-url.svg");
  }
}
@-moz-document url-prefix("about:neterror?e=clockSkewError"),
  url-prefix("about:neterror?e=nssFailure") {
  #errorPageContainer {
    background-image: url("chrome://global/skin/icons/blue-berror.svg");
    background-size: 18.5em;
  }
}
