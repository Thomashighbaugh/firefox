"use strict";(self.webpackChunkbardeen_browser_extension=self.webpackChunkbardeen_browser_extension||[]).push([[1512],{71512:(e,t,i)=>{i.r(t),i.d(t,{InteractivePluginButton:()=>n});class n{constructor(e){this.identifier="[data-bardeen-activate]",this.eventListenerCallbacks={},this.elementsWithListeners=[],this.retries=0,this.api=e}exec(){return this.getActivePlugins().then((()=>{this.retries=0,this.execBardeenInteractive()})).catch((e=>{this.retries=this.retries+1,this.retries<=3&&setTimeout((()=>{this.exec()}),1e3)}))}getActivePlugins(){return this.api.integrationListInstances().then((e=>{this.pluginIds=e.map((e=>e.manifest.id))}))}execBardeenInteractive(){const e=document.querySelectorAll("[data-bardeen-activate]");Array.from(e).forEach((e=>{const t=e.getAttribute("data-bardeen-activate");this.attachListener(e,t),this.setActiveStyle(e,t)}))}setActiveStyle(e,t){const i=e.classList.contains("bardeen-interactive-active");this.pluginIds.includes(t)?i||e.classList.add("bardeen-interactive-active"):i&&e.classList.remove("bardeen-interactive-active")}attachListener(e,t){this.elementsWithListeners.includes(e)||(this.elementsWithListeners.push(e),this.eventListenerCallbacks[t]=()=>{this.activatePlugin(t)},e.addEventListener("click",this.eventListenerCallbacks[t]))}activatePlugin(e){this.api.integrationActivate(e).then((()=>{return e=this,t=void 0,n=function*(){yield this.exec(),alert("Plugin successfully installed!")},new((i=void 0)||(i=Promise))((function(s,a){function r(e){try{l(n.next(e))}catch(e){a(e)}}function c(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,c)}l((n=n.apply(e,t||[])).next())}));var e,t,i,n})).catch((e=>{alert(`Plugin could not be installed: ${e} Please try another plugin`)}))}}}}]);