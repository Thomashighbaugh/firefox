"use strict";(self.webpackChunkbardeen_browser_extension=self.webpackChunkbardeen_browser_extension||[]).push([[327],{30327:(e,n,t)=>{t.r(n),t.d(n,{default:()=>d,paginate:()=>h,scrape:()=>v,scrapeTable:()=>p});var o=t(68796),i=t(78975),r=t(2784),c=t(28316),l=t(56034);const s=e=>{const[n,t]=(0,r.useState)(!1);return r.createElement(r.Fragment,null,r.createElement("div",{style:{position:"fixed",bottom:20,right:20,backgroundColor:"white",zIndex:2000000002}},r.createElement(i.BardeenButton,{size:"l",onClick:n=>{t(!0),e.onClick()}},n?"Stopping...":"Stop Scraping")))};var a=t(82094),u=function(e,n,t,o){return new(t||(t=Promise))((function(i,r){function c(e){try{s(o.next(e))}catch(e){r(e)}}function l(e){try{s(o.throw(e))}catch(e){r(e)}}function s(e){var n;e.done?i(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(c,l)}s((o=o.apply(e,n||[])).next())}))};const d=class extends o.UIModulePage{setup(){return u(this,void 0,void 0,(function*(){}))}mount(e){return u(this,void 0,void 0,(function*(){const n=e=>new Promise((n=>{this.controller.captureActiveTabRegion(e),this.controller.on("activeTabRegionResult",(e=>u(this,void 0,void 0,(function*(){n(e)}))))})),t=new l.z;t.onError((e=>{this.controller.error(e)})),this.controller.on("scrape",((e,o)=>u(this,void 0,void 0,(function*(){v(e,this.controller,t,n,o)})))),this.controller.on("isMounted",(()=>u(this,void 0,void 0,(function*(){this.controller.isMounted(!0)})))),this.controller.on("scrapeTable",(e=>u(this,void 0,void 0,(function*(){p(e,this.controller,t)})))),this.controller.on("paginate",((e,n)=>u(this,void 0,void 0,(function*(){return h(this.controller,t,e,n)})))),this.controller.on("cleanup",(()=>u(this,void 0,void 0,(function*(){return t.cleanup()})))),c.render(r.createElement(i.BardeenStyleProvider,null,r.createElement(s,{onClick:()=>{this.controller.cancel()}})),e),document.body.dataset.bardeenAction="scraping"}))}unmount(e){return u(this,void 0,void 0,(function*(){delete document.body.dataset.bardeenAction,c.unmountComponentAtNode(e)}))}};function h(e,n,t,o){return u(this,void 0,void 0,(function*(){!t||"click"!==t.type&&"scroll"!==t.type||(yield n.paginate(t,o)),e.paginationComplete()}))}function v(e,n,t,o,i){return u(this,void 0,void 0,(function*(){yield(0,a.Kg)(5e3,500);const r=yield t.execute(e,{captureActiveTabRegion:o},(e=>u(this,void 0,void 0,(function*(){yield n.saveProgress(e)}))),i);yield n.onScraperFinish(r)}))}function p(e,n,t){return u(this,void 0,void 0,(function*(){const o=t.getTable(e.operations);yield n.onScrapeTableFinish(o)}))}}}]);