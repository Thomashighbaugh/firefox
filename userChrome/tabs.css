@-moz-document url(chrome://browser/content/browser.xul),
               url(chrome://browser/content/browser.xhtml)
{
  /* hide horizontal tabs at the top of the window */
  #TabsToolbar > * {
    visibility: collapse !important;
    display:none !important;
  }

  #titlebar-secondary-buttonbox,
#titlebar .toolbar-items,
#titlebar .titlebar-spacer,
.private-browsing-indicator,
#toolbar-menubar,
#tabbrowser-tabs {
  display: none;
}

#alltabs-button {
  z-index: 9 !important;
  display: block !important;
  position: relative;
}

  /* hide navigation bar when it is not focused; use Ctrl+L to get focus */
  #main-window:not([customizing]) #navigator-toolbox:not(:focus-within):not(:hover) {
    margin-top: -45px;
    visibility: collapse !important;
    display:none !important;
  }
  #navigator-toolbox {
    transition: 0.2s margin-top ease-out;
  }

  #generalTab {
    --viewgroup-image: url(chrome://global/skin/icons/page-portrait.svg);
    visibility: collapse !important;
     display:none !important;
  }
  #mediaTab {
    --viewgroup-image: url(chrome://browser/skin/canvas.svg);
    visibility: collapse !important;
    display:none !important;
  }
  #permTab {
    --viewgroup-image: url(chrome://browser/skin/permissions.svg);
    visibility: collapse !important;
    display:none !important;
  }
  #securityTab {
    --viewgroup-image: url(chrome://global/skin/icons/security.svg);
    visibility: collapse !important;
    display:none !important;
  }

  /* Tabbar Buttons */
  :root {
    --newtab-button-minus-width-padding: 2px;
    --newtab-button-width-padding: calc(var(--toolbarbutton-inner-padding) - var(--newtab-button-minus-width-padding));
    visibility: collapse !important;
    display:none !important;
  }
  #new-tab-button > .toolbarbutton-icon,
  #alltabs-button > .toolbarbutton-badge-stack {
   
    display:none !important;
    padding-left: var(--newtab-button-width-padding) !important;
    padding-right: var(--newtab-button-width-padding) !important;
  }

  #tabbrowser-tabs[haspinnedtabs]:not([positionpinnedtabs])
    > #tabbrowser-arrowscrollbox
    > .tabbrowser-tab[first-visible-unpinned-tab] {
    margin-inline-start: 1px !important;
    visibility: collapse !important;
    display:none !important;
  }

  :root:not([uidensity="touch"]) #tabbrowser-arrowscrollbox {
    --scrollbtn-inner-padding: 1px;
    --scrollbtn-outer-padding: 3px;
    visibility: collapse !important;
    display:none !important;
  }
  #scrollbutton-up {
    padding-left: var(--scrollbtn-inner-padding, 4px) !important; /* Original: 4px */
    visibility: collapse !important;
    display:none !important;
    padding-right: var(--scrollbtn-outer-padding, 4px) !important;
  }
  #scrollbutton-down {
    padding-left: var(--scrollbtn-outer-padding, 4px) !important; /* Original: 4px */
    visibility: collapse !important;
    display:none !important;
    padding-right: var(--scrollbtn-inner-padding, 4px) !important;
  }

  :root:not([uidensity="touch"]) #new-tab-button,
  #alltabs-button {
    --toolbarbutton-outer-padding: 4px; /* Original: 2px*/
    z-index: 9 !important;
    display: block !important;
    position: relative;
  }

  /* Tab - Max Size */
  :root {
    --tab-max-width: 240px;
  }
  .tabbrowser-tab[fadein]:not([pinned]):not([style*="max-width"]) {
    max-width: var(--tab-max-width) !important; /* Original: 225px */
    visibility: collapse !important;
    display:none !important;
  }

  /* neighbouring tabs should "pinch" together */
  .tabbrowser-tab {
    padding-inline: 1px !important;
    visibility: collapse !important;
    display:none !important;
  }

  .tabbrowser-tab:not([last-visible-tab]) {
    margin-inline-end: -0.5px !important;
    visibility: collapse !important;
    display:none !important;
  }

  /*= Tab Bar - Reduce Height, Show more contents ==============================*/
  /* for Extra Drag Space */
  :root {
    --space-above-tabbar: 0px; /* If you want drag space, set to 8px */
     visibility: collapse !important; 
    display:none !important;
  }
  :root[tabsintitlebar][sizemode="normal"] #toolbar-menubar[autohide="true"] {
    height: calc(var(--tab-min-height) + var(--space-above-tabbar));
    visibility: collapse !important;
     display:none !important;
  }
  :root[sizemode="normal"][chromehidden~="menubar"] #TabsToolbar > .toolbar-items,
  :root[sizemode="normal"] #toolbar-menubar[autohide="true"][inactive] + #TabsToolbar > .toolbar-items {
    padding-top: var(--space-above-tabbar) !important;
    visibility: collapse !important; 
    display:none !important;
  }

  /* Toolbar Height */
  :root:not([uidensity="touch"]) #TabsToolbar {
    --toolbarbutton-inner-padding: calc((var(--tab-min-height) - 16px) / 2) 
     visibility: collapse !important; 
     display:none !important;
  }

  .toolbar-items,
  .tabbrowser-tab {
    --tabbar-max-height: 24px;
    max-height: calc(var(--tabbar-max-height) + var(--space-above-tabbar));
  }
  :root[uidensity="compact"] .toolbar-items,
  :root[uidensity="compact"] .tabbrowser-tab {
    --tabbar-max-height: 24px;
    visibility: collapse !important; 
     display:none !important;
  }
  :root[uidensity="touch"] .toolbar-items,
  :root[uidensity="touch"] .tabbrowser-tab {
    --tabbar-max-height: 36px;
     visibility: collapse !important; 
     display:none !important;
  }

  /* Scroll Button - Size Fix */
  :root #tabbrowser-arrowscrollbox {
    --scrollbtn-vertical-padding: 3px;
    --scrollbtn-vertical-border: 2px;
    --scrollbtn-border-radius: 7px;
    visibility: collapse !important;
        display:none !important;
  }
  #scrollbutton-up,
  #scrollbutton-down {
    /* Original: var(--toolbarbutton-inner-padding) calc(var(--toolbarbutton-inner-padding) - 6px) = 9px */
    /* https://github.com/mozilla/gecko-dev/blob/71b1259afd1cdaf41871ae675c2dadb967ea5b34/browser/themes/shared/toolbarbuttons.inc.css#L142 */
    padding-top: var(--scrollbtn-vertical-padding, var(--toolbarbutton-inner-padding)) !important;
    padding-bottom: var(--scrollbtn-vertical-padding, var(--toolbarbutton-inner-padding)) !important;

    /* Original: 4px */
    border-top-width: var(--scrollbtn-vertical-border, 4px) !important;
    border-bottom-width: var(--scrollbtn-vertical-border, 4px) !important;
    /* Original: calc(var(--tab-border-radius) + 4px) = 8px */
    border-radius: var(--scrollbtn-border-radius, calc(var(--tab-border-radius) + 4px)) !important;
  }

  :root[tabsintitlebar]:not([uidensity="compact"]) #toolbar-menubar[autohide="true"] {
    height: calc(
      var(--tab-min-height) - var(--tabs-navbar-shadow-size) - 2px
    ); /* Compact: 28px, Normal: 33px, Touch: 38px */
  }

  /* Pinned Tab - Titlechanged Indicator position fix */
  .tabbrowser-tab:is([image], [pinned]) > .tab-stack > .tab-content[attention]:not([selected="true"]),
  .tabbrowser-tab > .tab-stack > .tab-content[pinned][titlechanged]:not([selected="true"]) {
    /* Original: center bottom calc(6.5px + var(--tabs-navbar-shadow-size)); */
    background-position-y: bottom calc(2.5px + var(--tabs-navbar-shadow-size)) !important;
  }
  :root[uidensity="compact"]
    .tabbrowser-tab:is([image], [pinned])
    > .tab-stack
    > .tab-content[attention]:not([selected="true"]),
  :root[uidensity="compact"] .tabbrowser-tab > .tab-stack > .tab-content[pinned][titlechanged]:not([selected="true"]) {
    /* Original: center bottom calc(6.5px + var(--tabs-navbar-shadow-size)); */
    background-position-y: bottom calc(0.5px + var(--tabs-navbar-shadow-size)) !important;
  }
  :root[uidensity="touch"]
    .tabbrowser-tab:is([image], [pinned])
    > .tab-stack
    > .tab-content[attention]:not([selected="true"]),
  :root[uidensity="touch"] .tabbrowser-tab > .tab-stack > .tab-content[pinned][titlechanged]:not([selected="true"]) {
    /* Original: center bottom calc(6.5px + var(--tabs-navbar-shadow-size)); */
    background-position-y: bottom calc(4.5px + var(--tabs-navbar-shadow-size)) !important;
  }
  /** Tab Bar - Connect to window ***********************************************/
  .tab-background {
    border-radius: var(--tab-border-radius) var(--tab-border-radius) 0px 0px !important;
    margin-bottom: 0px !important;
  }

  .tab-content {
    margin-top: var(--tab-block-margin);
  }

  .tab-stack {
    margin-top: 0px !important;
    margin-bottom: 0px !important;
  }

  
  /* Remove line at Toolbar's top */
  #tabbrowser-tabs {
    visibility: collapse !important;
     display:none !important;
    z-index: 1 !important;
  }
  #tabbrowser-arrowscrollbox[overflowing] .tabbrowser-tab[pinned]:is([visuallyselected], [multiselected]) {
    overflow: hidden;
    visibility: collapse !important;
     display:none !important;
  }

  /** Selected Tab - Color like toolbar *****************************************/
  :root:not(:-moz-lwtheme) {
    /* Fix for windows's system default theme. Using --toolbar-bgcolor fallback */
    --tab-selected-bgcolor: unset !important; /* Original: rgb(255,255,255); */
  }
  #tabbrowser-tabs:not([movingtab])
    > #tabbrowser-arrowscrollbox
    > .tabbrowser-tab
    > .tab-stack
    > .tab-background[selected="true"]:-moz-lwtheme {
    /* Original: linear-gradient(var(--lwt-selected-tab-background-color, transparent), var(--lwt-selected-tab-background-color, transparent)), linear-gradient(var(--toolbar-bgcolor), var(--toolbar-bgcolor)), var(--lwt-header-image, none)
 */
 /* visibility: collapse !important;*/
   /*  display:none !important;*/
    background-image: linear-gradient(transparent, transparent),
      linear-gradient(var(--toolbar-bgcolor), var(--toolbar-bgcolor)), var(--lwt-header-image, none) !important;
  }

  /* Multi Selected Color */
  #tabbrowser-tabs:not([movingtab])
    > #tabbrowser-arrowscrollbox
    > .tabbrowser-tab
    > .tab-stack
    > .tab-background[multiselected]:not([selected]):-moz-lwtheme {
    background-image: linear-gradient(var(--toolbar-bgcolor, transparent), var(--toolbar-bgcolor, transparent)),
      linear-gradient(var(--toolbar-bgcolor), var(--toolbar-bgcolor)), var(--lwt-header-image, none) !important;
  }

  .tab-background[multiselected="true"]:not([selected="true"]) > .tab-loading-burst:not([bursting]) {
    background: color-mix(in srgb, currentColor 65%, transparent);
    opacity: 0.3;
  }
  #TabsToolbar[brighttext]
    .tab-background[multiselected="true"]:not([selected="true"])
    > .tab-loading-burst:not([bursting]) {
    opacity: 0.15;
  }

  /** Selected Tab - Box Shadow *************************************************/
  #TabsToolbar[brighttext]
    #tabbrowser-tabs:not([noshadowfortests])
    .tabbrowser-tab[visuallyselected="true"]:not(:focus)
    > .tab-stack
    > .tab-background:-moz-lwtheme {
    /* Origina: 0 0 1px var(--tab-line-color, rgba(128,128,142,0.9))
       Bright: 0 0 1px var(--tab-line-color, rgba(128,128,142,0.9)), 0 0 4px rgba(128,128,142,0.5) */
    box-shadow: 0 0 1px var(--toolbar-color) !important;
  }
  #TabsToolbar[brighttext]
    #tabbrowser-tabs:not([noshadowfortests])
    .tabbrowser-tab[multiselected]:not([visuallyselected])
    > .tab-stack
    > .tab-background:-moz-lwtheme {
    box-shadow: 0 0 1px color-mix(in srgb, var(--toolbar-color) 80%, transparent) !important;
  }

  /* Pinned Tab - tabbrowser-arrowscrollbox overflowing */
  #tabbrowser-tabs[positionpinnedtabs] > #tabbrowser-arrowscrollbox > .tabbrowser-tab[pinned] {
    z-index: 0 !important;
  }

  /** Selected Tab - Bottom Rounded Corner **************************************/
  #tabbrowser-tabs {
    --tab-corner-rounding: 3px; /* 10px looks about like chromium - 17px looks close to Australis tabs */
    --tab-corner-padding: 0px;
    --tab-corner-position: calc(var(--tab-corner-padding) - var(--tab-corner-rounding));
  }

  :root:not([customizing="true"]) tab[visuallyselected] > stack::before,
  :root:not([customizing="true"]) tab[visuallyselected] > stack::after {
    content: "" !important;

    /* Box */
    display: block !important;
    position: absolute !important;
    z-index: 1 !important;

    /* Shape */
    width: var(--tab-corner-rounding) !important;
    height: 100% !important;

    /* Color */
    fill: var(--toolbar-bgcolor) !important;
    stroke: var(--tab-line-color, var(--tabs-border-color, rgba(128, 128, 142, 0.9))) !important;
    -moz-context-properties: fill, stroke !important;

    /* Image */
    background-size: var(--tab-corner-rounding);
    background-repeat: no-repeat;
    background-position-y: bottom;
  }
  :root:not([customizing="true"]) #TabsToolbar[brighttext] tab[visuallyselected] > stack::before,
  :root:not([customizing="true"]) #TabsToolbar[brighttext] tab[visuallyselected] > stack::after {
    /* As Selected Tab - Box Shadow */
    stroke: var(--toolbar-color) !important;
  }

  tab[visuallyselected] > stack::before {
    left: var(--tab-corner-position) !important;
    background-image: url("./icons/tab-bottom-corner-left.svg");
  }
  tab[visuallyselected] > stack::after {
    left: auto;
    right: var(--tab-corner-position);
    background-image: url("./icons/tab-bottom-corner-right.svg");
  }

  @media (-moz-gtk-csd-available) {
    /* Fill color for GTK */
    :root:not([customizing="true"]):not([lwtheme="true"]) tab[visuallyselected] > stack::before,
    :root:not([customizing="true"]):not([lwtheme="true"]) tab[visuallyselected] > stack::after {
      /* As GTK Toolbar's background-color + backround-image
       * --toolbar-non-lwt-bgcolor: -moz-dialog;
       * --toolbar-non-lwt-bgimage: linear-gradient(rgba(255,255,255,.15), rgba(255,255,255,.15));
       */
      fill: color-mix(in srgb, rgb(255, 255, 255) 15%, -moz-dialog) !important;
      stroke: transparent !important;
    }
    :root:not([customizing="true"]):not([lwtheme="true"])
      #TabsToolbar[brighttext]
      tab[visuallyselected]
      > stack::before,
    :root:not([customizing="true"]):not([lwtheme="true"])
      #TabsToolbar[brighttext]
      tab[visuallyselected]
      > stack::after {
      stroke: transparent !important;
    }
  }

  /** Unselected Tab - Divide line **********************************************/
  #tabbrowser-arrowscrollbox {
    position: absolute;
  }

  .tab-background::before,
  #tabs-newtab-button::before {
    /* Box Model */
    content: "";
    display: block;
    position: absolute;

    /* Position */
    top: 50%;
    transform: translateX(-2.5px) translateY(calc(-50% + 1px));

    /* Bar shape */
    width: 1px;
    height: 20px;

    /* Bar Color */
    opacity: 0;
    background-color: var(--toolbarseparator-color);
  }

  .tabbrowser-tab:not([visuallyselected], [multiselected], :hover, :first-child) .tab-background::before,
  #tabs-newtab-button:not(:hover, [open])::before {
    opacity: var(--tab-separator-opacity);
  }

  #navigator-toolbox:not([movingtab])
    .tabbrowser-tab:is([visuallyselected], [multiselected], :hover)
    + .tabbrowser-tab
    .tab-background::before,
  #navigator-toolbox:not([movingtab])
    .tabbrowser-tab:is([visuallyselected], [multiselected], :hover)
    ~ .tabbrowser-tab[afterhovered]
    .tab-background::before,
  #navigator-toolbox:not([movingtab])
    .tabbrowser-tab[last-visible-tab]:is([visuallyselected], [multiselected], :hover)
    ~ #tabs-newtab-button::before,
  #navigator-toolbox:not([movingtab])
    .tabbrowser-tab[first-visible-unpinned-tab]:is([visuallyselected], [multiselected], :hover)
    .tab-background::before,
  #navigator-toolbox:not([movingtab])
    #tabbrowser-arrowscrollbox[overflowing]
    tab.tabbrowser-tab[first-visible-unpinned-tab]
    .tab-background::before {
    opacity: 0 !important;
  }

  /* Animate */
  @media (prefers-reduced-motion: no-preference) {
    .tab-background::before,
    #tabs-newtab-button::before {
      transition: opacity 0.2s var(--animation-easing-function); /* cubic-bezier(.07, .95, 0, 1) */
    }
  }

  /* Latest Tab & New tab margin */
  #tabbrowser-arrowscrollbox:not([overflowing]) .tabbrowser-tab[last-visible-tab] {
    margin-inline-end: 1px !important;
  }

  /* New tab button - Looks like tab ********************************************/
  #tabs-newtab-button {
    /* Original:
    margin: 0 0 var(--tabs-navbar-shadow-size) !important
    => Can't ovrride style. Therefore, we should approach it by bypass.
    */
    --tabs-navbar-shadow-size: -1px; /* Original: 1px */
    --tabs-navbar-original-shadow-size: 1px;
    --tab-corner-rounding: 4px; /* Hardcorded */

    /* Size */
    -moz-box-align: stretch !important;
    padding-top: var(--tab-block-margin) !important;

    /* Corner Rounding Image */
    --newtab-position: calc((var(--tab-corner-rounding) / 2) * -1);
    background-image: url("./icons/tab-bottom-corner-left.svg"), url("./icons/tab-bottom-corner-right.svg");
    background-repeat: no-repeat;
    background-position: left var(--newtab-position) bottom var(--tabs-navbar-original-shadow-size),
      right var(--newtab-position) bottom var(--tabs-navbar-original-shadow-size);
    background-size: var(--tab-corner-rounding);

    /* Corner Rounding Color */
    fill: transparent !important;
    -moz-context-properties: fill !important;
  }

  /* Corner Rounding Color */
  #tabs-newtab-button:hover {
    fill: var(--toolbarbutton-hover-background) !important;
  }
  #tabs-newtab-button:hover:active {
    fill: var(--toolbarbutton-active-background) !important;
  }
  @media (-moz-windows-accent-color-in-titlebar) {
    :root[tabsintitlebar]:not(:-moz-window-inactive, :-moz-lwtheme) #tabs-newtab-button:hover,
    :root[tabsintitlebar][lwt-default-theme-in-dark-mode]:not(:-moz-window-inactive) #tabs-newtab-button:hover {
      fill: color-mix(
        in srgb,
        -moz-accent-color-foreground 10%,
        transparent
      ) !important; /* Hardcorded for compatibility */
    }
    :root[tabsintitlebar]:not(:-moz-window-inactive, :-moz-lwtheme) #tabs-newtab-button:hover:active,
    :root[tabsintitlebar][lwt-default-theme-in-dark-mode]:not(:-moz-window-inactive) #tabs-newtab-button:hover:active {
      fill: color-mix(
        in srgb,
        -moz-accent-color-foreground 15%,
        transparent
      ) !important; /* Hardcorded for compatibility */
    }
  }

  /* '+'Icon */
  #tabs-newtab-button .toolbarbutton-icon {
    border-radius: var(--tab-border-radius) var(--tab-border-radius) 0 0 !important; /* Original: var(--tab-border-radius) */

    padding: calc(var(--toolbarbutton-inner-padding) - (var(--tab-block-margin) / 4)) var(--toolbarbutton-inner-padding)
      calc(var(--toolbarbutton-inner-padding) + (var(--tab-block-margin) / 4) + var(--tabs-navbar-original-shadow-size)) !important;
    -moz-context-properties: fill, fill-opacity;
    fill: var(--toolbarbutton-icon-fill);
    fill-opacity: var(--toolbarbutton-icon-fill-opacity);
  }

  /* Unloaded Tab - Contents Opacity ********************************************/
  #tabbrowser-tabs .tabbrowser-tab[pending] .tab-content {
    opacity: 0.7;
  }

  /** Clipped tabs - Letters cleary *********************************************/
  #tabbrowser-tabs[closebuttons="activetab"] .tab-content:not([pinned]) {
    padding-inline-start: 8px !important;
  }

  #tabbrowser-tabs[closebuttons="activetab"] .tab-label-container[textoverflow][labeldirection="ltr"]:not([pinned]),
  #tabbrowser-tabs[closebuttons="activetab"]
    .tab-label-container[textoverflow]:not([labeldirection]):-moz-locale-dir(ltr):not([pinned]) {
    mask-image: linear-gradient(to right, black 70%, transparent) !important;
  }

  #tabbrowser-tabs[closebuttons="activetab"] .tab-label-container[textoverflow][labeldirection="rtl"]:not([pinned]),
  #tabbrowser-tabs[closebuttons="activetab"]
    .tab-label-container[textoverflow]:not([labeldirection]):-moz-locale-dir(rtl):not([pinned]) {
    mask-image: linear-gradient(to left, black 70%, transparent) !important;
  }

  /** Clipped tabs - Show close button at hover ****************&&***************/
  #tabbrowser-tabs[closebuttons="activetab"]
    > #tabbrowser-arrowscrollbox
    > .tabbrowser-tab:not([pinned])
    > .tab-stack
    > .tab-content
    > .tab-close-button:not([selected="true"]) {
    display: -moz-inline-box !important;
    display: none !important;
  }

  #tabbrowser-tabs[closebuttons="activetab"] .tabbrowser-tab:not([visuallyselected]) .tab-close-button {
    /* visibility: collapse !important;*/
    opacity: 0;
    display: none !important;
  }
  #tabbrowser-tabs[closebuttons="activetab"] .tabbrowser-tab:hover .tab-close-button {
    visibility: visible !important;
    display: none !important;

    opacity: 1;
  }

  /* Animate */
  @media (prefers-reduced-motion: no-preference) {
    /* Fade out */
    #tabbrowser-tabs[closebuttons="activetab"] .tabbrowser-tab:not([visuallyselected]) .tab-close-button {
      transition: opacity 0.1s var(--animation-easing-function) !important;
      display: none !important;
    }

    /* Fade in */
    #tabbrowser-tabs[closebuttons="activetab"] .tabbrowser-tab:hover .tab-close-button {
      transition: opacity 0.25s var(--animation-easing-function) !important;
      display: none !important;
    }
  }

  /* Closed Button's icon thicker */
  .tabbrowser-tab .tab-content > .close-icon {
    display: none !important;

    list-style-image: url("./icons/dismiss-filled.svg") !important;
  }

  /* Closed Button's icon larger */
  .tab-close-button {
    padding: 6px !important; /* Original: 7px */
    display: none !important;
  }
  .tabbrowser-tab:not(:hover) > .tab-stack > .tab-content > .tab-close-button {
    padding-inline-start: 1px !important; /* Original: 0px */
    width: 19px !important; /* Original: 17px */
    display: none !important;
  }

  /* Closed Button's padding reduce */
  #tabbrowser-tabs[closebuttons="activetab"] .tab-content > .tab-close-button {
    margin-inline-end: calc(
      (var(--inline-tab-padding) / -2) + 2px
    ) !important; /* Original: calc(var(--inline-tab-padding) / -2)*/
    padding: 4px !important; /* Original: 7px */
    width: 20px !important; /* Original: 24px */
    height: 20px !important; /* Original: 24px */
    display: none !important;
  }
  #tabbrowser-tabs[closebuttons="activetab"]
    .tabbrowser-tab:not(:hover)
    > .tab-stack
    > .tab-content
    > .tab-close-button {
    padding-inline-start: 3px !important; /* Original: 0px */
    width: 19px !important; /* Redefine from 19px !important, Original: 17px = (width - padding)  */
    display: none !important;
  }

  /** Sound Tab - Hide Label ****************************************************/
  .tab-secondary-label:is([soundplaying], [muted], [activemedia-blocked], [pictureinpicture]) {
    display: none !important;
  }

  /** Sound Tab - Show with Favicons ********************************************/
  /* Makes the favicons always visible (also on hover) */
  .tab-icon-image:not([pinned]) {
    opacity: 1 !important;
    display: none !important;
  }

  /* Makes the speaker icon to always appear if the tab is playing (not only on hover) */
  .tab-icon-overlay:not([crashed]),
  .tab-icon-overlay[pinned][crashed][selected] {
    /* Position */
    top: 0 !important;
    inset-inline-end: -9px !important;
    z-index: 1 !important;
    transform: translateX(-0.5px) translateY(-6px);

    /* Shape */
    padding: 1.5px !important;
    border-radius: 10px !important;
    width: 17px !important;
    display: none !important;

    height: 17px !important;
  }
  .tab-icon-overlay:not([sharing], [crashed]):is([soundplaying], [muted], [activemedia-blocked]) {
    /* Color */
    color: currentColor !important;
    stroke: transparent !important;
    background: transparent !important;
    fill-opacity: 0.8 !important;
    display: none !important;

    opacity: 1 !important;
  }
  .tabbrowser-tab:not([pinned], [sharing], [crashed]):is([soundplaying], [muted], [activemedia-blocked]) .tab-label {
    transform: translateX(4px);
  }

  /* Animate */
  @media (prefers-reduced-motion: no-preference) {
    .tab-icon-overlay:not([crashed]),
    .tab-icon-overlay[pinned][crashed][selected] {
      transition: 0.1s var(--animation-easing-function);
      display: none !important;
    }

    .tab-label-container > .tab-label {
      transition: transform 0.25s var(--animation-easing-function);
      display: none !important;
    }
  }

  /* None exist favicon - Size bigger */
  .tabbrowser-tab:not([image]) .tab-icon-overlay:not([pinned], [sharing], [crashed]) {
    transform: translateX(-0.5px) translateY(-1px);
    inset-inline-end: 0 !important;
    margin-inline-end: 0 !important;
    padding: 0 !important;
    display: none !important;
  }
  .tabbrowser-tab:not([image]):is([soundplaying], [muted], [activemedia-blocked]) .tab-icon-image:not([pinned]) {
    opacity: 0 !important; /* Favicon hidden */
  }
  .tabbrowser-tab:not([image]):not([pinned], [sharing], [crashed]):is([soundplaying], [muted], [activemedia-blocked])
    .tab-label {
    transform: translateX(3px);
  }

  /* Busy - Show */
  .tab-throbber[busy],
  .tab-icon-pending[busy] {
    opacity: 1 !important;
  }

  /* Busy - Overlay Position */
  .tabbrowser-tab:not([pinned])[busy] .tab-icon-overlay:is([soundplaying], [muted], [activemedia-blocked]) {
    transform: translateX(-0.5px) translateY(-6px);
    display: none !important;
  }
  .tabbrowser-tab:not([image]) .tab-icon-overlay:not([pinned], [sharing], [crashed])[busy] {
    inset-inline-end: -9px !important;
    margin-inline-end: 9.5px !important;
    padding: 1.5px !important;
    display: none !important;
  }

  /* Hover */
  .tab-icon-overlay:not([crashed])[soundplaying]:hover,
  .tab-icon-overlay:not([crashed])[muted]:hover,
  .tab-icon-overlay:not([crashed])[activemedia-blocked]:hover {
    color: var(--toolbar-bgcolor, white) !important;
    stroke: var(--lwt-tab-text, var(--toolbar-color)) !important;
    background-color: var(--lwt-tab-text, var(--toolbar-color)) !important;
    fill-opacity: 0.95 !important;
  }

  #TabsToolbar[brighttext] .tab-icon-overlay:not([crashed])[soundplaying]:hover,
  #TabsToolbar[brighttext] .tab-icon-overlay:not([crashed])[muted]:hover,
  #TabsToolbar[brighttext] .tab-icon-overlay:not([crashed])[activemedia-blocked]:hover {
    color: var(--toolbar-bgcolor, black) !important;
    display: none !important;
  }

  .tabbrowser-tab:not([image]) .tab-icon-overlay:not([pinned], [sharing], [crashed]):hover {
    padding: 0 !important;
    display: none !important;
  }

  /** PictureInPicture Tab - Show PIP Icon **************************************/
  #tabbrowser-tabs:not([closebuttons="activetab"]) .tabbrowser-tab[pictureinpicture]:not([pinned]) .tab-content::after,
  #tabbrowser-tabs[closebuttons="activetab"]
    .tabbrowser-tab[pictureinpicture]:not([pinned], :hover)
    .tab-content::after {
    content: "";
    display: none !important;
  }
  .tabbrowser-tab[pictureinpicture]:not([pinned]) .tab-content::after {
    /* Shape */
    /* display: -moz-inline-box !important; */
    width: 14px;
    height: 14px;
    background-size: 14px;
    -moz-box-ordinal-group: 1 !important;

    /* Color */
    fill: currentColor;
    opacity: 0.8;
    -moz-context-properties: fill;
    display: none !important;

    /* Icon */
    background-image: url("chrome://global/skin/media/picture-in-picture-open.svg");
  }
  .tabbrowser-tab[pictureinpicture]:not([pinned])[selected] .tab-content::after {
    opacity: 0.95;
    display: none !important;
  }

  /* Close Button's position */
  .tabbrowser-tab[pictureinpicture]:not([pinned]) .tab-close-button {
    -moz-box-ordinal-group: 2 !important;
    display: none !important;
  }
  #tabbrowser-tabs:not([closebuttons="activetab"]) .tabbrowser-tab[pictureinpicture]:not([pinned]) .tab-close-button {
    margin-left: 7px !important;
    display: none !important;
  }
  #tabbrowser-tabs:not([closebuttons="activetab"])
    .tabbrowser-tab[pictureinpicture]:not([pinned]):hover
    .tab-close-button {
    margin-left: 2px !important;
    display: none !important;
  }

  /** Container Tab - Color line at icon's bottom *******************************/
  .tab-context-line {
    display: none !important;
  }

  .tab-content:not([titlechanged])::before {
    /* Box Model */
    content: "";
    display: block;
    position: absolute !important;
    transform: translate(9px, 12px) !important;
    display: none !important;

    /* Shape */
    border-bottom: 2px solid var(--identity-icon-color);
    width: 25%;
    opacity: 0.75;
  }
  .tabbrowser-tab[visuallyselected]:not([pinned]) .tab-content::before {
    width: calc(100% - 30px);
    opacity: 1;
    display: none !important;
  }
  #tabbrowser-tabs[closebuttons="activetab"] .tabbrowser-tab[visuallyselected]:not([pinned]) .tab-content::before {
    width: calc(100% - 33px);
    display: none !important;
  }

  /* Animate */
  @media (prefers-reduced-motion: no-preference) {
    .tab-content:not([titlechanged])::before {
      transition: 0.15s var(--animation-easing-function) !important;
      transition-property: width, opacity;
    }
  }

  /* Pinned Tab */
  .tabbrowser-tab[pinned] .tab-content::before {
    transform: translateY(12px) !important;
    width: 16px;
  }

  /* Pinned Tab - Titlechanged Indicator override */
  .tabbrowser-tab:is([image], [pinned])[usercontextid] > .tab-stack > .tab-content[attention]:not([selected="true"]),
  .tabbrowser-tab[usercontextid] > .tab-stack > .tab-content[pinned][titlechanged]:not([selected="true"]) {
    /* Original: radial-gradient(circle, var(--attention-icon-color), var(--attention-icon-color) 2px, transparent 2px); */
    --dotted-identity-image: radial-gradient(
      circle,
      var(--identity-icon-color),
      var(--identity-icon-color) 2px,
      transparent 2px
    );
    background-image: var(--dotted-identity-image), var(--dotted-identity-image), var(--dotted-identity-image) !important;
    background-position-x: 32%, 50%, 70% !important;
    display: none !important;
  }
  :root[uidensity="compact"]
    .tabbrowser-tab:is([image], [pinned])[usercontextid]
    > .tab-stack
    > .tab-content[attention]:not([selected="true"]),
  :root[uidensity="compact"]
    .tabbrowser-tab[usercontextid]
    > .tab-stack
    > .tab-content[pinned][titlechanged]:not([selected="true"]) {
    /* Original: radial-gradient(circle, var(--attention-icon-color), var(--attention-icon-color) 2px, transparent 2px); */
    background-position-x: 30%, 50%, 70% !important;
    display: none !important;
  }

  /* Pinned Tab - Titlechanged & soundplaying */
  .tabbrowser-tab:is([image], [pinned])[usercontextid]:is([soundplaying], [muted], [activemedia-blocked])
    > .tab-stack
    > .tab-content[attention]:not([selected="true"]),
  .tabbrowser-tab[usercontextid]:is([soundplaying], [muted], [activemedia-blocked])
    > .tab-stack
    > .tab-content[pinned][titlechanged]:not([selected="true"]) {
    background-position-x: calc(32% - 1px), calc(50% - 1px), calc(70% - 1px) !important;
    display: none !important;
  }
  :root[uidensity="compact"]
    .tabbrowser-tab:is([image], [pinned])[usercontextid]:is([soundplaying], [muted], [activemedia-blocked])
    > .tab-stack
    > .tab-content[attention]:not([selected="true"]),
  :root[uidensity="compact"]
    .tabbrowser-tab[usercontextid]:is([soundplaying], [muted], [activemedia-blocked])
    > .tab-stack
    > .tab-content[pinned][titlechanged]:not([selected="true"]) {
    background-position-x: calc(30% - 1px), calc(50% - 1px), calc(70% - 1px) !important;
  }

  /** Crashed Tab - Don't show Favicons *****************************************/
  .tab-icon-image[crashed] {
    display: none !important;
  }

  /** Library - Icons Replace ***************************************************/
  /*= Standard Folder - More Visible ===========================================*/
  /* on Toolbar and Menus */
  :-moz-any(#PlacesToolbar, #BMB_bookmarksPopup, #bookmarksMenu) .bookmark-item[container="true"]:not([query="true"], [tagContainer], [dayContainer]),
  /* in Sidebar, Library, Add/Edit Bookmark dialog */
  /* https://github.com/rillian/firefox/blob/1f88437d263f56bdede4f20f69ba9c7b62f57001/layout/style/nsCSSAnonBoxList.h#L85-L98 */
  /* Need to overide!!, can not use :not() */
  :-moz-any(#bookmarks-view, #historyTree, #editBMPanel_folderTree, #placesList, #placeContent) treechildren::-moz-tree-image(title, container),
  #editBMPanel_folderMenuList:not([selectedGuid="toolbar_____"], [selectedGuid="menu________"]),
  #editBMPanel_folderMenuList .folder-icon:not([id]),
  /* Download Popup */
  .downloadIconShow > .button-box > .button-icon {
    list-style-image: url("./icons/folder.svg") !important;
  }

  /* Standard Folder - Open */
  :-moz-any(#PlacesToolbar, #BMB_bookmarksPopup, #bookmarksMenu)
    .bookmark-item[container="true"]:not([query="true"], [tagContainer], [dayContainer])[open="true"],
  :-moz-any(#bookmarks-view, #historyTree, #editBMPanel_folderTree, #placesList, #placeContent)
    treechildren::-moz-tree-image(title, container, open) {
    list-style-image: url("./icons/folder-open.svg") !important;
  }

  /*= Other Folder - Inbox Icon ================================================*/
  /* on Menus */
  #PlacesToolbar #OtherBookmarks,
  #BMB_bookmarksPopup #BMB_unsortedBookmarks,
  #bookmarksMenuPopup #menu_unsortedBookmarks,
  /* Other Bookmarks -- in Sidebar, Library, Add/Edit Bookmark dialog */
  :-moz-any(#bookmarks-view, #editBMPanel_folderTree, #placesList, #placeContent) treechildren::-moz-tree-image(container, OrganizerQuery_UnfiledBookmarks),
  :-moz-any(#bookmarks-view, #editBMPanel_folderTree, #placesList, #placeContent) treechildren::-moz-tree-image(container, queryFolder_unfiled_____),
  #editBMPanel_unfiledRootItem,
  #editBMPanel_folderMenuList[selectedGuid="unfiled_____"] {
    list-style-image: url("./icons/mail-inbox-all.svg") !important;
  }

  /* Other Folder - Open */
  #PlacesToolbar #OtherBookmarks[open="true"],
  #BMB_bookmarksPopup #BMB_unsortedBookmarks[open="true"],
  #bookmarksMenuPopup #menu_unsortedBookmarks[open="true"],
  :-moz-any(#bookmarks-view, #editBMPanel_folderTree, #placesList, #placeContent)
    treechildren::-moz-tree-image(container, open, OrganizerQuery_UnfiledBookmarks),
  :-moz-any(#bookmarks-view, #editBMPanel_folderTree, #placesList, #placeContent)
    treechildren::-moz-tree-image(container, open, queryFolder_unfiled_____) {
    list-style-image: url("./icons/mail-inbox.svg") !important;
  }

  /*= Default Icon - Overide ===================================================*/
  /* https://github.com/mozilla/gecko-dev/blob/master/browser/themes/shared/places/tree-icons.css */

  /* Query */
  :-moz-any(#historyTree, #placesList, #placeContent) treechildren::-moz-tree-image(title, query) {
    list-style-image: url("chrome://browser/skin/places/folder-smart.svg") !important;
  }

  /* History */
  :-moz-any(#historyTree, #placesList, #placeContent) treechildren::-moz-tree-image(title, query, dayContainer),
  :-moz-any(#historyTree, #placesList, #placeContent)
    treechildren::-moz-tree-image(query, OrganizerQuery_history____v) {
    list-style-image: url("chrome://browser/skin/history.svg") !important;
  }

  /* Downloads */
  :-moz-any(#placesList, #placeContent) treechildren::-moz-tree-image(query, OrganizerQuery_downloads__v) {
    list-style-image: url("chrome://browser/skin/downloads/downloads.svg") !important;
  }

  /* Tag */
  :-moz-any(#placesList, #placeContent) treechildren::-moz-tree-image(title, query, tagContainer),
  :-moz-any(#placesList, #placeContent) treechildren::-moz-tree-image(query, OrganizerQuery_tags_______v) {
    list-style-image: url("chrome://browser/skin/places/tag.svg") !important;
  }

  /* Boomark */
  :-moz-any(#placesList, #placeContent) treechildren::-moz-tree-image(query, OrganizerQuery_allbms_____v) {
    list-style-image: url("chrome://browser/skin/bookmark.svg") !important;
  }

  /* Bookmark Toolbar */
  #BMB_bookmarksPopup #BMB_bookmarksToolbar,       /* Original: Default folder icon */
  #bookmarksMenuPopup #bookmarksToolbarFolderMenu, /* Original: Default folder icon */
  :-moz-any(#bookmarks-view, #editBMPanel_folderTree, #placesList, #placeContent) treechildren::-moz-tree-image(container, queryFolder_toolbar_____) {
    list-style-image: url("chrome://browser/skin/places/bookmarksToolbar.svg") !important;
  }

  /* Bookmark Menu */
  :-moz-any(#bookmarks-view, #editBMPanel_folderTree, #placesList, #placeContent)
    treechildren::-moz-tree-image(container, queryFolder_menu________) {
    list-style-image: url("chrome://browser/skin/places/bookmarksMenu.svg") !important;
  }

  #tabbrowser-tab,
  #tabbrowser-tabs,
  #TabsToolbar,
  .tabbrowser-tab,
  .tab-context-line {
    display: none !important;
    /* visibility: collapse !important;*/
  }
}
