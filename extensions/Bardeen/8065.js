"use strict";(self.webpackChunkbardeen_browser_extension=self.webpackChunkbardeen_browser_extension||[]).push([[8065],{78192:(e,t,r)=>{r.d(t,{c:()=>n,$:()=>s});const n="=";var s;!function(e){e.Annotation="[[Annotation]]",e.Group="[[Group]]",e.Internal="[[Internal]]",e.Boolean="boolean",e.Date="date",e.DateRange="date_range",e.Duration="duration",e.ExpressionOperator="expressionOperator",e.Integer="integer",e.Number="number",e.Object="object",e.String="string",e.Type="type",e.Nothing="nothing"}(s||(s={}))},33407:(e,t,r)=>{r.d(t,{g:()=>a}),r(85562),r(31530);var n=r(62632),s=r(72534),o=r(69786),i=function(e,t,r,n){return new(r||(r=Promise))((function(s,o){function i(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,a)}c((n=n.apply(e,t||[])).next())}))};function a(e,t){class r extends s.b{static isValidValue(e){return t.some((t=>t.value===e))}static createWithValue(t){if(!r.isValidValue(t))throw o._.from({typeName:e.typeName,value:t});return r.createWithID(t)}getValue(){return this.getId()}getDisplayDetails(){const r=this.getValue(),n=t.find((e=>e.value===r));if(!n)throw o._.from({typeName:e.typeName,value:r});return n}}return r.typeName=e.typeName,r.Annotation=class{constructor(){this.type=r}getDefaultAnnotation(){return i(this,void 0,void 0,(function*(){return{description:e.description||"An enumeration of choices",icon:e.defaultIcon}}))}getInstanceAnnotation(e){return i(this,void 0,void 0,(function*(){const t=e.getDisplayDetails();return{label:t.label||t.value,icon:t.icon}}))}getDefaultValueSuggestions(){return i(this,void 0,void 0,(function*(){return t.map((e=>r.createWithValue(e.value)))}))}},r.Renderer=class{constructor(e){this.dataTypes=[r],this.struct=n.i.Scalar,this.ctx=e}render(e){return i(this,void 0,void 0,(function*(){const t=e[0];if(!t)return null;const r=t.getDisplayDetails();return{contextIcon:r.icon,textContent:[{type:"plaintext",body:r.label||r.value}]}}))}},r}},60917:(e,t,r)=>{r.d(t,{_:()=>n});const n=(0,r(63659).n)({clientErrorCode:"NotInDEnumError",message:"Invalid enum value.",userHint:"You tried to create an enum with a non-accepted value.",trackError:"default",arguments:[]})},69786:(e,t,r)=>{r.d(t,{H:()=>n.H,_:()=>s._});var n=r(77351),s=r(60917)},74887:(e,t,r)=>{r.d(t,{k:()=>o});var n=r(72534),s=r(50881);class o extends n.b{static requireMime(e){const t=Array.isArray(e)?e:[e];return e=>{if(!("mimeType"in e))return!1;const r=String(e.mimeType);return!!t.some((e=>{if(e.endsWith("/")){if(r.startsWith(e))return!0}else if(r===e)return!0;return!1}))}}getBuffer(e){return Promise.reject(s.zk.from({originalError:"Base IDBlob has no means for yielding a buffer",component:"IDBlob"}))}}o.typeName="blob"},35068:(e,t,r)=>{r.d(t,{z:()=>i});var n=r(10204),s=r.n(n),o=r(74887);r(72534);class i extends o.k{static createWithBuffer(e,t,r){const n=s().buf(new Uint8Array(e)).toString(16).padStart(8,"0");return i.createWithID(n,Object.assign(Object.assign({},r),{mimeType:t||"text/plain",buffer:e}))}getBuffer(e){return Promise.resolve(this.buffer)}serialize(){const e=super.serialize();return e.buffer=new Uint8Array(this.buffer),e}}i.typeName="blob.buffered"},32906:(e,t,r)=>{r.d(t,{k:()=>o});var n=r(74887),s=r(50881);class o extends n.k{getBuffer(e){var t;return e.network.fetch(this.url,{method:this.method,headers:this.headers,signal:null===(t=e.prog)||void 0===t?void 0:t.getAbortSignal()}).then((e=>e.ok?e.arrayBuffer():Promise.reject(s.GF.from({originalError:e.statusText,httpStatus:e.status,url:this.url}))))}serialize(){const e=super.serialize();return e.url=this.url,e.headers=this.headers,e.method=this.method,e}}o.typeName="blob.http"},59803:(e,t,r)=>{r.d(t,{l:()=>s});var n=r(74887);class s extends n.k{getBuffer(e){return this.provider.getBuffer(e)}serialize(){throw new TypeError("A provided IDBlob cannot be serialized")}}s.typeName="blob.provided"},77963:(e,t,r)=>{r.d(t,{D:()=>a});var n=r(10204),s=r.n(n),o=r(74887),i=r(28265);r(72534);class a extends o.k{static createWithText(e,t,r){const n=(new i.p).encode(e),o=s().buf(new Uint8Array(n)).toString(16).padStart(8,"0");return a.createWithID(o,Object.assign(Object.assign({},r),{mimeType:t||"text/plain",text:e}))}getBuffer(e){return Promise.resolve((new i.p).encode(this.text))}toString(){return this.text}serialize(){const e=super.serialize();return e.text=this.text,e}}a.typeName="blob.text"},88721:(e,t,r)=>{r.d(t,{b:()=>s});var n=r(77963);class s extends n.D{static fromURL(e,t){const r=e.toString();return this.createWithID(r,Object.assign(Object.assign({},t),{mimeType:"text/x-url",text:r}))}}s.typeName="link"},62835:(e,t,r)=>{r.d(t,{A:()=>s});var n=r(72534);class s extends n.b{}s.typeName="email"},70158:(e,t,r)=>{r.d(t,{t:()=>s});var n=r(72524);class s extends n.u{constructor(){super(...arguments),this.doNotReply=!1,this.mailingList=!1}}s.typeName="emailaddress",s.typeDesc="An e-mail address"},41023:(e,t,r)=>{r.d(t,{I:()=>s});var n=r(22313);class s extends n.KO{}s.typeName="email.attachment"},99595:(e,t,r)=>{r.d(t,{E:()=>s});var n=r(72534);class s extends n.b{toString(){return this.name}}s.typeName="email.label"},90341:(e,t,r)=>{r.d(t,{n:()=>i});var n=r(49875),s=r(62835),o=r(41023);class i extends((0,n.P)(s.A,o.I)){}i.typeName="email-attachment"},11468:(e,t,r)=>{r.d(t,{l:()=>i});var n=r(49875),s=r(62835),o=r(99595);class i extends((0,n.P)(s.A,o.E)){}i.typeName="email-label"},20180:(e,t,r)=>{r.d(t,{L:()=>i});var n=r(49875),s=r(46163),o=r(34894);class i extends((0,n.P)(o.E,s.u5)){}i.typeName="event-participant"},34044:(e,t,r)=>{r.d(t,{L:()=>n.L});var n=r(20180)},55588:(e,t,r)=>{r.d(t,{N:()=>s});var n=r(72534);r(71);class s extends n.b{}s.typeName="fsnode"},2214:(e,t,r)=>{r.d(t,{K:()=>i});var n=r(83907),s=r(49275),o=r(55588);class i extends((0,n.JM)(s.ky,o.N)){}i.typeName="idfile"},28186:(e,t,r)=>{r.d(t,{O:()=>i});var n=r(83907),s=r(49275),o=r(55588);class i extends((0,n.JM)(s.zi,o.N)){}i.typeName="file.buffered"},27522:(e,t,r)=>{r.d(t,{K:()=>i});var n=r(83907),s=r(49275),o=r(55588);class i extends((0,n.JM)(s.kU,o.N)){}i.typeName="file.http"},28353:(e,t,r)=>{r.d(t,{T:()=>i});var n=r(83907),s=r(49275),o=r(55588);class i extends((0,n.JM)(s.DV,o.N)){}i.typeName="file.text"},81676:(e,t,r)=>{r.d(t,{o:()=>s});var n=r(72534);class s extends n.b{}s.typeName="file_user"},33867:(e,t,r)=>{r.d(t,{Q:()=>s});var n=r(27522);class s extends n.K{}s.typeName="file.media.http"},70836:(e,t,r)=>{r.d(t,{w:()=>o});var n=r(49875),s=r(55588);class o extends((0,n.P)(s.N,s.N)){}o.typeName="file-child"},45436:(e,t,r)=>{r.d(t,{z:()=>i});var n=r(49875),s=r(81676),o=r(55588);class i extends((0,n.P)(o.N,s.o)){constructor(){super(...arguments),this.canWrite=!0,this.canCreate=!0,this.canDelete=!0}}i.typeName="file-collaborator"},1780:(e,t,r)=>{r.d(t,{$:()=>i});var n=r(49875),s=r(81676),o=r(55588);class i extends((0,n.P)(o.N,s.o)){}i.typeName="file-creator"},13774:(e,t,r)=>{r.d(t,{z:()=>i});var n=r(49875),s=r(81676),o=r(55588);class i extends((0,n.P)(o.N,s.o)){}i.typeName="file-user"},55096:(e,t,r)=>{r.d(t,{wc:()=>n.w,zh:()=>s.z,zW:()=>o.z,$H:()=>i.$});var n=r(70836),s=r(45436),o=r(13774),i=r(1780)},27009:(e,t,r)=>{r.d(t,{x:()=>s});var n=r(15001);class s extends n.O2{}s.typeName="action"},27093:(e,t,r)=>{r.d(t,{n:()=>n});const n=(0,r(33407).g)({typeName:"bardeen.partition.strategy",description:"Selects how to process the condition expression and how to invoke the truthy / falsy branches"},[{value:"some",label:"Run YES if at least one item matches the condition"},{value:"every",label:"Run YES if all items match the condition"},{value:"partition",label:"Run both YES and NO, with the respective portion of items"}])},87992:(e,t,r)=>{r.d(t,{x:()=>n.x,n:()=>s.n});var n=r(27009),s=r(27093)},58750:(e,t,r)=>{r.d(t,{U:()=>s});var n=r(72534);class s extends n.b{}s.typeName="person"},72524:(e,t,r)=>{r.d(t,{u:()=>s});var n=r(72534);class s extends n.b{}s.typeName="personid"},20734:(e,t,r)=>{r.d(t,{R:()=>a});var n=r(73880),s=r.n(n),o=r(72524),i=r(94834);class a extends o.u{static createParsingPhoneNumber(e,t){return r=this,n=void 0,c=function*(){const r=t||(yield(0,i.g)()),n=new(s())(e,r);let o="",c="";return n.isValid()&&(o=n.getRegionCode(),c=n.getNumber("international")),a.createWithID(e,{country:o,international:c,raw:e})},new((o=void 0)||(o=Promise))((function(e,t){function s(e){try{a(c.next(e))}catch(e){t(e)}}function i(e){try{a(c.throw(e))}catch(e){t(e)}}function a(t){var r;t.done?e(t.value):(r=t.value,r instanceof o?r:new o((function(e){e(r)}))).then(s,i)}a((c=c.apply(r,n||[])).next())}));var r,n,o,c}toString(){return this.international?this.international:this.raw}}a.typeName="phone"},46163:(e,t,r)=>{r.d(t,{UT:()=>n.U,u5:()=>s.u,Rz:()=>o.R,AY:()=>i.A});var n=r(58750),s=r(72524),o=r(20734),i=r(90865)},81184:(e,t,r)=>{r.d(t,{A:()=>i});var n=r(49875),s=r(58750),o=r(72524);class i extends((0,n.P)(s.U,o.u)){}i.typeName="identifiedby"},90865:(e,t,r)=>{r.d(t,{A:()=>n.A});var n=r(81184)},14507:(e,t,r)=>{r.d(t,{a:()=>s});var n=r(15001);class s extends n.O2{}s.typeName="core.numidex"},86787:(e,t,r)=>{r.d(t,{a:()=>s});var n=r(15001);class s extends n.O2{}s.typeName="core.sortorder"},69274:(e,t,r)=>{r.d(t,{z:()=>n.a,a:()=>s.a});var n=r(86787),s=r(14507)},66743:(e,t,r)=>{r.d(t,{Z:()=>i});var n=r(60877),s=r(55795),o=r(34833);class i extends n.v{constructor(){super(...arguments),this.rootArray=!0}static fromJSON(e){const t=o.b.fromPrimitiveObjects(e);return Array.isArray(e)?i.create({data:e.map((e=>s.A.fromObjectWithSchema(e,t))),rootArray:!0,schema:t}):i.create({data:[s.A.fromObjectWithSchema(e,t)],rootArray:!1,schema:t})}static fromTabularData(e){return i.create({data:e.data,schema:e.schema,rootArray:!1})}toJSON(){return this.data.length?this.data.length>1?this.data.map((e=>a(e))):1===this.data.length?a(this.data[0]):void 0:null}}function a(e){const t={};if(e.records)for(const r in e.records){const n=e.records[r];void 0!==n&&(t[r]=n)}return t}i.typeName="core.data.json"},64306:(e,t,r)=>{r.d(t,{n:()=>s});var n=r(15001);class s extends n.O2{}s.typeName="core.table.primitive"},60877:(e,t,r)=>{r.d(t,{v:()=>h});var n=r(15001),s=r(64306),o=r(55795),i=r(34833),a=r(75580),c=r(30577),u=r(62632),d=function(e,t,r,n){return new(r||(r=Promise))((function(s,o){function i(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,a)}c((n=n.apply(e,t||[])).next())}))};class h extends n.O2{static reflectSchemaFields(e,t){return d(this,void 0,void 0,(function*(){const r=yield e.getCommandArgumentValue(t,h);if(r[0]&&r[0].schema)return r[0].schema.fields;const n=yield e.getCommandArgumentTypes(t);if(n[0]){const e=n[0].getConfigOptions();if(e)return e.schema.fields.map((e=>{const{_types:t}=e,r=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]])}return r}(e,["_types"]);return a.j.create(r)}))}return[]}))}static fromObject(e){const t=i.b.fromPrimitiveObjects(e);return h.create({schema:t,data:[o.A.fromObjectWithSchema(e,t)]})}static fromObjects(e){const t=i.b.fromPrimitiveObjects(e);return h.create({schema:t,data:e.map((e=>o.A.fromObjectWithSchema(e,t)))})}static withSchema(e,t){var r;const n=0===e.fields.length;return h.withConfigOptions({schema:e,editable:null!==(r=null==t?void 0:t.editable)&&void 0!==r?r:n,sourceIcon:null==t?void 0:t.sourceIcon,sourceName:null==t?void 0:t.sourceName})}exportPrimitiveTable(e){return d(this,void 0,void 0,(function*(){const t=[];for(const r of this.data){if(null==r.records)continue;const n={};for(const t in r.records)n[t]=yield e.getStringFromValue(r.records[t]);t.push({id:r.id,records:n})}return s.n.create({data:t,schema:this.schema})}))}static applyMapping(e,t){var r;const n=null===(r=null==e?void 0:e.schema)||void 0===r?void 0:r.fields.reduce(((e,r)=>{var n;const s=t.find((e=>e.original===r.name));return s?e.concat(a.j.create({name:s.renamed,editable:r.editable,title:null!==(n=r.title)&&void 0!==n?n:r.name,type:r.type})):e}),[]),s=null==e?void 0:e.data.map((e=>{const r={};for(const n in e.records){const s=t.find((e=>e.original===n)),o=e.records[n];null!=o&&s&&(r[s.renamed]=o)}return o.A.create({id:e.id,records:r})}),[]);return h.create({data:s,schema:n?i.b.create({fields:n}):void 0})}static composeTable(e,t){const r=Object.keys(e),n=Object.fromEntries(r.map((e=>[e,u.i.Scalar]))),s=c.B.unpack(e,n,{unpackNothing:!0}),i=[];for(const e of s){let t=!0;const n={};for(const s of r){const r=e.values[s];if(c.B.isNothing(r))continue;const o=c.B.flatten(r).filter((e=>!c.B.isNothing(e))).map((e=>e.value));0!==o.length&&(t=!1),n[s]=o[0]}t||i.push({path:e.path,records:n})}const a=new Map,d=[];for(const e of i){const r=e.path.slice(0,e.path.length-1),n=c.B.pathKey(r);let s=a.get(n);s||(s=h.create({data:[],schema:t}),a.set(n,s),d.push({path:0===r.length?[{kind:c.Q.Kind.Leaf}]:r,value:c.B.leaf(s)})),s.data.push(o.A.create({records:e.records}))}return c.B.pack(d)}}h.typeName="tabular-data"},4231:(e,t,r)=>{r.d(t,{O:()=>s});var n=r(72534);r(34833);class s extends n.b{}s.typeName="table-meta"},99705:(e,t,r)=>{r.d(t,{V:()=>s});var n=r(15001);class s extends n.O2{static fromDate(e){const t=new Date(e);return s.create({day:t.getDate(),month:t.getMonth(),year:t.getFullYear()})}toDate(){return new Date(this.year,this.month,this.day,0,0,0,0)}}s.typeName="builtin.date-only"},82339:(e,t,r)=>{r.d(t,{w:()=>s});var n=r(15001);class s extends n.O2{}s.typeName="recurrence.stop",s.typeDesc="when to stop a recurring event"},81020:(e,t,r)=>{r.d(t,{e:()=>s});var n=r(15001);class s extends n.O2{static fromDate(e){const t=new Date(e);return s.create({hours:t.getHours(),minutes:t.getMinutes(),seconds:t.getSeconds(),ms:t.getMilliseconds(),tz:t.getTimezoneOffset()})}toDate(){const e=new Date;return new Date(e.getFullYear(),e.getMonth(),e.getDate(),this.hours,this.minutes,this.seconds,this.ms)}}s.typeName="builtin.time-only"},54392:(e,t,r)=>{r.d(t,{VJ:()=>n.V,eU:()=>s.e,wH:()=>o.w,ei:()=>i.e});var n=r(99705),s=r(52938),o=r(82339),i=r(81020)},63659:(e,t,r)=>{r.d(t,{n:()=>o});var n=r(49353),s=r(91046);function o(e){return{clientErrorCode:e.clientErrorCode,from:t=>n.YY.from(e,t),fromResponse:t=>{return r=this,s=void 0,i=function*(){let r=yield t.originalError.text();try{r=JSON.parse(r)}catch(e){}const s=Object.assign(Object.assign({},t),{status:t.originalError.status,originalError:r});return n.YY.from(e,s)},new((o=void 0)||(o=Promise))((function(e,t){function n(e){try{c(i.next(e))}catch(e){t(e)}}function a(e){try{c(i.throw(e))}catch(e){t(e)}}function c(t){var r;t.done?e(t.value):(r=t.value,r instanceof o?r:new o((function(e){e(r)}))).then(n,a)}c((i=i.apply(r,s||[])).next())}));var r,s,o,i},is:t=>(0,s.Je)(t)&&(0,s.WX)(t,e.clientErrorCode)}}},93616:(e,t,r)=>{r.d(t,{l:()=>n});const n=(0,r(63659).n)({clientErrorCode:"GraphMisalignedError",message:"Misaligned graph.",userHint:"We encountered an unexpected error while executing your automation and we are unable to continue. Please reach-out to our slack channel, or send us an e-mail to help you resolve this issue.",trackError:"default",arguments:[]})},24321:(e,t,r)=>{r.d(t,{N:()=>n});const n=(0,r(63659).n)({clientErrorCode:"GraphTooManyError",message:"Too many values.",userHint:"We were expecting to find a single value but we found more instead.",trackError:"default",arguments:[]})},5215:(e,t,r)=>{r.d(t,{G:()=>o});var n=r(63659),s=r(31429);const o=(0,n.n)({clientErrorCode:"NetworkFetchError",message:"Fetching data via the network layer service API failed.",userHint:"There was an error fetching data. Please try again.",trackError:"default",arguments:[{name:"httpStatus",type:Number,struct:s.f.Scalar},{name:"url",type:String,struct:s.f.Scalar}]})},84031:(e,t,r)=>{r.d(t,{z:()=>o});var n=r(63659),s=r(31429);const o=(0,n.n)({clientErrorCode:"NonApplicableOperationError",message:"The operation is not applicable.",userHint:"Your interaction triggered an operation which is not supported or implemented. It will likely fail again if you retry, so we'll be investigating why you encountered this issue.",trackError:"default",arguments:[{name:"component",type:String,struct:s.f.Scalar}]})},27462:(e,t,r)=>{r.d(t,{n:()=>n});const n=(0,r(63659).n)({clientErrorCode:"NotImplementedError",message:"A method is not implemented.",userHint:"This method is not implemented.",trackError:"default",arguments:[]})},16405:(e,t,r)=>{r.d(t,{S:()=>o});var n=r(63659),s=r(31429);const o=(0,n.n)({clientErrorCode:"RemoteFetchError",message:"Fetching data via our remote Bardeen service API failed.",userHint:"There was an error fetching data. Please try again.",trackError:"default",arguments:[{name:"httpStatus",type:Number,struct:s.f.Scalar},{name:"url",type:String,struct:s.f.Scalar}]})},38407:(e,t,r)=>{r.d(t,{s:()=>o});var n=r(63659),s=r(31429);const o=(0,n.n)({clientErrorCode:"ResponseParseError",message:"Failed to parse JSON.",userHint:"Unexpected content of a presumes JSON message. Response content is {{{text}}}.",trackError:"default",arguments:[{name:"text",type:String,struct:s.f.Scalar}]})},89073:(e,t,r)=>{r.d(t,{q:()=>s});var n=function(e,t,r,n){return new(r||(r=Promise))((function(s,o){function i(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,a)}c((n=n.apply(e,t||[])).next())}))};function s(e){return class extends e{constructor(){super(...arguments),this.watches=new o}notifyWatches(e,t){return this.watches.notify([e],t)}watch(e,t){return this.get(e).then((r=>this.watches.add([e],t,r)))}unwatch(e,t){return n(this,void 0,void 0,(function*(){return yield this.watches.remove([e],t),Promise.resolve()}))}}}class o{constructor(){this.watches=[]}notify(e,t){return n(this,void 0,void 0,(function*(){const r=this.watches.filter((t=>t.path.every(((t,r)=>e[r]===t))));0!==r.length&&(yield Promise.all(r.map((e=>{const r=e.last;return e.last=t,e.handler(t,r,e.path)}))))}))}add(e,t,r){return n(this,void 0,void 0,(function*(){this.watches.push({handler:t,path:e,last:r})}))}remove(e,t){return n(this,void 0,void 0,(function*(){const r=this.watches.findIndex((r=>r.handler===t&&r.path.every(((t,r)=>e[r]===t))));-1!==r&&this.watches.splice(r,1)}))}}},21519:(e,t,r)=>{r.d(t,{G:()=>n});var n,s=r(81519),o=r(30577);!function(e){function t(e){const t=Object.keys(e);let r;for(const n of t){const t=e[n];t&&(r=r?o.B.merge(r,t):t)}return null!=r?r:o.B.nothing()}e.empty=function(){return{}},e.from=function(e){return{[s.L]:e}},e.isMultiportData=function(e){return"object"==typeof e&&null!=e&&Object.getPrototypeOf(e)===Object.prototype},e.isEmpty=function(e){return Object.values(e).every((e=>o.B.isEmpty(e)))},e.unify=t,e.getOnlyType=function(e,r){const n=Array.isArray(r)?r:[r],s=t(e),[i,a]=o.B.partition(s,(e=>n.some((t=>e.value.is(t)))));return i},e.merge=function(e,t){const r={},n=Array.from(new Set([...Object.keys(e),...Object.keys(t)]));for(const s of n){const n=e[s],i=t[s];(n||i)&&(n&&!i?r[s]=n:!n&&i?r[s]=i:n&&i&&(r[s]=o.B.merge(n,i)))}return r},e.map=function(e,t){const r=Object.keys(e),n={};for(const s of r){const r=e[s];r&&(n[s]=t(r,s))}return n},e.some=function(e,t){return Object.values(e).some(t)},e.reduceAsync=function(e,t,r){var n,s,o,i,a,c;return o=this,i=void 0,c=function*(){let o=r;const i=Object.keys(e);try{for(var a,c=function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e="function"==typeof __values?__values(e):e[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(r){t[r]=e[r]&&function(t){return new Promise((function(n,s){!function(e,t,r,n){Promise.resolve(n).then((function(t){e({value:t,done:r})}),t)}(n,s,(t=e[r](t)).done,t.value)}))}}}(i);!(a=yield c.next()).done;){const r=a.value;o=yield t(o,e[r],r)}}catch(e){n={error:e}}finally{try{a&&!a.done&&(s=c.return)&&(yield s.call(c))}finally{if(n)throw n.error}}return o},new((a=void 0)||(a=Promise))((function(e,t){function r(e){try{s(c.next(e))}catch(e){t(e)}}function n(e){try{s(c.throw(e))}catch(e){t(e)}}function s(t){var s;t.done?e(t.value):(s=t.value,s instanceof a?s:new a((function(e){e(s)}))).then(r,n)}s((c=c.apply(o,i||[])).next())}))}}(n||(n={}))},83844:(e,t,r)=>{r.d(t,{G:()=>n});const n=(0,r(63659).n)({clientErrorCode:"ApiClientError",message:"Client send an invalid request.",userHint:"Client send an invalid request",trackError:"default",arguments:[]})},49377:(e,t,r)=>{r.d(t,{S:()=>n});const n=(0,r(63659).n)({clientErrorCode:"ApiClientNotFoundError",message:"Resource not found.",userHint:"Some data from an integrated app could not be loaded.",trackError:"default",arguments:[]})},32604:(e,t,r)=>{r.d(t,{h:()=>n});const n=(0,r(63659).n)({clientErrorCode:"ApiClientUnauthorizedError",message:"User is not authorized.",userHint:"User is not authorized",trackError:"default",arguments:[]})},48391:(e,t,r)=>{r.d(t,{h:()=>n});const n=(0,r(63659).n)({clientErrorCode:"ApiHttpError",message:"API call failed.",userHint:"An error occurred calling out to an API.",trackError:"default",arguments:[]})},29403:(e,t,r)=>{r.d(t,{t:()=>n});const n=(0,r(63659).n)({clientErrorCode:"ApiServerError",message:"Server could not handle the request.",userHint:"Server could not handle the request.",trackError:"default",arguments:[]})},89890:(e,t,r)=>{r.d(t,{GY:()=>n.G,SM:()=>s.S,hc:()=>o.h,hg:()=>i.h,tc:()=>a.t});var n=r(83844),s=r(49377),o=r(32604),i=r(48391),a=r(29403)},91186:(e,t,r)=>{r.d(t,{o:()=>c,k:()=>u});var n=r(15865),s=r(18438),o=r(777),i=r(89890),a=function(e,t,r,n){return new(r||(r=Promise))((function(s,o){function i(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,a)}c((n=n.apply(e,t||[])).next())}))};class c extends n.x{constructor(){super(...arguments),this.lastError=[]}getErrorFromResponse(e){return a(this,void 0,void 0,(function*(){const t=(0,o.Tn)(e)?yield e.json():yield e.text();return this.getErrorFromResponseBody(e,t)}))}getErrorFromResponseBody(e,t){return a(this,void 0,void 0,(function*(){const r={status:e.status,statusText:e.statusText};switch(r.status){case 401:throw i.hc.from(Object.assign({originalError:t},r));case 404:throw i.SM.from(Object.assign({originalError:t},r));case 500:throw i.tc.from(Object.assign({originalError:t},r));case 400:throw i.GY.from(Object.assign({originalError:t},r));default:throw i.hg.from(Object.assign({originalError:t},r))}}))}fetchWrapper(e,t){return a(this,void 0,void 0,(function*(){const r=new URL(e,this.baseUrl||void 0).toString(),n=()=>this.fetch(r,t).then((e=>a(this,void 0,void 0,(function*(){return e.ok?e:this.getErrorFromResponse(e)}))));return this.retryConfig?(0,s.retry)(n,this.retryConfig).catch((e=>{if(this.lastError.length>0)throw this.lastError.pop();if(e.lastError)throw e.lastError;throw e})):n()}))}setRetryConfig(e){this.retryConfig=e}post(e,t,r){return this.fetchWrapper(e,{method:"POST",body:t,headers:r})}get(e,t,r){return this.fetchWrapper(e+new URLSearchParams(t),{method:"GET",headers:r})}put(e,t,r){return this.fetchWrapper(e,{method:"PUT",body:t,headers:r})}patch(e,t,r){return this.fetchWrapper(e,{method:"PATCH",body:t,headers:r})}delete(e,t,r){return this.fetchWrapper(e,{method:"DELETE",body:t,headers:r})}}class u extends c{}},46845:(e,t,r)=>{r.d(t,{_:()=>i});var n=r(91186),s=r(777),o=function(e,t,r,n){return new(r||(r=Promise))((function(s,o){function i(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,a)}c((n=n.apply(e,t||[])).next())}))};class i extends n.o{parseErrorCode(e){return(e.error||{}).code}parseErrorMessage(e){return(e.error||{}).message}parseJsonBody(e){return o(this,void 0,void 0,(function*(){const t=yield e.json();return null!=this.parseErrorCode(t)?this.getErrorFromResponseBody(e,t):t}))}fetchWrapper(e,t){const r=Object.create(null,{fetchWrapper:{get:()=>super.fetchWrapper}});return o(this,void 0,void 0,(function*(){const n=new URL(e,this.baseUrl||void 0).toString();t.body=t.body?a(t.body):null;const o=yield r.fetchWrapper.call(this,n,t);return 0===parseInt(o.headers.get("content-length"))?null:(0,s.Tn)(o)?this.parseJsonBody(o):(0,s.P0)(o)?o.text():o.blob()}))}}const a=e=>"object"==typeof e&&e.constructor==Object?JSON.stringify(e):e},91600:(e,t,r)=>{r.d(t,{p:()=>o});var n=r(53092),s=r(91186);class o extends s.k{constructor(e){super(e),this.serviceApi=new n.p(super.fetch.bind(this),e.config)}fetch(e,t){const r=()=>{const r=Object.assign({},t);return this.auth.authParams(r).then((t=>this.serviceApi.remoteFetch(t.redirectUrl||e,t)))};return r().then((e=>!e.ok||e.status>=400?this.handleErrorResponse(e,r):e))}}},4129:(e,t,r)=>{r.d(t,{D:()=>n,o:()=>i});var n,s=r(50881),o=(r(37656),function(e,t,r,n){return new(r||(r=Promise))((function(s,o){function i(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,a)}c((n=n.apply(e,t||[])).next())}))});!function(e){e[e.AtRedirectAway=0]="AtRedirectAway",e[e.AtRedirectToCallback=1]="AtRedirectToCallback",e[e.AtDataScriptSuccess=2]="AtDataScriptSuccess",e[e.AtSystemPrompt=3]="AtSystemPrompt"}(n||(n={}));class i{constructor(e){this.accountApi=e.accountApi,this.callbackUrl=e.callbackUrl,this.manifest=e.manifest,this.network=e.network,this.persistence=e.persistence,this.persistenceLifecycle=e.persistence,this.manager=e.manager,this.ctx=e.ctx}get integrationName(){var e;return(null===(e=this.manifest)||void 0===e?void 0:e.name)||"Bardeen"}fetch(e,t){return this.network.fetch(e,t)}resume(){return Promise.reject(s.nj.from({}))}refresh(e){return Promise.reject(s.nj.from({}))}revoke(){return Promise.resolve()}destroy(){return o(this,void 0,void 0,(function*(){this.persistenceLifecycle.destroy()}))}start(){return Promise.reject(s.nj.from({}))}finalize(e){return Promise.reject(s.nj.from({}))}getTerminationCondition(){return i.Termination.AtRedirectAway}getRefreshInterval(){return 0}getDataScript(){return""}declareSessionLost(){}}i.PersistedDataBlueprint={tsIssued:0,access_token:"",expires_in:0,refresh_token:"",scope:[""],tsExpires:0},i.Termination=n},86083:(e,t,r)=>{var n;r.d(t,{a:()=>n}),function(e){e.Text="text",e.Password="password",e.TextArea="textarea"}(n||(n={}))},37860:(e,t,r)=>{r.d(t,{g:()=>n});const n=(0,r(63659).n)({clientErrorCode:"AuthExchangeError",message:"Exchanging an OAuth2 code for an access and refresh token failed.",userHint:"Obtaining an access token failed. Please try again.",trackError:"default",arguments:[]})},48951:(e,t,r)=>{r.d(t,{U:()=>n});const n=(0,r(63659).n)({clientErrorCode:"AuthMissingRefreshTokenError",message:"The server did not return a refresh token.",userHint:"The server did not include a refresh token. This usually happens if you have installed this app multiple times in your account.",trackError:"default",arguments:[]})},82450:(e,t,r)=>{r.d(t,{D:()=>o});var n=r(63659),s=r(31429);const o=(0,n.n)({clientErrorCode:"AuthRefreshError",message:"Failed to refresh an auth token.",userHint:"Unable to refresh your authentication credentials.",trackError:"default",arguments:[{name:"integrationName",type:String,struct:s.f.Scalar},{name:"reason",type:String,struct:s.f.Scalar}]})},48377:(e,t,r)=>{r.d(t,{Z:()=>o});var n=r(63659),s=r(31429);const o=(0,n.n)({clientErrorCode:"AuthRefreshInProgressError",message:"Auth flow is already refreshing.",userHint:"Bardeen is currently refreshing yet another refresh was triggered.",trackError:"default",arguments:[{name:"integrationName",type:String,struct:s.f.Scalar},{name:"reason",type:String,struct:s.f.Scalar}]})},49071:(e,t,r)=>{r.d(t,{g:()=>o});var n=r(63659),s=r(31429);const o=(0,n.n)({clientErrorCode:"AuthResumeError",message:"App must be authenticated again.",userHint:"It seems you haven't used {{{integrationName}}} for a while and your credentials have expired. Please connect this integration again to keep using your automations.",trackError:"default",arguments:[{name:"integrationName",type:String,struct:s.f.Scalar}]})},77366:(e,t,r)=>{r.d(t,{M:()=>o});var n=r(63659),s=r(31429);const o=(0,n.n)({clientErrorCode:"AuthScopeConfirmationError",message:"Missing permissions.",userHint:"Seems like you missed some required permissions. We'll walk you through the authorization again. Please check all the boxes to make {{{integrationName}}} useful!",trackError:"default",arguments:[{name:"integrationName",type:String,struct:s.f.Scalar},{name:"missingScopes",type:String,struct:s.f.Array}]})},62529:(e,t,r)=>{r.d(t,{r:()=>n});const n=(0,r(63659).n)({clientErrorCode:"OAuth1AccessTokenError",message:"An error occurred while requesting an OAuth1 access token.",userHint:"Failed to obtain an access token. Please try again.",trackError:"default",arguments:[]})},99669:(e,t,r)=>{r.d(t,{w:()=>n});const n=(0,r(63659).n)({clientErrorCode:"OAuth1CallbackNotConfirmedError",message:"The remote service did not confirm the OAuth1 callback.",userHint:"The remote service did not confirm the OAuth1 callback. This seems to be a persistent error but please try again.",trackError:"default",arguments:[]})},37097:(e,t,r)=>{r.d(t,{e:()=>n});const n=(0,r(63659).n)({clientErrorCode:"OAuth1RequestTokenError",message:"An error occurred while requesting an OAuth1 request token.",userHint:"There was an error obtaining a request token. Please try again.",trackError:"default",arguments:[]})},36714:(e,t,r)=>{r.d(t,{S:()=>o});var n=r(63659),s=r(31429);const o=(0,n.n)({clientErrorCode:"OAuth1RevokeError",message:"Failed to revoke access.",userHint:"{{{reason}}}.",trackError:"default",arguments:[{name:"reason",type:String,struct:s.f.Scalar}]})},30961:(e,t,r)=>{r.d(t,{q:()=>a}),r(59186);var n=r(4129),s=r(86083),o=r(92182),i=function(e,t,r,n){return new(r||(r=Promise))((function(s,o){function i(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,a)}c((n=n.apply(e,t||[])).next())}))};class a extends n.o{constructor(){super(...arguments),this.authData={}}deserializeSession(){return i(this,void 0,void 0,(function*(){const e=yield this.persistence.getRecord();if(!(null==e?void 0:e.authData)){const e=o.g5.from({integrationName:this.integrationName,reason:"Session does not exist"});return Promise.reject(e)}return this.authData=e.authData,this}))}getTerminationCondition(){return n.D.AtSystemPrompt}authQueryArgs(){const e=new URLSearchParams;return Promise.resolve(e)}getPromptTitle(){return""}getPromptLogo(){return""}getPromptDescription(){return""}getFields(){return[{label:"API Key",name:"token",type:s.a.TextArea}]}getToken(){return this.authData.token||""}resume(){return i(this,void 0,void 0,(function*(){return this.deserializeSession()}))}refresh(e){return i(this,void 0,void 0,(function*(){switch(e){case"init":case"lazy-init":case"periodical":return this;case"unauthorized":throw o.DG.from({integrationName:this.integrationName,reason:"Your token is not valid anymore"})}}))}revoke(){return i(this,void 0,void 0,(function*(){return this.manager.invalidateSession(this)}))}start(){return i(this,void 0,void 0,(function*(){const e=this.getFields().map(((e,t)=>`field[${t}]=${encodeURIComponent(encodeURIComponent(e.label)+":"+e.name+":"+e.type)}`)).join("&");return"bardeen://prompts/custom?logo="+this.getPromptLogo()+"&title="+this.getPromptTitle()+"&description="+this.getPromptDescription()+"&"+e}))}finalize(e){return i(this,void 0,void 0,(function*(){return this.authData=e,yield this.persistence.setRecord({tsIssued:Date.now(),authData:e}),this}))}authParams(e){return i(this,void 0,void 0,(function*(){const t=Object.assign({},e);return t.headers=Object.assign({},e.headers||{},{Authorization:"Bearer "+this.getToken()}),t}))}}a.PersistedDataBlueprint={tsIssued:0,authData:{}}},53411:(e,t,r)=>{r.d(t,{C:()=>u}),r(2872),r(59186);var n=r(4129),s=r(92182),o=r(83963),i=r(24678),a=r(22226),c=function(e,t,r,n){return new(r||(r=Promise))((function(s,o){function i(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,a)}c((n=n.apply(e,t||[])).next())}))};class u extends n.o{constructor(e){super(e),this.token="",this.lastSuccessfulRefresh=0;const t=this.refresh.bind(this);let r=null;this.refresh=e=>c(this,void 0,void 0,(function*(){if(r){const t=s.Zc.from({integrationName:this.integrationName,reason:e});return this.ctx.log.debug(t),r}return r=t(e),r.finally((()=>{r=null})),r}))}getAuth(){if(!this.manifest)throw new Error("Missing `manifest` in the session creation arguments");if(!this.manifest.auth)throw new Error("Missing `auth` settings key in plugin manifest");return Promise.resolve(this.manifest.auth)}getToken(){return this.token}authQueryArgs(){const e=new URLSearchParams;return e.append("token",this.token),Promise.resolve(e)}parseCodeFromCallback(e){return e.code||""}parseAccessToken(e){return e.access_token||""}parseRefreshToken(e){return e.refresh_token||""}parseExpiresIn(e){return parseInt(e.expires_in||"0")}isTokenValid(){return c(this,void 0,void 0,(function*(){const e=yield this.persistence.getRecord();if(!e||!e.access_token)return!1;const t=e.tsIssued,r=e.tsExpires;return r>t?Date.now()<r:Date.now()<t+36e5}))}confirmScopesAfterRefresh(e,t){return e.scopesIgnoreOnRefresh?e.scopes||[]:this.parseScopes(e,t)}parseScopes(e,t){const r=e.scopes||[];if(!t.scope&&e.scopesAcceptUnconfirmed)return r;const n=e.scopeResponseDelimiter||" ",o=t.scope?t.scope.split(n):[],i=r.reduce(((e,t)=>(e.set(t,!0),e)),new Map);if(o.forEach((e=>{i.delete(e)})),i.size>0){const e=Object.keys(i),t=s.MD.from({integrationName:this.integrationName,missingScopes:e});throw this.ctx.log.error(t),t}return o}parseErrorMessage(e){return e.error_description||e.error||""}getRefreshTokenHeaders(e){return e}getRevokeTokenHeaders(e){return e}getExchangeCodeHeaders(e){return e}handleExchangeResponse(e){return Promise.resolve()}handleRefreshResponse(e){return Promise.resolve()}handleMissingRefreshToken(){return Promise.reject(s.Uw.from({integrationName:this.integrationName}))}deserializeSession(){return c(this,void 0,void 0,(function*(){const e=yield this.persistence.getRecord();if(!e||!e.access_token){const e=s.g5.from({originalError:"Session does not exist",integrationName:this.integrationName});return this.ctx.log.error(e),Promise.reject(e)}return this.token=e.access_token,this}))}parseExchangeCodeBody(e){return e.json()}getExchangeCodeArguments(e){return c(this,void 0,void 0,(function*(){const t=yield this.getAuth(),r=new URLSearchParams;return r.append("client_id",t.clientId),r.append("client_secret",t.clientSecret),r.append("code",e),r.append("redirect_uri",this.callbackUrl),r.append("grant_type","authorization_code"),Promise.resolve(r.toString())}))}getRefreshArguments(e,t){return c(this,void 0,void 0,(function*(){const t=yield this.getAuth(),r=new URLSearchParams;return r.append("client_id",t.clientId),r.append("client_secret",t.clientSecret||""),r.append("refresh_token",e),r.append("grant_type","refresh_token"),Promise.resolve(r.toString())}))}getRevokeArguments(e){return c(this,void 0,void 0,(function*(){const t=new URLSearchParams;return t.append("token",e),t.toString()}))}getRevokeTokenMethod(){return"POST"}getAuthorizationUrl(e,t){return c(this,void 0,void 0,(function*(){const r=Object.keys(t).map((e=>e+"="+encodeURIComponent(t[e]))).join("&"),n=yield this.getAuth();return n.authorizationUrl+"?client_id="+encodeURIComponent(n.clientId)+"&response_type=code&redirect_uri="+encodeURIComponent(this.callbackUrl)+"&scope="+encodeURIComponent(e.join(" "))+(r?"&"+r:"")}))}resume(){return c(this,void 0,void 0,(function*(){return i.n_({category:"auth",message:`Resuming session for ${this.integrationName}`,level:a.z.Info}),this.deserializeSession()}))}exchangeCodeForTokens(e){return c(this,void 0,void 0,(function*(){const t=yield this.getAuth(),r=yield this.getExchangeCodeArguments(e);return this.fetch(t.tokenUrl,{method:"POST",headers:this.getExchangeCodeHeaders({"Content-Type":"application/x-www-form-urlencoded"}),redirect:"follow",body:r}).then((e=>this.parseExchangeCodeBody(e))).then((e=>c(this,void 0,void 0,(function*(){if(this.parseErrorMessage(e)){const t=s.g8.from({originalError:e,integrationName:this.integrationName});return this.ctx.log.error(t),i.Tb(t),Promise.reject(t)}const r=Date.now(),n=this.parseExpiresIn(e),o=1e3*n,a={access_token:this.parseAccessToken(e),refresh_token:this.parseRefreshToken(e),expires_in:n,tsIssued:r,tsExpires:r+o,scope:this.parseScopes(t,e)};return yield this.persistence.setRecord(a),a.refresh_token||(yield this.handleMissingRefreshToken()),yield this.handleExchangeResponse(e),this.deserializeSession()}))))}))}refresh(e){return c(this,void 0,void 0,(function*(){const t=yield this.getAuth();i.n_({category:"auth",message:`refreshing session for ${this.integrationName} (${e})`,level:a.z.Info});const r=yield this.persistence.getRecord();if(!(null==r?void 0:r.refresh_token)){const e=s.DG.from({integrationName:this.integrationName,reason:"Server did not include a refresh token"});throw this.ctx.log.error(e),e}if(("init"===e||"lazy-init"===e)&&(yield this.isTokenValid()))return this.deserializeSession();const n=yield this.getRefreshArguments(r.refresh_token,e);return this.fetch(t.tokenUrl,{method:"POST",headers:this.getRefreshTokenHeaders({"Content-Type":"application/x-www-form-urlencoded"}),redirect:"follow",body:n}).then((e=>this.parseExchangeCodeBody(e))).then((e=>c(this,void 0,void 0,(function*(){const n=this.parseErrorMessage(e);if(n){const e=s.g5.from({originalError:n,integrationName:this.integrationName,reason:"Could not refresh token"});return this.ctx.log.error(e),Promise.reject(e)}const o=Date.now(),i=this.parseExpiresIn(e),a=1e3*i,c=this.confirmScopesAfterRefresh(t,e),u=this.parseRefreshToken(e)||r.refresh_token,d={access_token:this.parseAccessToken(e),refresh_token:u,expires_in:i,tsIssued:o,tsExpires:o+a,scope:c};if(!d.access_token||!d.expires_in){const e=s.g5.from({originalError:"Missing fields in the response",integrationName:this.integrationName});return this.ctx.log.error(e),Promise.reject(e)}return this.lastSuccessfulRefresh=o,d.scope=this.confirmScopesAfterRefresh(t,e),yield this.persistence.setRecord(d),yield this.handleRefreshResponse(e),this.deserializeSession()})))).catch((e=>{const t=(0,o.Je)(e)?e:s.g5.from({originalError:e,integrationName:this.integrationName});return this.ctx.log.error(t),Promise.reject(t)}))}))}revoke(){return c(this,void 0,void 0,(function*(){yield this.manager.invalidateSession(this);const e=yield this.getAuth();if(!e.revokeUrl)return i.n_({category:"auth",message:`not revoking OAuth session for ${this.integrationName}: missing revoke URL`,level:a.z.Error}),void this.ctx.log.warn(`not revoking OAuth session for ${this.integrationName}: missing revoke URL`);const t=yield this.persistence.getRecord();if(!t||!t.access_token)return;const r=yield this.getRevokeArguments(t.access_token);return this.fetch(e.revokeUrl,{method:this.getRevokeTokenMethod(),headers:this.getRevokeTokenHeaders({"Content-Type":"application/x-www-form-urlencoded"}),redirect:"follow",body:r}).then((e=>c(this,void 0,void 0,(function*(){return e.ok?Promise.resolve():e.json().then((e=>{const t=e.error_description||e.error||"Unknown Error",r=`Could not revoke token: ${JSON.stringify(t)}`;return this.ctx.log.error(r),Promise.reject(r)}))}))))}))}getTerminationCondition(){return n.o.Termination.AtRedirectToCallback}getDataScript(){return'\n      function$getJsonFromUrl(url) {\n        if (!url) url = location.search;\n        var$q = url.substr(1);\n        var$r = {};\n        q.split("&").forEach((p) => {\n          var$i = p.split("=");\n          r[i[0]] = decodeURIComponent(i[1]);\n        });\n        return$r;\n      }\n\n      return$getJsonFromUrl(window.location.search.toString());\n    '.replace(/\s/gim,"").replace(/\$/gim," ")}start(){return c(this,void 0,void 0,(function*(){i.n_({category:"auth",message:`starting flow for ${this.integrationName}`,level:a.z.Info});const e=yield this.getAuth(),t=e.scopes||[],r=e.extraUrlParameters||{};return this.getAuthorizationUrl(t,r)}))}finalize(e){return c(this,void 0,void 0,(function*(){i.n_({category:"auth",message:`finalizing session for ${this.integrationName}`,level:a.z.Warning});const t=this.parseCodeFromCallback(e);if(!t)throw new Error("Could not find a `code` argument in the OAuth2 callback data");return this.exchangeCodeForTokens(t)}))}authParams(e){return c(this,void 0,void 0,(function*(){const t=Object.assign({},e);return t.headers=Object.assign({},e.headers||{},{Authorization:"Bearer "+this.token}),t}))}}u.PersistedDataBlueprint={tsIssued:0,access_token:"",expires_in:0,refresh_token:"",scope:[""],tsExpires:0}},15770:(e,t,r)=>{r.d(t,{B:()=>i});var n=r(53411),s=r(8885),o=function(e,t,r,n){return new(r||(r=Promise))((function(s,o){function i(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,a)}c((n=n.apply(e,t||[])).next())}))};class i extends((0,s.i)(n.C)){getExchangeCodeArguments(e){return o(this,void 0,void 0,(function*(){const t=new URLSearchParams;return t.append("code",e),t.append("redirect_uri",this.callbackUrl),t.append("grant_type","authorization_code"),Promise.resolve(t.toString()+"&client_secret={{client_secret}}&client_id={{client_id}}")}))}getRefreshArguments(e,t){return o(this,void 0,void 0,(function*(){const t=new URLSearchParams;return t.append("refresh_token",e),t.append("grant_type","refresh_token"),Promise.resolve(t.toString()+"&client_secret={{client_secret}}&client_id={{client_id}}")}))}getAuthorizationUrl(e,t){return o(this,void 0,void 0,(function*(){const r=Object.keys(t).map((e=>e+"="+encodeURIComponent(t[e]))).join("&"),n=yield this.getAuth(),s=e.length?"&scope="+encodeURIComponent(e.join(" ")):"",o=n.authorizationUrl+"?client_id={{client_id}}&response_type=code&redirect_uri="+encodeURIComponent(this.callbackUrl)+s+(r?"&"+r:"");return this.getServiceAPI().redirectUrl(o)}))}}},8885:(e,t,r)=>{r.d(t,{i:()=>s});var n=r(53092);function s(e){return class extends e{getServiceAPI(){return this._serviceApi||(this._serviceApi=new n.p(this.network.fetch,this.manifest.api)),this._serviceApi}fetch(e,t){return this.getServiceAPI().remoteFetch(e.toString(),t)}}}},53092:(e,t,r)=>{r.d(t,{p:()=>i});var n=r(28265),s=r(50881),o=function(e,t,r,n){return new(r||(r=Promise))((function(s,o){function i(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,a)}c((n=n.apply(e,t||[])).next())}))};class i{constructor(e,t){if(!(null==t?void 0:t.serviceEnclave))throw new Error("Missing 'api.serviceEnclave' parameter in the manifest");if(!(null==t?void 0:t.serviceId))throw new Error("Missing 'api.serviceId' parameter in the manifest");this.serviceEnclave=t.serviceEnclave,this.serviceId=t.serviceId,this._fetch=e}static setAccountAPI(e){i.accountAPI=e}redirectUrl(e){const t=`proxy/${this.serviceId}?enclave=${encodeURIComponent(this.serviceEnclave)}&redirect=${encodeURIComponent(e)}`;return i.accountAPI?i.accountAPI.computeGetURL(t):Promise.resolve(t)}remoteCall(e,t={}){return o(this,void 0,void 0,(function*(){const r=`${e}/${this.serviceId}`;return(i.accountAPI?i.accountAPI.fetch.bind(i.accountAPI):this._fetch)(r,{method:"POST",headers:{"X-Service-Enclave":this.serviceEnclave,"Content-Type":"application/json"},body:JSON.stringify(t)})}))}remoteFetch(e,t){const r=`proxy/${this.serviceId}`;return(i.accountAPI?i.accountAPI.fetch.bind(i.accountAPI):this._fetch)(r,{method:"POST",headers:{"X-Service-Enclave":this.serviceEnclave,"Content-Type":"application/json"},body:JSON.stringify({url:e,method:t.method||"get",responseType:"text",headers:t.headers,data:t.body})}).then((e=>e.ok?e.json():e.text().then((t=>Promise.reject(s.SJ.from({originalError:t,httpStatus:e.status,url:r})))))).then((e=>new a(e)))}}class a{constructor(e){this.status=e.status,this.statusText=e.statusText,this.ok=this.status>=200&&this.status<300,this.redirected=!1,this.type="basic",this.url=e.url,this.remoteBody=e.data,this.body=e.data,this.bodyUsed=!1,this.headers=new Headers,Object.keys(e.headers).forEach((t=>{this.headers.append(t,e.headers[t])}))}clone(){return this}arrayBuffer(){return this.text().then((e=>(new n.p).encode(e)))}blob(){const e=this.headers.get("content-type")||"text/plain";return this.arrayBuffer().then((t=>new Blob([t],{type:e})))}formData(){throw new Error("Method not implemented.")}json(){return o(this,void 0,void 0,(function*(){if("string"!=typeof this.remoteBody)return Promise.resolve(this.remoteBody);const e=yield this.text();if(!e)return{};try{return JSON.parse(e)}catch(t){throw s.s0.from({originalError:t,text:e})}}))}text(){return"string"!=typeof this.remoteBody?Promise.resolve(JSON.stringify(this.remoteBody)):Promise.resolve(this.remoteBody)}}},94834:(e,t,r)=>{r.d(t,{g:()=>n});function n(){return e=this,t=void 0,n=function*(){if(null!=globalThis.navigator&&globalThis.navigator.language){const e=globalThis.navigator.language.split("-").pop();if(e)return e.toUpperCase()}return""},new((r=void 0)||(r=Promise))((function(s,o){function i(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,a)}c((n=n.apply(e,t||[])).next())}));var e,t,r,n}},72739:(e,t,r)=>{r.d(t,{S:()=>o}),r(4614);var n=r(2872),s=r(88767);function o(e){return{node:{type:n.Ab.NodeType.Value,contextMeta:[],nodeId:(0,s.Z)(),value:e.serialize(),valueType:{typeId:0},output:"compute"},spec:{playbooks:[],plugins:[],types:[{facets:e.getTypes()}],version:1}}}}}]);