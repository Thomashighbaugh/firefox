"use strict";(self.webpackChunkbardeen_browser_extension=self.webpackChunkbardeen_browser_extension||[]).push([[2304,1485],{55567:(e,n,t)=>{t.d(n,{k:()=>o,Z:()=>i}),t(68796);const r={api:null},o=e=>{r.api=e},a=new Proxy(r,{get(e,n){if(null===e.api)throw new Error("You must first call setAPI");return e.api[n]}});window.api=a;const i=a},28871:(e,n,t)=>{t.d(n,{B:()=>i});var r=t(2784),o=(t(68796),t(78975)),a=t(55567);const i=()=>{const[e,n]=r.useState(void 0),t=r.useRef(e),i=r.useCallback((()=>a.Z.systemBootStatusGet().then((e=>{t.current&&t.current.loading&&!e.loading&&!e.error&&(a.Z.appWindowHide().then((()=>a.Z.appWindowShow())),t.current=void 0),t.current=e,n(e),(e.loading||e.error)&&setTimeout(i,250)}))),[]);return r.useEffect((()=>{i()}),[i]),e&&e.loading?e.error?r.createElement(o.LoadingOverlay,{button:r.createElement(o.BardeenButton,{type:"secondary",mode:"dark",onClick:()=>a.Z.systemBootRetry(),icon:{icon:"RepeatBold"}},"Retry"),loadingVisible:!1,message:"Failed to load the engine",error:e.error}):r.createElement(o.LoadingOverlay,{message:`[${e.tasksDone}/${e.tasksTotal}] ${e.message}`}):null}},50405:(e,n,t)=>{t.d(n,{_:()=>i});var r=t(2784),o=t(78975),a=t(34005);const i=e=>{const{children:n}=e,[{isOpen:t,variant:i,message:l,description:s,autoHide:c},{closeSnackbar:p}]=(0,a.E0)();return r.createElement(r.Fragment,null,n,r.createElement(o.BardeenNotification,{open:t||!1,variant:i,message:l,description:s,onClose:p,autoHide:c}))}},51485:(e,n,t)=>{t.d(n,{PopupWindow:()=>s.P,setAPI:()=>i.k});var r=t(2784),o=(t(28316),t(68796)),a=t(78975),i=t(55567),l=t(79692);(0,l.Z)({loginPrompt:Object.assign(Object.assign({},a.center),{height:"100%"}),loginFrame:{width:"400px"}});var s=t(1740);const c=a.MetricsMap.boxModel.spacing;(0,l.Z)({form:{"& > div":{marginBottom:".5rem"}},logoHeader:{marginBottom:`${c.l}px`,display:"flex",alignItems:"center"},logoTitle:{fontSize:a.MetricsMap.typography.size.xl,lineHeight:`${a.MetricsMap.typography.lineHeight.m} px`,fontWeight:a.MetricsMap.typography.weight.normal,marginLeft:"10px"},promptsForm:Object.assign(Object.assign({},a.centerVert),{flexDirection:"column"}),grid:{display:"flex"},card:{width:"600px",padding:"2rem !important",textAlign:"center","& > div > *":{padding:"1rem 0"}},formBtn:{"&:not(:last-child)":{marginRight:`${c.s}px`}}}),t(213),t(69378);const p=a.MetricsMap.boxModel.spacing;(0,l.Z)({sameHeight:{display:"flex",flexWrap:"wrap",flexFlow:"row wrap","& > *":{flexGrow:1,alignItems:"stretch","& > *":{height:"100%"}}},marginBottom:{"&.MuiTextField-root":{marginBottom:"16px"}},cardWrapper:{display:"flex",flexDirection:"column"},cardHeader:{display:"flex",alignItems:"center",borderBottom:`1px solid ${a.ColorMap.base[15]}`},cardTitle:{flex:1},cardContent:{display:"flex",marginTop:`${p.m}px`},cardAvatar:{marginRight:`${p.s}px`},grid:{display:"grid",columnGap:"1rem",rowGap:"1rem",gridTemplateColumns:"repeat(auto-fit, minmax(240px, 1fr))"}});var d=t(11776),m=t(38402),u=t(3806),g=t(49378),f=t(82113),y=t(9520),b=function(e,n,t,r){return new(t||(t=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var n;e.done?o(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(i,l)}s((r=r.apply(e,n||[])).next())}))};const x=({filter:e})=>{const n=r.useRef(0),[t,o]=r.useState([]),l=()=>b(void 0,void 0,void 0,(function*(){return o(yield i.Z.exceptionList())})),s=e=>b(void 0,void 0,void 0,(function*(){return o(yield i.Z.exceptionRecover(e.id))})),c=e=>b(void 0,void 0,void 0,(function*(){return o(yield i.Z.exceptionDismiss(e.id))}));(0,a.useEffectOnce)((()=>(l(),n.current=window.setInterval(l,1e3),()=>{window.clearInterval(n.current)})));const p=t.filter((n=>!n.message.includes("charAt")&&(!e||!e.pluggableId||n.source.manifest&&n.source.manifest.id===e.pluggableId)));return r.createElement("div",null,r.createElement(d.Z,null,p.map((e=>r.createElement(v,{key:e.id,e,onDelete:c,onRetry:s})))),t.length>0?r.createElement(a.BardeenButton,{onClick:()=>b(void 0,void 0,void 0,(function*(){yield i.Z.exceptionDismissAll(),o([])}))},"Clear Errors"):"No errors!")};function h(e){if(n=e,"[object Object]"!==Object.prototype.toString.call(n)&&!Array.isArray(e))return String(e);var n;try{return JSON.stringify(e,null,2)}catch(e){return"CIRCULAR JSON"}}const v=e=>{var n;const[t,o]=r.useState(!1),{e:i,onDelete:l,onRetry:s}=e,c=r.createElement(a.BardeenButton,{size:"s",type:"primary",key:"recover",onClick:()=>s(i)},"Recover"),p=[...i.recoverable?[c]:[],r.createElement(a.BardeenButton,{size:"s",key:"delete",onClick:()=>l(i),icon:{icon:"TrashBinOutline"}})];return r.createElement(m.Z,{button:!0,key:i.id,onClick:()=>o(!t)},r.createElement(u.Z,null,i.source.manifest?r.createElement(a.BardeenIcon,{icon:{url:i.source.manifest.icon}}):r.createElement(a.BardeenIcon,{color:a.ColorMap.strawberry.base,icon:{icon:"RadioExclamationBold"}})),r.createElement(g.Z,{primary:r.createElement("div",null,null===(n=i.source.manifest)||void 0===n?void 0:n.name," ",i.source.operation,r.createElement("div",null,i.message)),secondary:i.details?r.createElement(f.Z,{in:t,timeout:"auto",unmountOnExit:!0},r.createElement("pre",null,h(i.details))):null}),r.createElement(y.Z,null,p))};r.memo((()=>r.createElement("div",{style:{margin:"0 16px"}},r.createElement("div",{className:"settings-panel-background",style:{padding:24,minHeight:360}},r.createElement(a.BardeenPageHeader,{title:"Errors",subTitle:"Overview of system errors and warnings"}),r.createElement(x,null)))));var w=t(61454);const k=a.MetricsMap.boxModel.spacing;(0,w.createUseStyles)({badge:{display:"inline-flex",justifyContent:"center",alignItems:"center",height:"20px",minWidth:"20px",padding:`${k.base}px`,margin:`0 ${k.base}px`,borderRadius:"10px",backgroundColor:a.ColorMap.strawberry.base,boxShadow:"0 0 0 1px #fff",lineHeight:`${a.MetricsMap.typography.lineHeight.l}px`}});var M=t(58081);M.yE,M.hB,M.LR,M.OA,M.uU,M.hZ;const C=a.MetricsMap.boxModel.spacing;(0,w.createUseStyles)({missingContent:{"&.MuiTimelineItem-missingOppositeContent":{"&::before":{content:"none"}}},invocationWrapper:{width:"100%",padding:`${C.l}px`,"& .vbh-primary-fields":{maxWidth:"500px"},"& .b-collapse-details":{flexDirection:"column"},"& .b-collapse-summary":{padding:`${C.s}px 0`}},errorDot:{borderColor:a.ColorMap.strawberry.base},successDot:{borderColor:a.ColorMap.mint.base}}),(0,l.Z)({commandTag:{marginRight:a.MetricsMap.boxModel.spacing.base}}),(0,l.Z)({root:{"& > *":{borderBottom:"unset"}}});var E=t(34005),T=t(46782),B=t(5578),Z=t(74392),O=function(e,n,t,r){return new(t||(t=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var n;e.done?o(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(i,l)}s((r=r.apply(e,n||[])).next())}))};const $=e=>O(void 0,void 0,void 0,(function*(){if(e)return i.Z.playbookGetDependencies(e)})),P=(r.memo((e=>{const{meta:n,onClick:t}=e,{color:l,description:s="",id:c=""}=n,[p,d]=(0,B.d)(),[m,u]=(0,Z.i)({onAfterDelete:e.onChange}),[,{openSnackbar:g}]=(0,E.E0)(),f=r.useMemo((()=>[...P("user"===n.origin,{name:"Download",id:"pb_card_download",icon:{icon:"DownloadOutline"},onClick:()=>((e,n)=>{i.Z.dedangle((()=>O(void 0,void 0,void 0,(function*(){return(0,T.saveAs)(new Blob([yield i.Z.playbookExport(e)],{type:"application/json"}),`${n.toLocaleLowerCase().replace(/[^a-z0-9-_]/g,"-")}.bardeen`)}))))})(c,n.name)}),{name:"Share playbook",id:"pb_share_playbook",icon:{icon:"PaperplaneOutline"},onClick:()=>d(c)}]),[c,n,d]),y=t?()=>t(n):void 0,b=n.canDelete?()=>u(n):void 0,x=r.useCallback((()=>d(c)),[c,d]);return r.createElement(r.Fragment,null,r.createElement(a.PlaybookCard,{color:Array.isArray(l)?l:["melon","raspberry"],description:s,fadeIn:!0,getPBDependencies:$,id:c,integrationIcons:n.integrationIcons,menuItems:f,onClick:y,onDelete:b,onPinToggle:()=>{i.Z.dedangle(i.Z.playbookSetFavorite(c,!n.favorite).catch((e=>{g({message:`Could not toggle playbook favorite state: ${(0,o.unknownToString)(e)}`,variant:"error"})})).finally(e.onChange))},onClickPlaybookInfo:()=>i.Z.openPlaybooks(c),onSharePlaybook:x,pinned:n.favorite,running:e.running,title:n.name,tooltipOpen:e.tooltipOpen}),p,m)})),(e,n)=>e?[n]:[]),A=a.MetricsMap.boxModel.spacing,I=((0,l.Z)({container:{marginBottom:"30px"},grid:{display:"flex",flexWrap:"wrap",gap:`${A.s}px`},loadMoreButton:{width:"100%",marginTop:`${A.l}px`,marginBottom:`${A.l}px`,"&:hover":{color:a.ColorMap.bardeen[50]}},subtitle:{marginBottom:`${A.l}px`},icon:{marginRight:`${A.s}px`}}),a.MetricsMap.boxModel.spacing),S=((0,l.Z)({descriptionStyle:{color:a.ColorMap.base[60],marginTop:`${I.l}px`,marginBottom:`${I.l}px`},integrationIcons:{display:"flex",marginTop:I.s-3+"px",marginBottom:`${I.l}px`,gap:`${I.base}px`}}),a.MetricsMap.boxModel.spacing),H=((0,l.Z)({tokenLine:{display:"flex",padding:S.s-3+"px",marginBottom:`${S.s}px`},tokenArrow:{paddingTop:S.s-3+"px",marginRight:S.s-3+"px"},tokenCommandType:{marginRight:`${S.base}px`,"& $label":{marginRight:0}},tokenCommandArgs:{display:"flex",flexWrap:"wrap",maxWidth:"410px"},label:{margin:`${S.base}px`}}),a.MetricsMap.boxModel.spacing);(0,l.Z)({"@global":{body:{padding:0,margin:0},"#main":{minHeight:"100%"},".settings-panel-background":{backgroundColor:a.ColorMap.base.white}},layout:{display:"flex",flex:"auto",flexDirection:"column",minHeight:"100vh"},settingsLogo:{padding:18},settingsMenu:{marginTop:`${H.base}px`},item:{padding:`${H.m}px`,"&:not(:last-child)":{marginBottom:`${H.s}px`},color:a.ColorMap.base[30],cursor:"pointer","&:hover":{color:a.ColorMap.base.white}},activeItem:{backgroundColor:a.ColorMap.bardeen.base,color:a.ColorMap.base.white},settingsLayout:{transition:"all 0.2s"},settingsHeader:{height:"64px",background:a.ColorMap.base[90],position:"sticky",top:0,zIndex:100},marginBottom:{"&.MuiTextField-root":{marginBottom:"15px"}},btnWrapper:{display:"flex",alignItems:"center"},btn:{"&:not(:last-child)":{marginRight:`${H.s}px`}},pageHeaderTitleWrapper:{display:"flex",alignItems:"center"},pageHeaderTitle:{flex:1,marginLeft:`${H.s}px`},spinnerWrapper:{display:"flex",alignItems:"center",justifyContent:"center"}}),t(28871),t(50405),(0,l.Z)({previewTableHeader:{padding:"10px",backgroundColor:"#eee",color:"#54575c",fontSize:"14px",fontWeight:600,textAlign:"center"}}),t.p,t.p},34005:(e,n,t)=>{t.d(n,{j1:()=>p,nb:()=>d,mF:()=>m,E0:()=>u,ZP:()=>g});var r=t(2784),o=t(10188),a=(t(13966),t(34073),t(25038)),i=t(32384),l=t(7905),s=t(26304),c=t(29236);const p=(0,o.Z)(r,i.n,a.N),d=(0,o.Z)(r,l.M,l._),m=(0,o.Z)(r,s.Qx,s.r_),u=(0,o.Z)(r,c.A,c.N),g=p},213:(e,n,t)=>{var r=t(51960),o=t(76118),a=t(74777),i=t(13980),l=t(18951),s=t(82151),c=t(71478),p=t(16901),d=t(23673),m=t(47491),u=t(10986),g=t(71214),f=t(98272),y=Object.keys(g),b=function(e){var n=e.source||e.children||"",t=e.parserOptions;if(e.allowedTypes&&e.disallowedTypes)throw new Error("Only one of `allowedTypes` and `disallowedTypes` should be defined");var i=r(g,e.renderers),u=[[a,t]].concat(e.plugins||[]).reduce(x,o()),b=u.parse(n),h=r(e,{renderers:i,definitions:m(b)}),v=function(e){var n=[d,l()],t=e.disallowedTypes;e.allowedTypes&&(t=y.filter((function(n){return"root"!==n&&-1===e.allowedTypes.indexOf(n)})));var r=e.unwrapDisallowed?"unwrap":"remove";t&&t.length>0&&n.push(c.ofType(t,r)),e.allowNode&&n.push(c.ifNotMatch(e.allowNode,r));var o=!e.escapeHtml&&!e.skipHtml,a=(e.astPlugins||[]).some((function(e){return(Array.isArray(e)?e[0]:e).identity===f.HtmlParser}));return o&&!a&&n.push(s),e.astPlugins?n.concat(e.astPlugins):n}(e),w=u.runSync(b),k=v.reduce((function(e,n){return n(e,h)}),w);return p(k,h)};function x(e,n){return Array.isArray(n)?e.use.apply(e,function(e){if(Array.isArray(e)){for(var n=0,t=new Array(e.length);n<e.length;n++)t[n]=e[n];return t}}(t=n)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()):e.use(n);var t}b.defaultProps={renderers:{},escapeHtml:!0,skipHtml:!1,sourcePos:!1,rawSourcePos:!1,transformLinkUri:u,astPlugins:[],plugins:[],parserOptions:{}},b.propTypes={className:i.string,source:i.string,children:i.string,sourcePos:i.bool,rawSourcePos:i.bool,escapeHtml:i.bool,skipHtml:i.bool,allowNode:i.func,allowedTypes:i.arrayOf(i.oneOf(y)),disallowedTypes:i.arrayOf(i.oneOf(y)),transformLinkUri:i.oneOfType([i.func,i.bool]),linkTarget:i.oneOfType([i.func,i.string]),transformImageUri:i.func,astPlugins:i.arrayOf(i.func),unwrapDisallowed:i.bool,renderers:i.object,plugins:i.array,parserOptions:i.object},b.types=y,b.renderers=g,b.uriTransformer=u,e.exports=b}}]);