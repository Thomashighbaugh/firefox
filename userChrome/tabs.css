@-moz-document url(chrome://browser/content/browser.xul),
               url(chrome://browser/content/browser.xhtml)

{

#alltabs-button {
  z-index: 9 !important;
  display: block !important;
  position: relative !important;
}

  /* hide navigation bar when it is not focused; use Ctrl+L to get focus */
  #main-window:not([customizing]) #navigator-toolbox:not(:focus-within):not(:hover) {
    margin-top: -45px;
    
    
  }
  #navigator-toolbox {
    transition: 0.2s margin-top ease-out;
  }

  #generalTab {
    --viewgroup-image: url(chrome://global/skin/icons/page-portrait.svg);
    
     
  }
  #mediaTab {
    --viewgroup-image: url(chrome://browser/skin/canvas.svg);
    
    
  }
  #permTab {
    --viewgroup-image: url(chrome://browser/skin/permissions.svg);
    
    
  }
  #securityTab {
    --viewgroup-image: url(chrome://global/skin/icons/security.svg);
    
    
  }

  /* Tabbar Buttons */
  :root {
    --newtab-button-minus-width-padding: 2px;
    --newtab-button-width-padding: calc(var(--toolbarbutton-inner-padding) - var(--newtab-button-minus-width-padding));
    
    
  }
  #new-tab-button > .toolbarbutton-icon,
  #alltabs-button > .toolbarbutton-badge-stack {
   
    
    padding-left: var(--newtab-button-width-padding) !important;
    padding-right: var(--newtab-button-width-padding) !important;
  }

  #tabbrowser-tabs[haspinnedtabs]:not([positionpinnedtabs])
    > #tabbrowser-arrowscrollbox
    > .tabbrowser-tab[first-visible-unpinned-tab] {
    margin-inline-start: 1px !important;
    
    
  }

  :root:not([uidensity="touch"]) #tabbrowser-arrowscrollbox {
    --scrollbtn-inner-padding: 1px;
    --scrollbtn-outer-padding: 3px;
    
    
  }
  #scrollbutton-up {
    padding-left: var(--scrollbtn-inner-padding, 4px) !important; /* Original: 4px */
    
    
    padding-right: var(--scrollbtn-outer-padding, 4px) !important;
  }
  #scrollbutton-down {
    padding-left: var(--scrollbtn-outer-padding, 4px) !important; /* Original: 4px */
    
    
    padding-right: var(--scrollbtn-inner-padding, 4px) !important;
  }

  :root:not([uidensity="touch"]) #new-tab-button,
  #alltabs-button {
    --toolbarbutton-outer-padding: 4px; /* Original: 2px*/
    z-index: 9 !important;
    display: block !important;
    position: relative;
  }

  /* Tab - Max Size */
  :root {
    --tab-max-width: 240px;
  }
  .tabbrowser-tab[fadein]:not([pinned]):not([style*="max-width"]) {
    max-width: var(--tab-max-width) !important; /* Original: 225px */
    
    
  }

  /* neighbouring tabs should "pinch" together */
  .tabbrowser-tab {
    padding-inline: 1px !important;
    
    
  }

  .tabbrowser-tab:not([last-visible-tab]) {
    margin-inline-end: -0.5px !important;
    
    
  }

  /*= Tab Bar - Reduce Height, Show more contents ==============================*/
  /* for Extra Drag Space */
  :root {
    --space-above-tabbar: 0px; /* If you want drag space, set to 8px */
     
    
  }
  :root[tabsintitlebar][sizemode="normal"] #toolbar-menubar[autohide="true"] {
    height: calc(var(--tab-min-height) + var(--space-above-tabbar));
    
     
  }
  :root[sizemode="normal"][chromehidden~="menubar"] #TabsToolbar > .toolbar-items,
  :root[sizemode="normal"] #toolbar-menubar[autohide="true"][inactive] + #TabsToolbar > .toolbar-items {
    padding-top: var(--space-above-tabbar) !important;
    
    
  }

  /* Toolbar Height */
  :root:not([uidensity="touch"]) #TabsToolbar {
    --toolbarbutton-inner-padding: calc((var(--tab-min-height) - 16px) / 2) 
     
     
  }

  .toolbar-items,
  .tabbrowser-tab {
    --tabbar-max-height: 24px;
    max-height: calc(var(--tabbar-max-height) + var(--space-above-tabbar));
  }
  :root[uidensity="compact"] .toolbar-items,
  :root[uidensity="compact"] .tabbrowser-tab {
    --tabbar-max-height: 24px;
    
     
  }
  :root[uidensity="touch"] .toolbar-items,
  :root[uidensity="touch"] .tabbrowser-tab {
    --tabbar-max-height: 36px;
     
     
  }

  /* Scroll Button - Size Fix */
  :root #tabbrowser-arrowscrollbox {
    --scrollbtn-vertical-padding: 3px;
    --scrollbtn-vertical-border: 2px;
    --scrollbtn-border-radius: 7px;
    
        
  }
  #scrollbutton-up,
  #scrollbutton-down {
    /* Original: var(--toolbarbutton-inner-padding) calc(var(--toolbarbutton-inner-padding) - 6px) = 9px */
    /* https://github.com/mozilla/gecko-dev/blob/71b1259afd1cdaf41871ae675c2dadb967ea5b34/browser/themes/shared/toolbarbuttons.inc.css#L142 */
    padding-top: var(--scrollbtn-vertical-padding, var(--toolbarbutton-inner-padding)) !important;
    padding-bottom: var(--scrollbtn-vertical-padding, var(--toolbarbutton-inner-padding)) !important;

    /* Original: 4px */
    border-top-width: var(--scrollbtn-vertical-border, 4px) !important;
    border-bottom-width: var(--scrollbtn-vertical-border, 4px) !important;
    /* Original: calc(var(--tab-border-radius) + 4px) = 8px */
    border-radius: var(--scrollbtn-border-radius, calc(var(--tab-border-radius) + 4px)) !important;
  }

  :root[tabsintitlebar]:not([uidensity="compact"]) #toolbar-menubar[autohide="true"] {
    height: calc(
      var(--tab-min-height) - var(--tabs-navbar-shadow-size) - 2px
    ); /* Compact: 28px, Normal: 33px, Touch: 38px */
  }

  /* Pinned Tab - Titlechanged Indicator position fix */
  .tabbrowser-tab:is([image], [pinned]) > .tab-stack > .tab-content[attention]:not([selected="true"]),
  .tabbrowser-tab > .tab-stack > .tab-content[pinned][titlechanged]:not([selected="true"]) {
    /* Original: center bottom calc(6.5px + var(--tabs-navbar-shadow-size)); */
    background-position-y: bottom calc(2.5px + var(--tabs-navbar-shadow-size)) !important;
  }
  :root[uidensity="compact"]
    .tabbrowser-tab:is([image], [pinned])
    > .tab-stack
    > .tab-content[attention]:not([selected="true"]),
  :root[uidensity="compact"] .tabbrowser-tab > .tab-stack > .tab-content[pinned][titlechanged]:not([selected="true"]) {
    /* Original: center bottom calc(6.5px + var(--tabs-navbar-shadow-size)); */
    background-position-y: bottom calc(0.5px + var(--tabs-navbar-shadow-size)) !important;
  }
  :root[uidensity="touch"]
    .tabbrowser-tab:is([image], [pinned])
    > .tab-stack
    > .tab-content[attention]:not([selected="true"]),
  :root[uidensity="touch"] .tabbrowser-tab > .tab-stack > .tab-content[pinned][titlechanged]:not([selected="true"]) {
    /* Original: center bottom calc(6.5px + var(--tabs-navbar-shadow-size)); */
    background-position-y: bottom calc(4.5px + var(--tabs-navbar-shadow-size)) !important;
  }
  /** Tab Bar - Connect to window ***********************************************/
  .tab-background {
    border-radius: var(--tab-border-radius) var(--tab-border-radius) 0px 0px !important;
    margin-bottom: 0px !important;
  }

  .tab-content {
    margin-top: var(--tab-block-margin);
  }

  .tab-stack {
    margin-top: 0px !important;
    margin-bottom: 0px !important;
  }

  
  /* Remove line at Toolbar's top */
  #tabbrowser-tabs {
    
     
    z-index: 1 !important;
  }
  #tabbrowser-arrowscrollbox[overflowing] .tabbrowser-tab[pinned]:is([visuallyselected], [multiselected]) {
    overflow: hidden;
    
     
  }

  /** Selected Tab - Color like toolbar *****************************************/
  :root:not(:-moz-lwtheme) {
    /* Fix for windows's system default theme. Using --toolbar-bgcolor fallback */
    --tab-selected-bgcolor: unset !important; /* Original: rgb(255,255,255); */
  }
  #tabbrowser-tabs:not([movingtab])
    > #tabbrowser-arrowscrollbox
    > .tabbrowser-tab
    > .tab-stack
    > .tab-background[selected="true"]:-moz-lwtheme {
    /* Original: linear-gradient(var(--lwt-selected-tab-background-color, transparent), var(--lwt-selected-tab-background-color, transparent)), linear-gradient(var(--toolbar-bgcolor), var(--toolbar-bgcolor)), var(--lwt-header-image, none)
 */
 /* */
   /*  */
    background-image: linear-gradient(transparent, transparent),
      linear-gradient(var(--toolbar-bgcolor), var(--toolbar-bgcolor)), var(--lwt-header-image, none) !important;
  }


  /** Selected Tab - Box Shadow *************************************************/
  #TabsToolbar[brighttext]
    #tabbrowser-tabs:not([noshadowfortests])
    .tabbrowser-tab[visuallyselected="true"]:not(:focus)
    > .tab-stack
    > .tab-background:-moz-lwtheme {
    /* Origina: 0 0 1px var(--tab-line-color, rgba(128,128,142,0.9))
       Bright: 0 0 1px var(--tab-line-color, rgba(128,128,142,0.9)), 0 0 4px rgba(128,128,142,0.5) */
    box-shadow: 0 0 1px var(--toolbar-color) !important;
  }
  #TabsToolbar[brighttext]
    #tabbrowser-tabs:not([noshadowfortests])
    .tabbrowser-tab[multiselected]:not([visuallyselected])
    > .tab-stack
    > .tab-background:-moz-lwtheme {
    box-shadow: 0 0 1px color-mix(in srgb, var(--toolbar-color) 80%, transparent) !important;
  }

  /* Pinned Tab - tabbrowser-arrowscrollbox overflowing */
  #tabbrowser-tabs[positionpinnedtabs] > #tabbrowser-arrowscrollbox > .tabbrowser-tab[pinned] {
    z-index: 0 !important;
  }
 
  /* New tab button - Looks like tab ********************************************/
  #tabs-newtab-button {
    /* Original:
    margin: 0 0 var(--tabs-navbar-shadow-size) !important
    => Can't ovrride style. Therefore, we should approach it by bypass.
    */
    --tabs-navbar-shadow-size: -1px; /* Original: 1px */
    --tabs-navbar-original-shadow-size: 1px;
    --tab-corner-rounding: 4px; /* Hardcorded */

    /* Size */
    -moz-box-align: stretch !important;
    padding-top: var(--tab-block-margin) !important;

    /* Corner Rounding Image */
    --newtab-position: calc((var(--tab-corner-rounding) / 2) * -1);
    background-image: url("./icons/tab-bottom-corner-left.svg"), url("./icons/tab-bottom-corner-right.svg");
    background-repeat: no-repeat;
    background-position: left var(--newtab-position) bottom var(--tabs-navbar-original-shadow-size),
      right var(--newtab-position) bottom var(--tabs-navbar-original-shadow-size);
    background-size: var(--tab-corner-rounding);

    /* Corner Rounding Color */
    fill: transparent !important;
    -moz-context-properties: fill !important;
  }

  /* Corner Rounding Color */
  #tabs-newtab-button:hover {
    fill: var(--toolbarbutton-hover-background) !important;
  }
  #tabs-newtab-button:hover:active {
    fill: var(--toolbarbutton-active-background) !important;
  }
  @media (-moz-windows-accent-color-in-titlebar) {
    :root[tabsintitlebar]:not(:-moz-window-inactive, :-moz-lwtheme) #tabs-newtab-button:hover,
    :root[tabsintitlebar][lwt-default-theme-in-dark-mode]:not(:-moz-window-inactive) #tabs-newtab-button:hover {
      fill: color-mix(
        in srgb,
        -moz-accent-color-foreground 10%,
        transparent
      ) !important; /* Hardcorded for compatibility */
    }
    :root[tabsintitlebar]:not(:-moz-window-inactive, :-moz-lwtheme) #tabs-newtab-button:hover:active,
    :root[tabsintitlebar][lwt-default-theme-in-dark-mode]:not(:-moz-window-inactive) #tabs-newtab-button:hover:active {
      fill: color-mix(
        in srgb,
        -moz-accent-color-foreground 15%,
        transparent
      ) !important; /* Hardcorded for compatibility */
    }
  }



  /* Unloaded Tab - Contents Opacity ********************************************/
  #tabbrowser-tabs .tabbrowser-tab[pending] .tab-content {
    opacity: 0.7;
  }



  /** Library - Icons Replace ***************************************************/
  /*= Standard Folder - More Visible ===========================================*/
  /* on Toolbar and Menus */
  :-moz-any(#PlacesToolbar, #BMB_bookmarksPopup, #bookmarksMenu) .bookmark-item[container="true"]:not([query="true"], [tagContainer], [dayContainer]),
  /* in Sidebar, Library, Add/Edit Bookmark dialog */
  /* https://github.com/rillian/firefox/blob/1f88437d263f56bdede4f20f69ba9c7b62f57001/layout/style/nsCSSAnonBoxList.h#L85-L98 */
  /* Need to overide!!, can not use :not() */
  :-moz-any(#bookmarks-view, #historyTree, #editBMPanel_folderTree, #placesList, #placeContent) treechildren::-moz-tree-image(title, container),
  #editBMPanel_folderMenuList:not([selectedGuid="toolbar_____"], [selectedGuid="menu________"]),
  #editBMPanel_folderMenuList .folder-icon:not([id]),
  /* Download Popup */
  .downloadIconShow > .button-box > .button-icon {
    list-style-image: url("./icons/folder.svg") !important;
  }

  /* Standard Folder - Open */
  :-moz-any(#PlacesToolbar, #BMB_bookmarksPopup, #bookmarksMenu)
    .bookmark-item[container="true"]:not([query="true"], [tagContainer], [dayContainer])[open="true"],
  :-moz-any(#bookmarks-view, #historyTree, #editBMPanel_folderTree, #placesList, #placeContent)
    treechildren::-moz-tree-image(title, container, open) {
    list-style-image: url("./icons/folder-open.svg") !important;
  }

  /*= Other Folder - Inbox Icon ================================================*/
  /* on Menus */
  #PlacesToolbar #OtherBookmarks,
  #BMB_bookmarksPopup #BMB_unsortedBookmarks,
  #bookmarksMenuPopup #menu_unsortedBookmarks,
  /* Other Bookmarks -- in Sidebar, Library, Add/Edit Bookmark dialog */
  :-moz-any(#bookmarks-view, #editBMPanel_folderTree, #placesList, #placeContent) treechildren::-moz-tree-image(container, OrganizerQuery_UnfiledBookmarks),
  :-moz-any(#bookmarks-view, #editBMPanel_folderTree, #placesList, #placeContent) treechildren::-moz-tree-image(container, queryFolder_unfiled_____),
  #editBMPanel_unfiledRootItem,
  #editBMPanel_folderMenuList[selectedGuid="unfiled_____"] {
    list-style-image: url("./icons/mail-inbox-all.svg") !important;
  }

  /* Other Folder - Open */
  #PlacesToolbar #OtherBookmarks[open="true"],
  #BMB_bookmarksPopup #BMB_unsortedBookmarks[open="true"],
  #bookmarksMenuPopup #menu_unsortedBookmarks[open="true"],
  :-moz-any(#bookmarks-view, #editBMPanel_folderTree, #placesList, #placeContent)
    treechildren::-moz-tree-image(container, open, OrganizerQuery_UnfiledBookmarks),
  :-moz-any(#bookmarks-view, #editBMPanel_folderTree, #placesList, #placeContent)
    treechildren::-moz-tree-image(container, open, queryFolder_unfiled_____) {
    list-style-image: url("./icons/mail-inbox.svg") !important;
  }

  /*= Default Icon - Overide ===================================================*/
  /* https://github.com/mozilla/gecko-dev/blob/master/browser/themes/shared/places/tree-icons.css */

  /* Query */
  :-moz-any(#historyTree, #placesList, #placeContent) treechildren::-moz-tree-image(title, query) {
    list-style-image: url("chrome://browser/skin/places/folder-smart.svg") !important;
  }

  /* History */
  :-moz-any(#historyTree, #placesList, #placeContent) treechildren::-moz-tree-image(title, query, dayContainer),
  :-moz-any(#historyTree, #placesList, #placeContent)
    treechildren::-moz-tree-image(query, OrganizerQuery_history____v) {
    list-style-image: url("chrome://browser/skin/history.svg") !important;
  }

  /* Downloads */
  :-moz-any(#placesList, #placeContent) treechildren::-moz-tree-image(query, OrganizerQuery_downloads__v) {
    list-style-image: url("chrome://browser/skin/downloads/downloads.svg") !important;
  }

  /* Tag */
  :-moz-any(#placesList, #placeContent) treechildren::-moz-tree-image(title, query, tagContainer),
  :-moz-any(#placesList, #placeContent) treechildren::-moz-tree-image(query, OrganizerQuery_tags_______v) {
    list-style-image: url("chrome://browser/skin/places/tag.svg") !important;
  }

  /* Boomark */
  :-moz-any(#placesList, #placeContent) treechildren::-moz-tree-image(query, OrganizerQuery_allbms_____v) {
    list-style-image: url("chrome://browser/skin/bookmark.svg") !important;
  }

  /* Bookmark Toolbar */
  #BMB_bookmarksPopup #BMB_bookmarksToolbar,       /* Original: Default folder icon */
  #bookmarksMenuPopup #bookmarksToolbarFolderMenu, /* Original: Default folder icon */
  :-moz-any(#bookmarks-view, #editBMPanel_folderTree, #placesList, #placeContent) treechildren::-moz-tree-image(container, queryFolder_toolbar_____) {
    list-style-image: url("chrome://browser/skin/places/bookmarksToolbar.svg") !important;
  }

  /* Bookmark Menu */
  :-moz-any(#bookmarks-view, #editBMPanel_folderTree, #placesList, #placeContent)
    treechildren::-moz-tree-image(container, queryFolder_menu________) {
    list-style-image: url("chrome://browser/skin/places/bookmarksMenu.svg") !important;
  }



}