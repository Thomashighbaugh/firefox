/*! For license information please see 7081.js.LICENSE.txt */
"use strict";(self.webpackChunkbardeen_browser_extension=self.webpackChunkbardeen_browser_extension||[]).push([[7081,7618],{10161:t=>{var e=Object.prototype.hasOwnProperty,n="~";function r(){}function o(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function i(t,e,r,i,s){if("function"!=typeof r)throw new TypeError("The listener must be a function");var a=new o(r,i||t,s),c=n?n+e:e;return t._events[c]?t._events[c].fn?t._events[c]=[t._events[c],a]:t._events[c].push(a):(t._events[c]=a,t._eventsCount++),t}function s(t,e){0==--t._eventsCount?t._events=new r:delete t._events[e]}function a(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),a.prototype.eventNames=function(){var t,r,o=[];if(0===this._eventsCount)return o;for(r in t=this._events)e.call(t,r)&&o.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?o.concat(Object.getOwnPropertySymbols(t)):o},a.prototype.listeners=function(t){var e=n?n+t:t,r=this._events[e];if(!r)return[];if(r.fn)return[r.fn];for(var o=0,i=r.length,s=new Array(i);o<i;o++)s[o]=r[o].fn;return s},a.prototype.listenerCount=function(t){var e=n?n+t:t,r=this._events[e];return r?r.fn?1:r.length:0},a.prototype.emit=function(t,e,r,o,i,s){var a=n?n+t:t;if(!this._events[a])return!1;var c,u,h=this._events[a],p=arguments.length;if(h.fn){switch(h.once&&this.removeListener(t,h.fn,void 0,!0),p){case 1:return h.fn.call(h.context),!0;case 2:return h.fn.call(h.context,e),!0;case 3:return h.fn.call(h.context,e,r),!0;case 4:return h.fn.call(h.context,e,r,o),!0;case 5:return h.fn.call(h.context,e,r,o,i),!0;case 6:return h.fn.call(h.context,e,r,o,i,s),!0}for(u=1,c=new Array(p-1);u<p;u++)c[u-1]=arguments[u];h.fn.apply(h.context,c)}else{var l,f=h.length;for(u=0;u<f;u++)switch(h[u].once&&this.removeListener(t,h[u].fn,void 0,!0),p){case 1:h[u].fn.call(h[u].context);break;case 2:h[u].fn.call(h[u].context,e);break;case 3:h[u].fn.call(h[u].context,e,r);break;case 4:h[u].fn.call(h[u].context,e,r,o);break;default:if(!c)for(l=1,c=new Array(p-1);l<p;l++)c[l-1]=arguments[l];h[u].fn.apply(h[u].context,c)}}return!0},a.prototype.on=function(t,e,n){return i(this,t,e,n,!1)},a.prototype.once=function(t,e,n){return i(this,t,e,n,!0)},a.prototype.removeListener=function(t,e,r,o){var i=n?n+t:t;if(!this._events[i])return this;if(!e)return s(this,i),this;var a=this._events[i];if(a.fn)a.fn!==e||o&&!a.once||r&&a.context!==r||s(this,i);else{for(var c=0,u=[],h=a.length;c<h;c++)(a[c].fn!==e||o&&!a[c].once||r&&a[c].context!==r)&&u.push(a[c]);u.length?this._events[i]=1===u.length?u[0]:u:s(this,i)}return this},a.prototype.removeAllListeners=function(t){var e;return t?(e=n?n+t:t,this._events[e]&&s(this,e)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,t.exports=a},2784:(t,e,n)=>{t.exports=n(83426)},74410:(t,e,n)=>{n.r(e),n.d(e,{rrulestr:()=>i.S,Frequency:()=>s.D,Weekday:()=>a.O,RRule:()=>r.ZP,RRuleSet:()=>o.Z,default:()=>c});var r=n(11996),o=n(85554),i=n(39990),s=n(8868),a=n(8622);const c=r.ZP},85554:(t,e,n)=>{n.d(e,{Z:()=>p});var r=n(85597),o=n(11996),i=n(1559),s=n(28307),a=n(35627),c=n(39990),u=n(79023);function h(t){var e=this;return function(n){if(void 0!==n&&(e["_"+t]=n),void 0!==e["_"+t])return e["_"+t];for(var r=0;r<e._rrule.length;r++){var o=e._rrule[r].origOptions[t];if(o)return o}}}const p=function(t){function e(e){void 0===e&&(e=!1);var n=t.call(this,{},e)||this;return n.dtstart=h.apply(n,["dtstart"]),n.tzid=h.apply(n,["tzid"]),n._rrule=[],n._rdate=[],n._exrule=[],n._exdate=[],n}return(0,r.ZT)(e,t),e.prototype._iter=function(t){return(0,a.X)(t,this._rrule,this._exrule,this._rdate,this._exdate,this.tzid())},e.prototype.rrule=function(t){l(t,this._rrule)},e.prototype.exrule=function(t){l(t,this._exrule)},e.prototype.rdate=function(t){f(t,this._rdate)},e.prototype.exdate=function(t){f(t,this._exdate)},e.prototype.rrules=function(){return this._rrule.map((function(t){return(0,c.S)(t.toString())}))},e.prototype.exrules=function(){return this._exrule.map((function(t){return(0,c.S)(t.toString())}))},e.prototype.rdates=function(){return this._rdate.map((function(t){return new Date(t.getTime())}))},e.prototype.exdates=function(){return this._exdate.map((function(t){return new Date(t.getTime())}))},e.prototype.valueOf=function(){var t=[];return!this._rrule.length&&this._dtstart&&(t=t.concat((0,u.N)({dtstart:this._dtstart}))),this._rrule.forEach((function(e){t=t.concat(e.toString().split("\n"))})),this._exrule.forEach((function(e){t=t.concat(e.toString().split("\n").map((function(t){return t.replace(/^RRULE:/,"EXRULE:")})).filter((function(t){return!/^DTSTART/.test(t)})))})),this._rdate.length&&t.push(d("RDATE",this._rdate,this.tzid())),this._exdate.length&&t.push(d("EXDATE",this._exdate,this.tzid())),t},e.prototype.toString=function(){return this.valueOf().join("\n")},e.prototype.clone=function(){var t=new e(!!this._cache);return this._rrule.forEach((function(e){return t.rrule(e.clone())})),this._exrule.forEach((function(e){return t.exrule(e.clone())})),this._rdate.forEach((function(e){return t.rdate(new Date(e.getTime()))})),this._exdate.forEach((function(e){return t.exdate(new Date(e.getTime()))})),t},e}(o.ZP);function l(t,e){if(!(t instanceof o.ZP))throw new TypeError(String(t)+" is not RRule instance");(0,s.q9)(e.map(String),String(t))||e.push(t)}function f(t,e){if(!(t instanceof Date))throw new TypeError(String(t)+" is not Date instance");(0,s.q9)(e.map(Number),Number(t))||(e.push(t),i.Z.sort(e))}function d(t,e,n){var r=!n||"UTC"===n.toUpperCase();return(r?t+":":t+";TZID="+n+":")+e.map((function(t){return i.Z.timeToUntilString(t.valueOf(),r)})).join(",")}},39990:(t,e,n)=>{n.d(e,{S:()=>h});var r=n(85597),o=n(11996),i=n(85554),s=n(1559),a=n(28307),c=n(35725),u={dtstart:null,cache:!1,unfold:!1,forceset:!1,compatible:!1,tzid:null};function h(t,e){return void 0===e&&(e={}),function(t,e){var n=function(t,e){var n=[],r=[],o=[],i=[],s=(0,c.o)(t),u=s.dtstart,h=s.tzid;return function(t,e){if(void 0===e&&(e=!1),!(t=t&&t.trim()))throw new Error("Invalid empty string");if(!e)return t.split(/\s/);for(var n=t.split("\n"),r=0;r<n.length;){var o=n[r]=n[r].replace(/\s+$/g,"");o?r>0&&" "===o[0]?(n[r-1]+=o.slice(1),n.splice(r,1)):r+=1:n.splice(r,1)}return n}(t,e.unfold).forEach((function(t){if(t){var e=function(t){var e=function(t){if(-1===t.indexOf(":"))return{name:"RRULE",value:t};var e=(0,a.Vl)(t,":",1);return{name:e[0],value:e[1]}}(t),n=e.name,r=e.value,o=n.split(";");if(!o)throw new Error("empty property name");return{name:o[0].toUpperCase(),parms:o.slice(1),value:r}}(t),s=e.name,u=e.parms,p=e.value;switch(s.toUpperCase()){case"RRULE":if(u.length)throw new Error("unsupported RRULE parm: "+u.join(","));n.push((0,c.B)(t));break;case"RDATE":var f=/RDATE(?:;TZID=([^:=]+))?/i.exec(t),d=(f[0],f[1]);d&&!h&&(h=d),r=r.concat(l(p,u));break;case"EXRULE":if(u.length)throw new Error("unsupported EXRULE parm: "+u.join(","));o.push((0,c.B)(p));break;case"EXDATE":i=i.concat(l(p,u));break;case"DTSTART":break;default:throw new Error("unsupported property: "+s)}}})),{dtstart:u,tzid:h,rrulevals:n,rdatevals:r,exrulevals:o,exdatevals:i}}(t,e),r=n.rrulevals,s=n.rdatevals,u=n.exrulevals,h=n.exdatevals,f=n.dtstart,d=n.tzid,v=!1===e.cache;if(e.compatible&&(e.forceset=!0,e.unfold=!0),e.forceset||r.length>1||s.length||u.length||h.length){var m=new i.Z(v);return m.dtstart(f),m.tzid(d||void 0),r.forEach((function(t){m.rrule(new o.ZP(p(t,f,d),v))})),s.forEach((function(t){m.rdate(t)})),u.forEach((function(t){m.exrule(new o.ZP(p(t,f,d),v))})),h.forEach((function(t){m.exdate(t)})),e.compatible&&e.dtstart&&m.rdate(f),m}var g=r[0]||{};return new o.ZP(p(g,g.dtstart||e.dtstart||f,g.tzid||e.tzid||d),v)}(t,function(t){var e=[],n=Object.keys(t),o=Object.keys(u);if(n.forEach((function(t){(0,a.q9)(o,t)||e.push(t)})),e.length)throw new Error("Invalid options: "+e.join(", "));return(0,r.pi)((0,r.pi)({},u),t)}(e))}function p(t,e,n){return(0,r.pi)((0,r.pi)({},t),{dtstart:e,tzid:n})}function l(t,e){return function(t){t.forEach((function(t){if(!/(VALUE=DATE(-TIME)?)|(TZID=)/.test(t))throw new Error("unsupported RDATE/EXDATE parm: "+t)}))}(e),t.split(",").map((function(t){return s.Z.untilStringToDate(t)}))}},17618:(t,e,n)=>{n.r(e),n.d(e,{createAPIClient:()=>p});var r=n(72565),o=n.n(r),i=n(10161),s=n(68796),a=n(88767);function c(t,e={}){return o().runtime.sendMessage({call:t,data:e}).then((e=>e.error?(s.RetryableError.is(e.error)||console.error("RPC invoke of",t,"returned error:",e.value),Promise.reject(e.value)):e.value)).catch((e=>(s.RetryableError.is(e)||console.error("RPC invoke of",t,"failed:",e),Promise.reject(e))))}class u extends i.EventEmitter{constructor(){super(),this.connected=!1,this.handleDisconnect=()=>{const t=Promise.reject(s.BackendDisconnectedError.from({}));this.connected=!1,this.pendingRpc.forEach(((e,n)=>{e(t)})),this.pendingRpc.clear()},this.handleMessage=(t,e)=>{switch(t.type){case"event":this.emit(t.name,...t.args||[]);break;case"response":{const e=this.pendingRpc.get(t.id);e&&(this.pendingRpc.delete(t.id),e(t.result));break}case"error":{const e=this.pendingRpc.get(t.id);e&&(this.pendingRpc.delete(t.id),e(Promise.reject(t.result)));break}}},this.rpc=(t,e)=>{if(!this.connected)return Promise.reject(new TypeError("The runtime is disconnected"));const n=(0,a.Z)();return new Promise(((r,o)=>{const i={id:n,name:t,type:"call",args:e};try{this.port.postMessage(i),this.pendingRpc.set(n,r)}catch(t){o(t)}}))},this.pendingRpc=new Map}connect(){return t=this,e=void 0,r=function*(){const t=yield o().runtime.connect(void 0,{name:"bardeen.api"});t.onDisconnect.addListener(this.handleDisconnect),t.onMessage.addListener(this.handleMessage),this.port=t,this.connected=!0},new((n=void 0)||(n=Promise))((function(o,i){function s(t){try{c(r.next(t))}catch(t){i(t)}}function a(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}c((r=r.apply(t,e||[])).next())}));var t,e,n,r}}class h{constructor(t){this.base=t}openSettings(t){const e=o().runtime.getURL("settings.html");window.open(t?e+`#/${t}`:e)}openErrors(){const t=o().runtime.getURL("settings.html");window.open(t+"#/errors")}openPlaybooks(t){const e=o().runtime.getURL("settings.html");window.open(e+"#/playbooks-catalog/?playbook="+t)}dedangle(t,e){("then"in t?t:t()).then((()=>{})).catch((t=>{console.error(t);const n=(0,s.isBardeenError)(t)?t:s.AssertionError.from({originalError:t});this.base.rpc("exceptionRegister",[{message:n.message,details:n,recoverable:!1,source:Object.assign({},e),date:Date.now()}])}))}authGetStatus(){return c("auth.rpc",{method:"authGetStatus",args:[]})}authFocusActive(){return c("auth.rpc",{method:"authFocusActive",args:[]})}promptSubmit(t){return c("auth.prompt.response",{method:"promptSubmit",args:t})}promptCancel(){return c("auth.prompt.cancel",{method:"promptCancel",args:[]})}authCancel(){return c("auth.rpc",{method:"authCancel",args:[]})}authContinue(){return c("auth.rpc",{method:"authContinue",args:[]})}authContinueOne(t){return c("auth.rpc",{method:"authContinueOne",args:[t]})}authDismissUI(){return c("auth.rpc",{method:"authDismissUI",args:[]})}}function p(){const t=new u,e=new h(t),n=t.connect();return new Proxy(t,{get:(r,o)=>o in e?e[o]:o in t?t[o]:(...e)=>n.then((()=>t.rpc(o,e)))})}}}]);